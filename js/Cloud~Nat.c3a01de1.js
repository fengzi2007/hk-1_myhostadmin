(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cloud~Nat"],{"0a57":function(e,t,a){"use strict";var o=a("7a24"),i=a.n(o);i.a},"21c5":function(e,t,a){"use strict";var o=a("a27e");t["a"]={getDiskRecycle:function(e){return Object(o["b"])("/disks",e)},createAndUpdateDisk:function(e,t){return"add"===e?Object(o["c"])("/disks",t):"update"===e?Object(o["d"])("/disks/".concat(t.id),t):void 0},backDiskRecycle:function(e){return Object(o["a"])("/disks/recycle_bin",e)},deleteDisk:function(e){return Object(o["a"])("/disks/".concat(e.id),e)},changeDiskStatus:function(e){return Object(o["d"])("/disks/".concat(e.id,"/delete_switch_host"),e)},getStoreList:function(e){return Object(o["b"])("/stores",e)},getCloudStatus:function(e){return Object(o["b"])("clouds/".concat(e,"/status"))},cloudMountDisk:function(e){return Object(o["c"])("/disks/".concat(e.id,"/mount"),e)},getDiskList:function(e){return Object(o["b"])("disks",e)}}},"27a1":function(e,t,a){},2909:function(e,t,a){"use strict";function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function i(e){if(Array.isArray(e))return o(e)}a.d(t,"a",(function(){return c}));a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function n(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}a("fb6a"),a("b0c0"),a("25f0");function r(e,t){if(e){if("string"===typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return i(e)||n(e)||r(e)||s()}},"3e32":function(e,t,a){"use strict";var o=a("f5ca"),i=a.n(o);i.a},"6c58":function(e,t,a){},7161:function(e,t,a){"use strict";var o=a("27a1"),i=a.n(o);i.a},"76f2":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.smartRulesList,height:"400"}},[a("el-table-column",{attrs:{prop:"name",label:e.$t("migration.rulesName")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",["bw"===o.type?a("span",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("common.msg205"),placement:"top",disabled:!(o.id&&!e.cloudDetailInfo.advanced_bw.node_authorized)}},[a("span",[e._v(" "+e._s(e.$t("common.bandwidth")+e.$t("common.rule"))+" "),o.id&&!e.cloudDetailInfo.advanced_bw.node_authorized?a("span",{staticClass:"el-icon-warning",staticStyle:{color:"#f64e60"}}):e._e()])])],1):e._e(),"cpu"===o.type?a("span",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("common.msg204"),placement:"top",disabled:!(o.id&&!e.cloudDetailInfo.advanced_cpu.node_authorized)}},[a("span",[e._v(" "+e._s("CPU"+e.$t("common.rule"))+" "),o.id&&!e.cloudDetailInfo.advanced_cpu.node_authorized?a("span",{staticClass:"el-icon-warning",staticStyle:{color:"#f64e60"}}):e._e()])])],1):e._e()])]}}])}),a("el-table-column",{attrs:{prop:"name",label:e.$t("common.rule")}}),a("el-table-column",{attrs:{prop:"times",label:e.$t("migration.targetNum"),formatter:e.format}}),a("el-table-column",{attrs:{label:e.$t("common.handle")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.openDialog(o)}}},[e._v(e._s(e.$t("common.update")))])],1)]}}])})],1),a("el-dialog",{attrs:{title:e.$t("common.handle")+e.$t("common.rule"),visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog}},[a("br"),a("el-form",{attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"CPU"+e.$t("common.rule")}},[a("el-select",{model:{value:e.editForm.advanced_cpu,callback:function(t){e.$set(e.editForm,"advanced_cpu",t)},expression:"editForm.advanced_cpu"}},[a("el-option",{attrs:{label:e.$t("common.notHave"),value:0}}),e._l(e.smartCPURules,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],2)],1),a("el-form-item",{attrs:{label:e.$t("common.bandwidth")+e.$t("common.rule")}},[a("el-select",{model:{value:e.editForm.advanced_bw,callback:function(t){e.$set(e.editForm,"advanced_bw",t)},expression:"editForm.advanced_bw"}},[a("el-option",{attrs:{label:e.$t("common.notHave"),value:0}}),e._l(e.smartBwRules,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],2)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editCloud}},[e._v("确 定")])],1)],1)],1)},i=[],n=(a("a9e3"),a("96cf"),a("1da1")),r=a("5530"),s=a("f381"),c=a("8491"),l={props:{cloudDetailInfo:{type:Object,default:function(){return{}}},id:{type:Number,default:0}},data:function(){return{smartRulesList:[],dialogVisible:!1,smartBwRules:[],smartCPURules:[],editForm:{advanced_cpu:0,advanced_bw:0}}},created:function(){this.pushSomeInfo(),this.getRules()},mounted:function(){},methods:{closeDialog:function(){this.editForm.advanced_cpu=0,this.editForm.advanced_bw=0},openDialog:function(e){this.editForm.advanced_cpu=this.cloudDetailInfo.advanced_cpu.id,this.editForm.advanced_bw=this.cloudDetailInfo.advanced_bw.id,this.dialogVisible=!0},pushSomeInfo:function(){this.smartRulesList=[],this.cloudDetailInfo.advanced_cpu&&(this.smartRulesList.push(Object(r["a"])({type:"cpu"},this.cloudDetailInfo.advanced_cpu)),this.editForm.advanced_cpu=this.cloudDetailInfo.advanced_cpu.id),this.cloudDetailInfo.advanced_bw&&(this.smartRulesList.push(Object(r["a"])({type:"bw"},this.cloudDetailInfo.advanced_bw)),this.editForm.advanced_bw=this.cloudDetailInfo.advanced_bw.id)},editCloud:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].updateCloudReq(Object(r["a"])({id:e.id},e.editForm));case 3:e.dialogVisible=!1,e.$message.success(e.$t("common.updateSuccess")),e.$emit("refreshCloudInfo"),t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getRules:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["a"].getSmartCpu({per_page:99999});case 3:return a=t.sent,t.next=6,s["a"].getSmartBw({per_page:99999});case 6:o=t.sent,e.smartBwRules=o.data||[],e.smartCPURules=a.data||[],t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})))()},format:function(e,t){return e.times?e.times+this.$t("config.evacuate.failUnit")+this.$t("migration.Trigger"):""}},computed:{},watch:{cloudDetailInfo:{handler:function(e){this.pushSomeInfo()},deep:!0}}},u=l,d=a("2877"),m=Object(d["a"])(u,o,i,!1,null,"0a3be84a",null);t["a"]=m.exports},"7a24":function(e,t,a){},"840a":function(e,t,a){"use strict";var o=a("f91b"),i=a.n(o);i.a},9836:function(e,t,a){"use strict";var o=a("a27e");t["a"]={sshListReq:function(e){return Object(o["b"])("ssh_keys",e)},addSshReq:function(e){return Object(o["c"])("ssh_keys",e)},unbindSshReq:function(e,t){return Object(o["a"])("ssh_keys/".concat(e,"/clouds"),t)},bindSshReq:function(e,t){return Object(o["c"])("ssh_keys/".concat(e,"/clouds"),t)},delSshReq:function(e){return Object(o["a"])("ssh_keys/".concat(e))}}},f0c9:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hardware"},[a("el-table",{key:"tableDA",staticClass:"mt-20",attrs:{"max-height":"400",data:e.tableData}},[a("el-table-column",{attrs:{prop:"typeName",label:e.$t("common.equipmentType"),width:"80","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"name",label:"ID",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"vendor",label:e.$t("common.supplier"),"min-width":"100",formatter:function(e){return""+(e.vendor?e.vendor:"-")},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"mountpoint",label:e.$t("common.equipmentCapacity"),"min-width":"140",formatter:function(e){return""+(e.product?e.product:e.size+"G")},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:e.$t("common.manage"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return["hyperv"!=e.slType?a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.defineXML(o)}}},[e._v(" "+e._s(e.$t("common.XMLinfo").substring(0,3))+" ")])],1):e._e(),"hyperv"!=e.slType?a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.unloadRow(o)}}},[e._v(e._s(e.$t("common.uninstall"))+" ")])],1):e._e()]}}])})],1),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.show,width:"1000px"},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)},close:e.closeDialog}},[a("el-form",{ref:"formData",staticClass:"dialog-form",attrs:{model:e.formData,rules:e.formDataRule,size:"medium","label-width":"100px"}},[a("div",{staticClass:"fboxRow"},[a("el-select",{attrs:{placeholder:e.$t("common.pleaseSelectTheDevice")},model:{value:e.device,callback:function(t){e.device=t},expression:"device"}},e._l(e.deviceTips,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),"gpu"===e.device?a("el-select",{ref:"selectRef",staticClass:"wt-select ml-20",attrs:{placeholder:e.$t("common.emptyGpu"),filterable:"",clearable:"",multiple:"","collapse-tags":"","filter-method":e.filterMore},on:{focus:e.focusHandel},model:{value:e.formData.pci,callback:function(t){e.$set(e.formData,"pci",t)},expression:"formData.pci"}},e._l(e.gpuTableData,(function(t,o){return a("el-option",{key:t.id,attrs:{value:t.id}},[a("div",{staticClass:"pciItem"},[a("span",[e._v(e._s(t.name))]),a("span",{staticClass:"pciName"},[e._v(e._s(t.vendor?t.vendor:""))]),a("span",{staticClass:"pciType"},[e._v(e._s(t.type?t.type:""))]),a("span",[e._v(e._s(t.product?t.product:""))])])])})),1):e._e(),"pci"===e.device?a("el-select",{ref:"selectRef",staticClass:"wt-select ml-20",attrs:{placeholder:e.$t("common.pleaseSelectPci"),filterable:"",clearable:"",multiple:"","collapse-tags":"","filter-method":e.filterMore},on:{focus:e.focusHandel},model:{value:e.formData.pci,callback:function(t){e.$set(e.formData,"pci",t)},expression:"formData.pci"}},e._l(e.pciTableData,(function(t,o){return a("el-option",{key:t.id,attrs:{value:t.id}},[a("div",{staticClass:"pciItem"},[a("span",[e._v(e._s(t.name))]),a("span",{staticClass:"pciName"},[e._v(e._s(t.vendor?t.vendor:""))]),a("span",{staticClass:"pciType"},[e._v(e._s(t.type?t.type:""))]),a("span",[e._v(e._s(t.product?t.product:""))])])])})),1):e._e()],1)]),"pci"===e.device?[a("el-table",{key:"pci",staticClass:"mt-20",staticStyle:{width:"100%"},attrs:{"max-height":"400",data:e.pciData}},[a("el-table-column",{attrs:{prop:"name",label:"ID",width:"140","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"product",label:e.$t("common.equipment"),"min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"vendor",label:e.$t("common.supplier"),width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{fixed:"right",label:e.$t("common.isItMounted"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{size:"mini",type:"delete"},on:{click:function(a){return e.deleteRow(t)}}})],1)]}}],null,!1,2145180756)})],1)]:"disk"===e.device?[a("el-table",{key:"disk",staticClass:"mt-20",staticStyle:{width:"100%"},attrs:{"max-height":"400",data:e.diskTableData,"row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"name",label:e.$t("common.devicePath"),"min-width":"170",formatter:function(e){return"/dex/"+e.name},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"size",label:e.$t("common.diskSize33"),width:"110",formatter:function(e){return e.size+"G"}}}),a("el-table-column",{attrs:{prop:"mountpoint",label:e.$t("common.mountPoint"),"min-width":"160"}}),a("el-table-column",{attrs:{prop:"host_ip",label:e.$t("common.mountExampleIp"),"min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.toComputerHome(o)}}},[e._v(e._s(o.host_ip))])]}}])}),a("el-table-column",{attrs:{"class-name":"selection",type:"selection",width:"20",selectable:e.isSelectRow}}),a("el-table-column",{attrs:{"class-name":"selection-id",label:e.$t("common.mountedToAnExample"),width:"100"}})],1)]:"gpu"===e.device?[a("el-table",{key:"pci",staticClass:"mt-20",staticStyle:{width:"100%"},attrs:{"max-height":"400",data:e.pciData}},[a("el-table-column",{attrs:{prop:"name",label:"ID"}}),a("el-table-column",{attrs:{prop:"vendor",label:e.$t("common.supplier")}}),a("el-table-column",{attrs:{prop:"product",label:e.$t("common.equType")}}),a("el-table-column",{attrs:{fixed:"right",label:e.$t("common.isItMounted"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{size:"mini",type:"delete"},on:{click:function(a){return e.deleteRow(t)}}})],1)]}}])})],1)]:e._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitFormDialog}},[e._v(e._s(e.$t("common.sure")))])],1)],2),a("el-dialog",{attrs:{title:e.$t("common.custom")+e.$t("common.XMLinfo").substring(0,3),visible:e.dialogVisible,width:"1000px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{staticClass:"xmlText",attrs:{type:"textarea",rows:2,placeholder:e.$t("common.pleaseEnterContent")},model:{value:e.xmlData.xml,callback:function(t){e.$set(e.xmlData,"xml",t)},expression:"xmlData.xml"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.resetXML}},[e._v(e._s(e.$t("common.reset")))]),a("el-button",{on:{click:e.handleClose}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.sureXML}},[e._v(e._s(e.$t("common.sure")))])],1)],1)],1)},i=[],n=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("d81d"),a("45fc"),a("a434"),a("b0c0"),a("dca8"),a("ac1f"),a("2532"),a("5319"),a("159b"),a("96cf"),a("1da1")),r=a("a27e"),s={getHardwareReq:function(e){return Object(r["b"])("/clouds/".concat(e.id,"/hardware_through"),e)},getPciReq:function(e){return Object(r["b"])("/node/".concat(e.id,"/pci"),e)},getDiskReq:function(e){return Object(r["b"])("/node/".concat(e.id,"/disk"),e)},createPciReq:function(e){return Object(r["c"])("/clouds/".concat(e.id,"/pci"),e)},createDiskReq:function(e){return Object(r["c"])("/clouds/".concat(e.id,"/disk"),e)},deletePciReq:function(e){return Object(r["a"])("/through/pcis/".concat(e))},deleteDiskReq:function(e){return Object(r["a"])("/through/disks/".concat(e))},updateXml:function(e){return Object(r["d"])("/clouds/".concat(e.id,"/hardware_through/").concat(e.hid),e)}},c={components:{},inject:["cloudsDeatil"],props:["slType"],data:function(){return{tableData:[],pciTableData:[],gpuTableData:[],backPciTableData:[],diskTableData:[],oldDiskTableData:[],dialogVisible:!1,xmlData:{id:"",type:"",hid:"",origin_xml:"",xml:""},dialog:{tiltle:"",type:"",show:!1},deviceTips:Object.freeze([{id:"gpu",name:this.$t("common.GraphicsCard")},{id:"pci",name:"PCI"},{id:"disk",name:this.$t("common.selectDisks")}]),device:"",formData:{pci:[],disk:[]},formDataRule:{}}},computed:{pciData:function(){var e=this;return this.backPciTableData.filter((function(t){return e.formData.pci.includes(t.id)}))}},watch:{device:{handler:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,i,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.clearForm(),o=t.cloudsDeatil.node_id,"pci"!==e){a.next=10;break}return a.next=5,s.getPciReq({id:o});case 5:i=a.sent,t.pciTableData=i.data,t.backPciTableData=JSON.parse(JSON.stringify(i.data)),a.next=23;break;case 10:if("disk"!==e){a.next=18;break}return a.next=13,s.getDiskReq({id:o});case 13:n=a.sent,t.oldDiskTableData=n.data,t.diskTableData=n.data,a.next=23;break;case 18:if("gpu"!==e){a.next=23;break}return a.next=21,s.getPciReq({id:o,type:"display"});case 21:r=a.sent,t.gpuTableData=r.data;case 23:case"end":return a.stop()}}),a)})))()}},"dialog.show":function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t.cloudsDeatil.node_id,!e){a.next=7;break}return a.next=4,s.getPciReq({id:o});case 4:i=a.sent,t.pciTableData=i.data,t.backPciTableData=i.data;case 7:case"end":return a.stop()}}),a)})))()}},methods:{filterMore:function(e){this.pciTableData=this.backPciTableData.filter((function(t){return t.name.includes(e)||t.product.includes(e)||t.vendor.includes(e)}))},focusHandel:function(){this.pciTableData=this.backPciTableData},defineXML:function(e){this.dialogVisible=!0,this.xmlData.id=this.cloudsDeatil.id,this.xmlData.type=e.type,this.xmlData.xml=e.xml,this.xmlData.hid=e.id,this.xmlData.origin_xml=e.origin_xml},handleClose:function(){this.dialogVisible=!1,this.textarea=""},resetXML:function(){this.xmlData.xml=this.xmlData.origin_xml},sureXML:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.$swal.fire({title:e.$t("common.msg224"),icon:"warning",showCancelButton:!0,confirmButtonText:e.$t("common.sure"),cancelButtonText:e.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value){t.next=8;break}return e.dialogVisible=!1,o=JSON.parse(JSON.stringify(e.xmlData)),delete o.origin_xml,t.next=6,s.updateXml(o);case 6:e.init(),e.$message.success(e.$t("common.msg225"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(a){e.$message.error("error")}case 1:case"end":return t.stop()}}),t)})))()},toComputerHome:function(e){this.$router.replace({name:"CloudsHome",query:{id:e.host_id}})},isSelectRow:function(e){var t=[],a=t.arr,o=t.arr2;o=this.oldDiskTableData.filter((function(e){return e.mountpoint||e.host_id})),a=o.concat(this.formData.disk);var i=a.some((function(t){return t.children?(t.children.some((function(t){return e.id===t.id})),t.children.some((function(t){return e.id===t.id}))):!(!t.parent||t.parent!==e.id)||void 0}));return!i&&(!e.mountpoint&&!e.host_id)},changeDiskData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=JSON.parse(JSON.stringify(e));return t=t.filter((function(e){return e.children=[],!e.parent})),e.forEach((function(e){e.parent&&t.forEach((function(t){t.id===e.parent&&t.children.push(e)}))})),t},clearForm:function(){this.pciTableData=[],this.diskTableData=[],Object.assign(this.formData,this.$options.data.call(this).formData)},handleClickDialogShow:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a.dialog.show=!0,a.dialog.title=e,a.dialog.type=t,a.clearForm(),"addHardware"===t&&(a.device="gpu");case 5:case"end":return o.stop()}}),o)})))()},closeDialog:function(){this.$refs.formData.resetFields()},submitFormDialog:function(){var e=this;this.$refs.formData.validate((function(t){t&&("addHardware"!==e.dialog.type||"pci"!==e.device&&"gpu"!==e.device?"addHardware"===e.dialog.type&&"disk"===e.device&&e.addDiskHardware():e.addPciHardware())}))},deleteRow:function(e){this.formData.pci.splice(e.$index,1)},handleSelectionChange:function(e){this.formData.disk=e},init:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.getHardwareReq({id:e.cloudsDeatil.id});case 2:for(n in a=t.sent,o=a.data,e.tableData=[],i=function(t){o[t].forEach((function(a){"pci"===t?a.typeName="display"===a.type?e.$t("common.GraphicsCard"):"PCI":(a.typeName=e.deviceTips.find((function(e){return e.id===t})).name,a.type=t),e.tableData.push(a)}))},o)i(n);case 7:case"end":return t.stop()}}),t)})))()},addPciHardware:function(){var e=this;0!==this.formData.pci.length?this.$swal.fire({title:"pci"===this.device?this.$t("common.msg48"):this.$t("common.addGpuTip"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value){t.next=8;break}return o={id:e.cloudsDeatil.id,pci:e.formData.pci},t.next=4,s.createPciReq(o);case 4:e.$message.success("pci"===e.device?e.$t("common.msg49"):e.$t("common.addGpuSuccess")),e.dialog.show=!1,e.$emit("refreshCloudStatus"),e.$emit("refreshCloudInfo");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.$message.error("pci"===this.device?this.$t("common.pleaseSelectPciDevice"):this.$t("common.emptyGpu"))},addDiskHardware:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e.cloudsDeatil.id,disk:e.formData.disk.map((function(e){return e.id}))},t.next=3,s.createDiskReq(a);case 3:e.$message.success(e.$t("common.msg26")),e.dialog.show=!1,e.$emit("refreshCloudStatus"),e.$emit("refreshCloudInfo");case 7:case"end":return t.stop()}}),t)})))()},unloadRow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:"disk"!==e.type?(o="display"!==e.type?t.$t("common.msg50"):t.$t("common.uninstallGpu"),t.$swal.fire({title:o+e.name+t.$t("common.why"),icon:"warning",showCancelButton:!0,confirmButtonText:t.$t("common.sure"),cancelButtonText:t.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o.value){a.next=6;break}return a.next=3,s.deletePciReq(e.id);case 3:t.$message.success("display"!==e.type?t.$t("common.msg51"):t.$t("common.uninstallSuccess")),t.$emit("refreshCloudStatus"),t.$emit("refreshCloudInfo");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())):t.$swal.fire({title:t.$t("common.msg52")+e.name+t.$t("common.why"),icon:"warning",showCancelButton:!0,confirmButtonText:t.$t("common.sure"),cancelButtonText:t.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o.value){a.next=6;break}return a.next=3,s.deleteDiskReq(e.id);case 3:t.$message.success(t.$t("common.msg24")),t.$emit("refreshCloudStatus"),t.$emit("refreshCloudInfo");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()}},created:function(){},mounted:function(){}},l=c,u=(a("f2ec"),a("2877")),d=Object(u["a"])(l,o,i,!1,null,"ebc598dc",null);t["a"]=d.exports},f2af:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hardware"},[a("el-table",{key:"tableDA",staticClass:"mt-20",attrs:{"max-height":"400",data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"type",label:e.$t("common.typesOf"),width:"80",formatter:function(t){return""+("snap"===t.type?e.$t("common.timingSnapshot"):e.$t("common.TimedBackup"))},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"frequency",label:e.$t("common.frequency"),"min-width":"80",formatter:function(t){return""+t.frequency+e.cycle[t.cycle]+"/"+e.$t("config.evacuate.failUnit")},"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"point",label:e.$t("cloudBackup.start_backup_time"),"show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"disk",label:e.$t("common.disk"),"min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-popover",{attrs:{placement:"top",trigger:"hover"}},[a("div",e._l(o.disk,(function(t,o){return a("div",{key:o},[e._v(e._s(t.name))])})),0),a("div",{staticClass:"fboxCol cursor text-ellipsis",attrs:{slot:"reference"},slot:"reference"},[a("span",[e._v(e._s(o.disk[0].name)+"("+e._s(o.disk.length)+")")])])])]}}])}),a("el-table-column",{attrs:{label:e.$t("common.manage"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteRow(o)}}},[e._v(e._s(e.$t("common.delete"))+" ")])],1)]}}])})],1)],1)},i=[],n=(a("96cf"),a("1da1")),r=a("8491"),s={components:{},inject:["cloudsDeatil"],data:function(){return{tableData:[],dialog:{tiltle:"",type:"",show:!1},cycle:{hour:this.$t("common.hour1"),day:this.$t("common.Day"),week:this.$t("common.week"),month:this.$t("common.month1")},device:"",formData:{pci:[],disk:[]},formDataRule:{}}},methods:{getData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r["a"].getTimeTaskReq({id:e.cloudsDeatil.id});case 2:a=t.sent,o=a.data,e.tableData=o;case 5:case"end":return t.stop()}}),t)})))()},deleteRow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$swal.fire({title:t.$t("common.confirmToDeleteThisTask"),icon:"warning",showCancelButton:!0,confirmButtonText:t.$t("common.sure"),cancelButtonText:t.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o.value){a.next=5;break}return a.next=3,r["a"].deleteTimeTaskReq({id:e.id,cloud:t.cloudsDeatil.id});case 3:t.$message.success(t.$t("common.deleteSuccess")),t.getData();case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 1:case"end":return a.stop()}}),a)})))()}},created:function(){}},c=s,l=(a("7161"),a("2877")),u=Object(l["a"])(c,o,i,!1,null,"48873868",null);t["a"]=u.exports},f2ec:function(e,t,a){"use strict";var o=a("6c58"),i=a.n(o);i.a},f5ca:function(e,t,a){},f91b:function(e,t,a){},fa41:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"computerInfo-wrapper",class:{"computerInfo-w":e.isShowAddButton},staticStyle:{background:"#fff"}},[a("div",{staticClass:"link"}),e.isShowAddButton?a("div",{staticClass:"showRuns"},[a("div",{staticClass:" showNum-Wrapper mr-10"},[a("span",[e._v(e._s(e.strNum))])]),"hyperv"!=e.cloudDetailInfo.type||"backup"===e.activeName?a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowUpdateButton,expression:"isShowUpdateButton"}],staticClass:"addButton-Wrapper mr-10",on:{click:function(t){return e.editTabsInfo()}}},[a("span",{staticClass:"icon-edit"})]):e._e(),("hyperv"!=e.cloudDetailInfo.type||"ip"===e.activeName||"backup"===e.activeName)&&"IPV6"!==e.activeName||"IPV6"===e.activeName&&e.ipv6_enable?a("div",{key:e.authority,staticClass:"addButton-Wrapper",on:{click:function(t){e.addtabsInfo(),e.changeTitle()}}},[a("i",{staticClass:"el-icon-plus"})]):e._e()]):e._e(),a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[(!e.isCursomerVersion||e.isCursomerVersion&&e.$hasAuthority("float_ip"))&&"host"===e.cloudDetailInfo.type&&"adsl"!==e.cloudDetailInfo.type||"lightHost"===e.cloudDetailInfo.type?a("el-tab-pane",{staticClass:"tabs-item floatIpGroup",staticStyle:{"min-height":"200px"},attrs:{label:e.$t("elastic.elastic_ip"),name:"floatIp"}},[a("div",{staticClass:"table-wrapper"},[a("float-ip",{ref:"floatIpData",attrs:{groupList:e.groupList,status:e.status,type:e.cloudDetailInfo.type,network_type:e.cloudDetailInfo.network_type,netTableData:e.netTableData,mainIp:e.cloudDetailInfo.mainip},on:{editFloatBws:e.editFloatBws,addtabsInfo:e.addtabsInfo,deleteFloatIP:e.deleteFloatIP}})],1)]):e._e(),"adsl"===e.cloudDetailInfo.type||"hyperv"===e.cloudDetailInfo.type||e.cloudDetailInfo.trunk||"vpc"===e.cloudDetailInfo.network_type?e._e():a("el-tab-pane",{key:"IPV6",staticClass:"tabs-item",staticStyle:{"min-height":"200px"},attrs:{label:"IPV6",name:"IPV6"}},[a("div",{staticClass:"info-wrapper-item"},[a("div",{staticClass:"table-wrapper"},[a("el-table",{ref:"ipv6Table",attrs:{height:"200",data:e.IPV6Data,width:"100%","row-style":e.rowStyle}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"60"}}),a("el-table-column",{attrs:{prop:"ipv6",label:"IPV6"+e.$t("common.address"),"min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","align-items":"center"}},[t.row.ipv6===e.cloudDetailInfo.mainip?a("span",{staticStyle:{color:"red","margin-right":"5px"}},[e._v("*")]):e._e(),a("div",[e._v(e._s(t.row.ipv6))])])]}}],null,!1,3956215672)}),e.isAgent||!e.isCursomerVersion?a("el-table-column",{attrs:{label:e.$t("common.manage"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{type:"delete",size:"mini"},on:{click:function(a){return e.deleteIp(t.row,!1,"ipv6")}}})],1)]}}],null,!1,1947434887)}):e._e()],1),a("div",{staticClass:"pagination"},[a("div",{staticClass:"fl-btn"},[e.isCursomerVersion?e._e():a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteIp({},!0,"ipv6")}}},[e._v(" "+e._s(e.$t("databaseBackup.batchRemove"))+" ")])],1),a("el-pagination",{attrs:{"current-page":e.IPV6PageInfo.page,"page-sizes":[3],"page-size":e.IPV6PageInfo.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.IPV6PageInfo.total},on:{"size-change":function(t){return e.currentChange("IPV6")},"current-change":function(t){return e.currentChange("IPV6")},"update:currentPage":function(t){return e.$set(e.IPV6PageInfo,"page",t)},"update:current-page":function(t){return e.$set(e.IPV6PageInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.IPV6PageInfo,"per_page",t)},"update:page-size":function(t){return e.$set(e.IPV6PageInfo,"per_page",t)}}})],1)],1)])])],1),a("el-dialog",{attrs:{title:e.isShowAlone?e.$t("common.createIpBw"):e.backUpTitle,visible:e.isShowFloatIpGroup,width:"500px"},on:{"update:visible":function(t){e.isShowFloatIpGroup=t},open:e.addResetFloatGroupForm,close:e.resetFloatGroupForm}},[a("el-form",{ref:"floatIpForm",attrs:{rules:e.floatIpRule,model:e.floatIpForm,size:"medium","label-width":"140px","label-position":e.$globalConfig.labelPosition}},[e.isAgent&&e.cloudDetailInfo.resource_package&&e.cloudDetailInfo.resource_package.ip&&!e.cloudDetailInfo.resource_package.ip.length&&"deleteIP"!==e.dataType&&"updateFloatIP"!==e.dataType&&"deleteBatchesIP"!==e.dataType?a("el-form-item",{attrs:{label:e.$t("common.ipNumber"),prop:"num"}},[a("el-input",{staticStyle:{width:"90%"},model:{value:e.floatIpForm.num,callback:function(t){e.$set(e.floatIpForm,"num",t)},expression:"floatIpForm.num"}})],1):"addFloatIP"===e.dataType||"addIP"===e.dataType?[a("el-radio-group",{staticClass:"ipChange",on:{change:e.changeIpType},model:{value:e.ipRadio,callback:function(t){e.ipRadio=t},expression:"ipRadio"}},[a("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("elastic.allot_new_ip")))]),a("el-tooltip",{attrs:{content:e.$t("common.msg8"),placement:"top",disabled:1===e.$store.state.config.edition}},[1===e.$store.state.functionSwitch.fs_elastic_ip_product&&"lightHost"!==e.cloudDetailInfo.type?a("el-radio",{attrs:{label:1,disabled:0===e.$store.state.config.edition||2===e.$store.state.config.edition}},[e._v(" "+e._s(e.$t("elastic.allot_ip_product"))+" ")]):e._e()],1)],1),a("el-form-item",{attrs:{prop:"ip",label:"IP","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"90%"},attrs:{multiple:"","collapse-tags":"",filterable:"",placeholder:e.$t("common.chooseIp"),"popper-class":"tree-select","filter-method":e.changeIp,clearable:"","reserve-keyword":""},on:{change:e.changeIp,clear:e.clearIp,"visible-change":e.hideSelect},model:{value:e.floatIpForm.ip,callback:function(t){e.$set(e.floatIpForm,"ip",t)},expression:"floatIpForm.ip"}},[a("el-option",{staticStyle:{height:"auto"},attrs:{value:e.selectValue}},[a("el-tree",{ref:"tree",attrs:{data:e.curIpSelectOptions,"show-checkbox":"","node-key":"id",props:e.defaultProps,lazy:"",load:e.loadNode,"filter-node-method":e.filterNode},on:{check:e.handlerCheckChange}})],1)],1)],1)]:"addIPV6"===e.dataType?a("el-form-item",{attrs:{prop:"ipv6Num",label:"ipv6"+e.$t("common.number"),"label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.floatIpForm.ipv6Num,callback:function(t){e.$set(e.floatIpForm,"ipv6Num",t)},expression:"floatIpForm.ipv6Num"}})],1):e._e(),"deleteIP"===e.dataType||"deleteIPv6"===e.dataType?a("div",{staticClass:"mt-20 mb-20"},["deleteIP"===e.dataType?a("span",[e._v(" IP: "+e._s(e.rowInfo.ip)+" ")]):"deleteIPv6"===e.dataType?a("span",[e._v(" IPV6: "+e._s(e.rowInfo.ipv6)+" ")]):e._e()]):"deleteBatchesIP"===e.dataType||"deleteBatchesIPV6"===e.dataType?a("div",e._l(e.rowInfo.ips,(function(t){return a("div",{key:t.id,staticStyle:{margin:"5px"}},["deleteBatchesIP"===e.dataType?a("span",[e._v(" "+e._s(t.ip)+" ")]):"deleteBatchesIPV6"===e.dataType?a("span",[e._v(" "+e._s(t.ipv6)+" ")]):e._e()])})),0):e._e(),"off"===e.status||"addIP"!==e.dataType&&"addIPV6"!==e.dataType&&"deleteIP"!==e.dataType&&"deleteIPv6"!==e.dataType&&"deleteBatchesIP"!==e.dataType&&"deleteBatchesIPV6"!==e.dataType||"normal"!==e.cloudDetailInfo.network_type?e._e():[a("div",{staticClass:"tag-danger"},[a("span",{staticClass:"title"},[e._v(e._s(e.$t("common.shutdownState"))+"：")]),a("ul",[a("li",[e._v(e._s(e.$t("common.makeSureCarefully")))]),a("li",[e._v(e._s(e.$t("common.beforeProceeding")))])])]),a("el-form-item",{attrs:{label:e.$t("common.forcedShutdown"),prop:"agree","label-width":"deleteIP"===e.dataType||"deleteBatchesIP"===e.dataType?"80px":"140px"}},[a("el-checkbox",{model:{value:e.floatIpForm.agree,callback:function(t){e.$set(e.floatIpForm,"agree",t)},expression:"floatIpForm.agree"}},[e._v(e._s(e.$t("common.AgreeForced")))])],1)],"deleteBatchesIP"===e.dataType||"addIP"===e.dataType||"deleteIP"===e.dataType||"deleteIPv6"===e.dataType||"deleteBatchesIPV6"===e.dataType||!0!==e.isAddFloatGourp||"addFloatIP"!==e.dataType&&"updateFloatIP"!==e.dataType?e._e():[a("el-form-item",{attrs:{label:e.$t("common.bandwidth"),prop:"in_bw","label-width":e.formLabelWidth,disabled:!0}},[a("div",{staticStyle:{display:"flex"}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.$t("common.in")))]),a("el-input",{staticStyle:{width:"60%"},attrs:{props:"in_bw",type:"text",autocomplete:"off"},model:{value:e.floatIpForm.in_bw,callback:function(t){e.$set(e.floatIpForm,"in_bw",t)},expression:"floatIpForm.in_bw"}}),a("div",{staticStyle:{display:"flex",flex:"1","justify-content":"flex-end"}},[e._v("Mbps")])],1)]),a("el-form-item",{attrs:{prop:"out_bw","label-width":e.formLabelWidth,disabled:!0}},[a("div",{staticStyle:{display:"flex"}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.$t("common.out")))]),a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text",autocomplete:"off"},model:{value:e.floatIpForm.out_bw,callback:function(t){e.$set(e.floatIpForm,"out_bw",t)},expression:"floatIpForm.out_bw"}}),a("div",{staticStyle:{display:"flex",flex:"1","justify-content":"flex-end"}},[e._v("Mbps")])],1)])],"off"!==e.status&&"normal"===e.cloudDetailInfo.network_type&&"updateFloatIP"!==e.dataType&&"addIPV6"!==e.dataType&&"deleteIPv6"!==e.dataType&&"deleteBatchesIPV6"!==e.dataType?[a("div",{staticClass:"tag-danger"},[a("span",{staticClass:"title"},[e._v(e._s(e.$t("common.msg7"))+" ")]),a("ul",[a("li",[e._v(e._s(e.$t("common.makeSureCarefully"))+" ")]),a("li",[e._v(e._s(e.$t("common.beforeProceeding"))+" ")])])]),a("el-form-item",{attrs:{label:e.$t("common.forcedShutdown"),prop:"agree"}},[a("el-checkbox",{model:{value:e.floatIpForm.agree,callback:function(t){e.$set(e.floatIpForm,"agree",t)},expression:"floatIpForm.agree"}},[e._v(e._s(e.$t("common.AgreeForced"))+" ")])],1)]:e._e()],2),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isShowFloatIpGroup=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitAddFloatGroup}},[e._v(e._s(e.$t("common.sure")))])],1)],1),a("el-dialog",{attrs:{title:e.dialogForm.title,visible:e.dialogForm.show,width:"500px"},on:{"update:visible":function(t){return e.$set(e.dialogForm,"show",t)},close:e.closeDialog}},[a("el-form",{ref:"dialogFormData",attrs:{rules:e.formRules,model:e.dialogFormData,"label-position":e.$globalConfig.labelPosition}},["updateCustomer"===e.dialogForm.type?[a("el-form-item",{attrs:{label:e.$t("common.client"),prop:"uid","label-width":"120px"}},[a("el-select",{staticStyle:{width:"85%"},attrs:{filterable:"",placeholder:e.$t("common.selectCustome")},on:{change:e.getVpcList},model:{value:e.dialogFormData.uid,callback:function(t){e.$set(e.dialogFormData,"uid",t)},expression:"dialogFormData.uid"}},e._l(e.customer,(function(e,t){return a("el-option",{key:t,attrs:{label:e.username,value:e.id}})})),1)],1),"normal"!=e.cloudDetailInfo.network_type&&1!=e.cloudDetailInfo.support_nat?a("el-form-item",{attrs:{label:e.$t("common.VPCnetwork"),prop:"vpc","label-width":"120px"}},[a("el-select",{staticStyle:{width:"85%"},attrs:{filterable:"",placeholder:e.$t("common.selectNetwork")},model:{value:e.dialogFormData.vpc,callback:function(t){e.$set(e.dialogFormData,"vpc",t)},expression:"dialogFormData.vpc"}},[a("el-option",{attrs:{label:e.$t("common.createNewWeb"),value:0}}),e._l(e.vpcNetwork,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],2)],1):e._e(),"off"!==e.status&&"normal"!=e.cloudDetailInfo.network_type?[a("div",{staticClass:"tag-danger"},[a("span",{staticClass:"title"},[e._v(e._s(e.$t("common.shutdownState")))]),a("ul",[a("li",[e._v(e._s(e.$t("common.makeSureCarefully")))]),a("li",[e._v(e._s(e.$t("common.beforeProceeding")))])])]),"off"!==e.status?a("el-form-item",{attrs:{label:e.$t("common.forcedShutdown"),prop:"agree","label-width":"120px"}},[a("el-checkbox",{model:{value:e.dialogFormData.agree,callback:function(t){e.$set(e.dialogFormData,"agree",t)},expression:"dialogFormData.agree"}},[e._v(e._s(e.$t("common.AgreeForced"))+" ")])],1):e._e()]:e._e()]:"timeTask"===e.dialogForm.type?[a("el-form-item",{attrs:{label:e.$t("common.handle"),prop:"type","label-width":"100px"}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:e.$t("common.selectType")},model:{value:e.dialogFormData.type,callback:function(t){e.$set(e.dialogFormData,"type",t)},expression:"dialogFormData.type"}},[a("el-option",{attrs:{label:e.$t("common.timingSnapshot"),value:"snap"}}),a("el-option",{attrs:{label:e.$t("common.TimedBackup"),value:"backup"}})],1)],1),a("el-form-item",{attrs:{label:e.$t("common.disks"),prop:"disk","label-width":"100px"}},[a("el-select",{staticStyle:{width:"85%"},attrs:{multiple:"","collapse-tags":"",clearable:"",filterable:"",placeholder:e.$t("common.selectDisks")},model:{value:e.dialogFormData.disk,callback:function(t){e.$set(e.dialogFormData,"disk",t)},expression:"dialogFormData.disk"}},e._l(e.cloudDetailInfo.disk,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:e.$t("common.frequency"),prop:"frequency","label-width":"100px"}},[a("div",{staticClass:"fboxRow Xbetween",staticStyle:{width:"85%"}},[a("el-select",{staticStyle:{width:"45%"},attrs:{placeholder:e.$t("common.selectfrequency")},model:{value:e.dialogFormData.frequency,callback:function(t){e.$set(e.dialogFormData,"frequency",t)},expression:"dialogFormData.frequency"}},e._l(24,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1),a("el-select",{staticStyle:{width:"45%"},model:{value:e.dialogFormData.cycle,callback:function(t){e.$set(e.dialogFormData,"cycle",t)},expression:"dialogFormData.cycle"}},[a("el-option",{attrs:{label:e.$t("common.hour1"),value:"hour"}}),a("el-option",{attrs:{label:e.$t("common.Day"),value:"day"}}),a("el-option",{attrs:{label:e.$t("common.week"),value:"week"}}),a("el-option",{attrs:{label:e.$t("common.month1"),value:"month"}})],1)],1)]),a("div",{staticClass:"tag-danger",staticStyle:{"padding-bottom":"20px"}},[a("span",{staticClass:"title"},[e._v(e._s(e.$t("common.automaticallyOverwritten")))])])]:"cpuLimit"===e.dialogForm.type?[a("div",{staticClass:"fboxRow Xbetween Ycenter"},[a("h5",[e._v("CPU Topology "),a("a",{attrs:{href:"https://libvirt.org/formatdomain.html#elementsCPU",target:"_blank"}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])]),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.dialogFormData.cputopcheck,callback:function(t){e.$set(e.dialogFormData,"cputopcheck",t)},expression:"dialogFormData.cputopcheck"}})],1),a("div",{staticClass:"fboxRow Xend cpuLimit"},[a("el-form-item",{attrs:{prop:"cpusockets"}},[a("div",{staticClass:"fboxCol Ycenter mr-10"},[a("span",[e._v("sockets")]),a("el-input-number",{staticStyle:{width:"60px"},attrs:{controls:!1,min:1,max:999},model:{value:e.dialogFormData.cpusockets,callback:function(t){e.$set(e.dialogFormData,"cpusockets",e._n(t))},expression:"dialogFormData.cpusockets"}})],1)]),a("el-form-item",{attrs:{prop:"cpucores"}},[a("div",{staticClass:"fboxCol Ycenter mr-10"},[a("span",[e._v("cores")]),a("el-input-number",{staticStyle:{width:"60px"},attrs:{controls:!1,min:1,max:999},model:{value:e.dialogFormData.cpucores,callback:function(t){e.$set(e.dialogFormData,"cpucores",e._n(t))},expression:"dialogFormData.cpucores"}})],1)]),a("el-form-item",{attrs:{prop:"cputhreads"}},[a("div",{staticClass:"fboxCol Ycenter ml-10"},[a("span",[e._v("threads")]),a("el-input-number",{staticStyle:{width:"60px"},attrs:{controls:!1,min:1,max:999},model:{value:e.dialogFormData.cputhreads,callback:function(t){e.$set(e.dialogFormData,"cputhreads",e._n(t))},expression:"dialogFormData.cputhreads"}})],1)])],1),a("div",{staticClass:"fboxRow Xbetween Ycenter"},[a("h5",[e._v("CPU Tune "),a("a",{attrs:{href:"http://libvirt.org/formatdomain.html#elementsCPUTuning",target:"_blank"}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])]),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.dialogFormData.cputunecheck,callback:function(t){e.$set(e.dialogFormData,"cputunecheck",t)},expression:"dialogFormData.cputunecheck"}})],1),a("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:e.$t("common.input"),autosize:{minRows:4,maxRows:6}},model:{value:e.dialogFormData.cputune,callback:function(t){e.$set(e.dialogFormData,"cputune",t)},expression:"dialogFormData.cputune"}}),a("div",{staticClass:"fboxRow Xbetween Ycenter"},[a("h5",[e._v("NUMA Topology "),a("a",{attrs:{href:"https://libvirt.org/formatdomain.html#elementsCPU",target:"_blank"}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])]),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.dialogFormData.cpunumacheck,callback:function(t){e.$set(e.dialogFormData,"cpunumacheck",t)},expression:"dialogFormData.cpunumacheck"}})],1),a("el-input",{style:{width:"100%"},attrs:{type:"textarea",placeholder:e.$t("common.input"),autosize:{minRows:4,maxRows:6}},model:{value:e.dialogFormData.cpunumatop,callback:function(t){e.$set(e.dialogFormData,"cpunumatop",t)},expression:"dialogFormData.cpunumatop"}})]:"editHostname"===e.dialogForm.type?[a("el-form-item",{attrs:{label:e.$t("common.hostName"),prop:"hostname","label-width":"120px"}},[a("template",{slot:"label"},[a("div",[a("span",[e._v(e._s(e.$t("common.hostName")))]),a("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover",content:e.$t("cloud.errMsg")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("el-input",{staticStyle:{width:"260px"},model:{value:e.dialogFormData.hostname,callback:function(t){e.$set(e.dialogFormData,"hostname",t)},expression:"dialogFormData.hostname"}})],2)]:"editAdsl"===e.dialogForm.type?[a("el-form-item",{attrs:{prop:"adsl",label:"ADSL"+e.$t("login.account")}},[a("el-select",{staticStyle:{width:"250px"},on:{change:e.changeCheckAdsl},model:{value:e.dialogFormData.adsl,callback:function(t){e.$set(e.dialogFormData,"adsl",t)},expression:"dialogFormData.adsl"}},e._l(e.adslList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)],1),a("div",{staticClass:"tag-danger"},[a("span",{staticClass:"title"},[e._v(e._s(e.$t("common.shutdownState"))+" ")]),a("ul",[a("li",[e._v(e._s(e.$t("common.makeSureCarefully"))+" ")]),a("li",[e._v(e._s(e.$t("common.beforeProceeding"))+" ")])])]),a("el-form-item",{attrs:{label:e.$t("common.forcedShutdown"),prop:e.isAdslAgree?"agree":""}},[a("el-checkbox",{model:{value:e.dialogFormData.agree,callback:function(t){e.$set(e.dialogFormData,"agree",t)},expression:"dialogFormData.agree"}},[e._v(e._s(e.$t("common.AgreeForced"))+" ")])],1)]:e._e()],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFormDialog}},[e._v(e._s(e.$t("common.sure")))])],1)],1),a("el-dialog",{attrs:{title:e.$t("common.XMLinfo"),visible:e.isShowXMLDialog,width:"40%"},on:{"update:visible":function(t){e.isShowXMLDialog=t}}},[a("el-form",{attrs:{"label-width":"50px","label-position":e.$globalConfig.labelPosition}},[a("el-input",{style:{width:"100%"},attrs:{readonly:"readonly",type:"textarea",placeholder:e.$t("common.maintenanceInformation"),autosize:{minRows:20,maxRows:20}},model:{value:e.cloudsXml,callback:function(t){e.cloudsXml=t},expression:"cloudsXml"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isShowXMLDialog=!1}}},[e._v(e._s(e.$t("common.sure"))+" ")])],1)],1),a("restoreDialog",{staticClass:"restoreDialog",attrs:{isShowRestoreBackUp:e.isShowRestoreBackUp,keyword:"name",dataType:e.dataType,rowInfo:e.rowInfo},on:{submitRestoreRow:e.submitRestoreBackUp,"update:isShowRestoreBackUp":function(t){e.isShowRestoreBackUp=t},"update:is-show-restore-back-up":function(t){e.isShowRestoreBackUp=t}}}),a("deleteDialog",{staticClass:"deleteDialog",attrs:{isShowDelDialog:e.isShowDelDialog,keyword:"natBuild"==e.activeName?"domain":"name",dataType:e.dataType,rowInfo:e.rowInfo},on:{submitDeleteRow:e.submitDeleteRow,"update:isShowDelDialog":function(t){e.isShowDelDialog=t},"update:is-show-del-dialog":function(t){e.isShowDelDialog=t}}})],1)])},i=[],n=(a("a4d3"),a("e01a"),a("99af"),a("a623"),a("4de4"),a("7db0"),a("4160"),a("a630"),a("caad"),a("c975"),a("d81d"),a("13d5"),a("45fc"),a("b0c0"),a("a9e3"),a("dca8"),a("d3b7"),a("ac1f"),a("6062"),a("2532"),a("3ca3"),a("841c"),a("159b"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),r=a("53ca"),s=a("2909"),c=a("5530"),l=a("dc57"),u=a("8491"),d=a("3995"),m=a("f61f"),p=a("9836"),h=a("e041"),f=a("fdad"),g=(a("f0c9"),a("f2af"),a("76f2"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-table",{attrs:{height:"200",data:e.showGroupList,width:"100%"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"ip",label:e.$t("common.ipAddress")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[o.ip&&o.ip[0]?[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.openDialog(o,!1)}}},[a("span",[e._v(e._s(o.ip[0].ip))]),a("span",{staticStyle:{color:"#3673ff"}},[e._v("("+e._s(o.ip.length)+")")])])]:[a("div",[a("span",[e._v(e._s(e.netTableData[0].ipaddress[0].ipaddress))])])]]}}])}),a("el-table-column",{attrs:{prop:"in_bw",label:e.$t("common.inBandwidth")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.in_bw)+"Mbps")])]}}])}),a("el-table-column",{attrs:{prop:"out_bw",label:e.$t("common.outbandwidth")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.out_bw)+"Mbps")])]}}])}),e.isCursomerVersion?e._e():a("el-table-column",{attrs:{label:e.$t("common.manage"),"min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.editFloatBws(o)}}},[e._v(" "+e._s(e.$t("common.modifyBandwidth"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addtabsInfo(o)}}},[e._v(" "+e._s(e.$t("common.add")+e.$t("common.ipAddress"))+" ")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.openDialog(o,!0)}}},[e._v(" "+e._s(e.$t("common.delete"))+" ")])],1)]}}],null,!1,2066588769)})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.pageInfo.page,"page-sizes":[3],"page-size":e.pageInfo.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.changeSize,"current-change":e.changePage,"update:currentPage":function(t){return e.$set(e.pageInfo,"page",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.pageInfo,"per_page",t)},"update:page-size":function(t){return e.$set(e.pageInfo,"per_page",t)}}})],1),a("el-dialog",{attrs:{title:e.isShow?e.$t("common.delete")+e.$t("common.ipAddress"):e.$t("common.ipAddress"),visible:e.dialogVisible,width:e.isShow?"600px":"660px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeDialog}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[e.isShow?[a("el-tree",{ref:"tree",attrs:{data:e.calcIp,"show-checkbox":"","node-key":"id",props:e.defaultProps}}),"off"!==e.status&&"normal"===e.network_type?[a("div",{staticClass:"tag-danger",staticStyle:{"margin-top":"15px"}},[a("span",{staticClass:"title"},[e._v(e._s(e.$t("common.shutdownState")))]),a("ul",[a("li",[e._v(e._s(e.$t("common.makeSureCarefully"))+" ")]),a("li",[e._v(e._s(e.$t("common.beforeProceeding"))+" ")])])]),a("el-form-item",{attrs:{label:e.$t("common.forcedShutdown"),"label-width":"100px",prop:"agree"}},[a("el-checkbox",{model:{value:e.ruleForm.agree,callback:function(t){e.$set(e.ruleForm,"agree",t)},expression:"ruleForm.agree"}},[e._v(e._s(e.$t("common.AgreeForced")))])],1)]:e._e(),a("el-row",{staticStyle:{padding:"10px"},attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$t("common.cancel"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.deleteFloatIP}},[e._v(" "+e._s(e.$t("admin.confirm"))+" ")])],1)]:[a("div",{staticClass:"row-ip"},[a("div",{staticClass:"menu"},[a("p",{staticClass:"item"},[e._v(e._s(e.$t("common.ipSegment")))]),a("p",{staticClass:"item"},[e._v("IP")]),a("p",{staticClass:"item"},[e._v(e._s(e.$t("common.mask")))]),a("p",{staticClass:"item"},[e._v(e._s(e.$t("common.gateway")))])]),e._l(e.calcIp,(function(t){return a("div",{key:t.ip_name,staticClass:"menu"},[a("div",{staticClass:"ip_name"},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{name:t.ip_name}},[a("template",{slot:"title"},[e._v(e._s(t.ip))]),e._l(t.ipArr,(function(t){return a("div",{key:t.id,staticClass:"ip-item"},[a("p",{staticClass:"item"}),a("p",{staticClass:"item"},[e._v(" "+e._s(t.ip)+" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.ip,expression:"sip.ip"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]),a("p",{staticClass:"item"},[e._v(e._s(t.subnet_mask))]),a("p",{staticClass:"item"},[e._v(e._s(t.gateway))])])}))],2)],1)],1)])}))],2)]],2)],1)],1)}),b=[],v={props:{groupList:{required:!0,default:function(){return[{ip:[]}]}},type:{required:!0,default:""},status:{type:String,default:null},network_type:{type:String},netTableData:{type:Array,default:function(){return[]}},mainIp:{type:String,default:""}},data:function(){var e=this,t=function(t,a,o){!0===a?o():o(new Error(e.$t("common.checkAgreeForced")))};return{dialogVisible:!1,showGroupList:[],isShow:!1,rowInfo:{},pageInfo:{page:1,per_page:3,total:0},isAgent:JSON.parse(localStorage.getItem("isAgent")),isCursomerVersion:!0,ruleForm:{agree:!1},rules:{agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:t,trigger:"change"}]},calcIp:[],activeNames:[],selectValue:[],defaultProps:{children:"ipArr",label:"ip"}}},created:function(){},mounted:function(){},methods:{onCopy:Object(l["b"])((function(){this.$message({message:this.$t("common.copyIpSuccess"),type:"success"})})),onError:Object(l["b"])((function(){this.$message({message:this.$t("common.copyIpFailed"),type:"error"})})),closeDialog:function(){this.activeNames=[]},changeSize:function(){var e=this;this.showGroupList=this.groupList.filter((function(t,a){if(a>=(e.pageInfo.page-1)*e.pageInfo.per_page&&a<e.pageInfo.page*e.pageInfo.per_page)return t}))},changePage:function(){var e=this;this.showGroupList=this.groupList.filter((function(t,a){if(a>=(e.pageInfo.page-1)*e.pageInfo.per_page&&a<e.pageInfo.page*e.pageInfo.per_page)return t}))},editFloatBws:function(e){this.$emit("editFloatBws",e)},addtabsInfo:function(e){this.$emit("addtabsInfo",e.id)},openDialog:function(e,t){var a=this;this.isShow=t,this.rowInfo=e,this.dialogVisible=!0;var o=e.ip.reduce((function(e,t){return e.push(t.ip_name),e}),[]);this.calcIp=Array.from(new Set(o)).reduce((function(t,o,i){var n=e.ip.filter((function(e){return e.ip_name===o}));return t.push({id:i,ip:"".concat(o,"（").concat(a.$t("area.ipQuantity"),":").concat(n.length,"）"),ipArr:n}),t}),[])},handelDisabeld:function(e,t){return e.ip!==this.mainIp||"normal"!==this.network_type},deleteFloatIP:function(){var e=this,t=this.$refs.tree.getCheckedKeys(!0);if(!t.length)return this.$message.warning(this.$t("common.pleaseSelect"));this.$refs.ruleForm.validate((function(a){if(!a)return!1;e.$emit("deleteFloatIP",t,"batches")}))}},computed:{},watch:{groupList:{handler:function(e){var t=this;this.showGroupList=this.groupList.filter((function(e,a){if(a>=(t.pageInfo.page-1)*t.pageInfo.per_page&&a<t.pageInfo.page*t.pageInfo.per_page)return e})),this.pageInfo.total=this.groupList.length},deep:!0}}},w=v,_=(a("3e32"),a("2877")),$=Object(_["a"])(w,g,b,!1,null,"f57ac956",null),I=$.exports,k={components:{deleteDialog:f["default"],restoreDialog:h["default"],FloatIp:I},props:{migShow:{type:Boolean,default:!1},fastPhotoData:{type:Array},status:{type:String,default:null},diskStoreSelectOptions:{type:Array,default:function(){return[]}},netTableData:{type:Array,default:function(){return[]}},cloudDetailInfo:{type:Object,default:null},id:{type:Number},diskInfo:{type:Array},isCursomerVersion:{type:Boolean,default:!1},ipv6_enable:{type:Number,default:0},isIpTab:{type:Boolean,default:!1}},watch:{tableData:{handler:function(e){this.changeHotMig()},deep:!0},migShow:function(e){e&&(this.dialogInfo.type="moveDisk",this.dialogNodeVisible=!0)},ipId:function(e){var t=this;this.ipSelect.forEach((function(a){a.id===e&&(t.ip_name=a.ip)}))},ipListId:function(e){this.getIpInfo(e)},"operaForm.start_ip":function(e){"0.0.0.0"===e&&(this.operaForm.end_ip="0.0.0.0")},"operaForm.end_ip":function(e){"0.0.0.0"===e&&(this.operaForm.start_ip="0.0.0.0")},"operaForm.protocol":function(e){"all"!==e&&"icmp"!==e&&"all_tcp"!==e&&"all_udp"!==e&&"gre"!==e||"host"===this.cloudDetailInfo.type||(this.operaForm.start_port=1,this.operaForm.end_port=65535)},cloudDetailInfo:{handler:function(e,t){var a=this;t&&(this.vncPassword=this.cloudDetailInfo.vncpass,this.getHiddenVncPassword()),this.cloudDetailInfo.default_bw_group&&this.defaultGroupIp!==this.cloudDetailInfo.default_bw_group.id&&(this.defaultGroupIp=this.cloudDetailInfo.default_bw_group.id,this.getLimitRateIp()),this.backup_num=this.cloudDetailInfo.backup_num,this.backForm.backup_num=this.cloudDetailInfo.backup_num,this.backup_used=this.cloudDetailInfo.backup_used,this.snap_num=this.cloudDetailInfo.snap_num,this.snap_used=this.cloudDetailInfo.snap_used,this.backForm.snap_num=this.cloudDetailInfo.snap_num,this.nat_acl_limit=this.cloudDetailInfo.nat_acl_limit,this.nat_web_limit=this.cloudDetailInfo.nat_web_limit,this.backForm.nat_acl_limit=this.cloudDetailInfo.nat_acl_limit,this.backForm.nat_web_limit=this.cloudDetailInfo.nat_web_limit,this.tableData=[],this.cloudDetailInfo.disk.forEach((function(e){var t=Object(c["a"])(Object(c["a"])({},e),{},{checkStore:""});a.tableData.push(t)}))},deep:!0},"$store.state.migrate":{handler:function(e,t){e&&"progress"in e&&100!==e.progress&&(this.migrateShow=!0),e&&"progress"in e&&100===e.progress&&"migrate"===e.type&&2===e.status&&(this.getLimitRateIp(),this.getCloudNatTranspond()),this.migrate=JSON.parse(JSON.stringify(e))},deep:!0}},computed:{authority:function(){return"hardware"===this.activeName?"gpupass":"floatIp"===this.activeName?"float_ip":"timeTask"===this.activeName?"cloud_cron_snap":""},isShowAddButton:function(){return!("backup"!==this.activeName&&"snap"!==this.activeName&&("ip"!==this.activeName||!this.isAgent&&this.isCursomerVersion)&&("floatIp"!==this.activeName||!this.isAgent&&this.isCursomerVersion)&&"natTranspond"!==this.activeName&&"natBuild"!==this.activeName&&"hardware"!==this.activeName&&"timeTask"!==this.activeName&&"IPV6"!==this.activeName)},isShowUpdateButton:function(){return(!this.isAgent||!("backup"===this.activeName&&-1===this.cloudDetailInfo.resource_package.backup_num||"snap"===this.activeName&&-1===this.cloudDetailInfo.resource_package.snap_num))&&!("backup"!==this.activeName&&"snap"!==this.activeName&&"natTranspond"!==this.activeName&&"natBuild"!==this.activeName||!this.isAgent&&this.isCursomerVersion)},strNum:function(){if("backup"===this.activeName&&-1!==this.backup_num){var e=0===this.backup_num?this.$t("common.unlimited"):this.backup_num;return this.backup_used+"/"+e}if("snap"===this.activeName&&-1!==this.snap_num){var t=0===this.snap_num?this.$t("common.unlimited"):this.snap_num;return this.snap_used+"/"+t}if("natTranspond"===this.activeName&&-1!==this.nat_acl_limit){var a=0===this.nat_acl_limit?this.$t("common.unlimited"):this.nat_acl_limit;return this.cloudDetailInfo.nat_acl_used+"/"+a}if("natBuild"===this.activeName&&-1!==this.nat_web_limit){var o=0===this.nat_web_limit?this.$t("common.unlimited"):this.nat_web_limit;return this.cloudDetailInfo.nat_web_used+"/"+o}return""}},data:function(){var e=this,t=function(t,a,o){var i=/^(?!\/)(?=.*[0-9])(?=.*[A-Z])(?=.*[a-z])[A-Za-z\d~!@#$&*()_\-+=|{}[\];:<>?,./]{6,}$/;i.test(a)?o():o(new Error(e.$t("cloud.pleaseEnterTheCorrectPassword")))},a=function(t,a,o){""===a||/^[0-9]*$/.test(a)&&parseInt(a)<=65535&&parseInt(a)>=1?80===parseInt(a)||443===parseInt(a)||22===parseInt(a)?o(new Error(e.$t("common.post165535"))):o():o(new Error(e.$t("common.post165535")))},o=function(t,a,o){!/^[0-9]*$/.test(a)||80!==parseInt(a)&&443!==parseInt(a)?o(new Error(e.$t("common.post443"))):o()},i=function(t,a,o){/^[0-9]*$/.test(a)&&parseInt(a)<=65535&&parseInt(a)>=1?o():o(new Error(e.$t("common.post65535")))},n=function(t,a,o){!0===a?o():"editAdsl"===e.dialogForm.type?o(new Error(e.$t("common.checkAgreeForcedMsg"))):o(new Error(e.$t("common.checkAgreeForced")))};return{isShowAlone:!1,ipRadio:0,protocol:Object.freeze([{id:1,cont:"tcp"},{id:2,cont:"udp"},{id:3,cont:"tcp+udp"}]),defaultGroupIp:0,dialogRule:{node:[{required:!0,message:this.$t("common.select")+this.$t("common.nowNode"),trigger:"change"}],ip:[{required:!0,message:this.$t("common.select")+"IP",trigger:"change"}],allow_discard_snap:[{validator:function(t,a,o){a||o(new Error(e.$t("common.mustCheck"))),o()},trigger:"change"}],agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:n,trigger:"change"}]},dialogInfo:{type:"moveNode",advanced:!1,ipGroup:0,store:"",node:"",ip:[],hot_migrate:1,quick_migrate:1,force_hot_migrate:0,allow_hang:0,force:0,showAdsl:!1,adsl:0,agree:!1,allow_discard_snap:0,disk:[]},protocolSuite:this.$t("common.basicProtocol"),isPortDisabled:!1,adslList:[],isAdslAgree:!0,tableData:[],isDisabled:!1,isAgent:JSON.parse(localStorage.getItem("isAgent")),isShowEditBackUpType:"add",isShowNat:!1,dialogFromShow:!1,isNetworkQueueShow:!1,cpu_limit1:"",vncPortRules:{vncPort:[{required:!0,message:this.$t("common.fillPort"),trigger:"blur"},{validator:function(t,a,o){return e.$validate.validVncPort(t,a,o)},trigger:"blur"}],vncPassWord:[{required:!0,message:this.$t("common.fillvncpwd"),trigger:"blur"},{validator:function(t,a,o){return e.$validate.validVncPass(t,a,o)},trigger:"blur"}]},editInfo:{},floatIpForm:{id:void 0,ip:void 0,num:void 0,out_bw:void 0,in_bw:void 0,agree:!1,ipv6Num:0},safeGroupParams:{page:1,per_page:20,orderby:"direction",search:""},backup_num:0,backup_used:0,snap_num:0,snap_used:0,nat_acl_limit:0,operaForm:{description:"",direction:"in",protocol:"tcp",port:"",ip:"0.0.0.0/0",lock:0,start_ip:"",end_ip:"",start_port:"",end_port:"",priority:"",action:"accept"},safeGroupDetailsRules:{description:{required:!0,message:this.$t("common.enterDescription"),trigger:"blur"},port:[{required:!0,message:this.$t("common.enterPost"),trigger:"blur"},{validator:this.$validate.validatePortRang,trigger:"blur"}],protocol:{required:!0,message:this.$t("common.pleaseChoose"),trigger:"change"},ip:[{required:!0,message:this.$t("common.iptIp"),trigger:"blur"},{validator:this.$validate.validatePortIp,trigger:"blur"}],action:{required:!0,message:this.$t("common.select"),trigger:"blur"},start_port:[{required:!0,message:this.$t("common.startPortMust"),trigger:"blur"},{validator:function(t,a,o){"0"!==a&&a||o(),e.$validate.validatePortRang(t,a,o)},trigger:"blur",message:this.$t("common.portRange")+"0-65535"}],end_port:[{required:!0,message:this.$t("common.endPortMust"),trigger:"blur"},{validator:function(t,a,o){"0"!==a&&a||o(),e.$validate.validatePortRang(t,a,o)},trigger:"blur",message:this.$t("common.portRange")+"0-65535"}],start_ip:[{required:!0,message:this.$t("common.startIPMust"),trigger:"blur"},{validator:this.$validate.validateIp,trigger:"blur",message:this.$t("common.startIPErr")},{validator:function(t,a,o){"0.0.0.0"===a&&"0.0.0.0"!==e.operaForm.end_ip&&o(new Error(e.$t("common.startIPFillErr"))),o()},trigger:"blur"}],end_ip:[{required:!0,message:this.$t("common.endIPMust"),trigger:"blur"},{validator:this.$validate.validateIp,trigger:"blur",message:this.$t("common.endIPErr")},{validator:function(t,a,o){"0.0.0.0"===a&&"0.0.0.0"!==e.operaForm.start_ip&&o(new Error(e.$t("common.endIPFillErr"))),o()},trigger:"blur"}],priority:[{required:!0,message:this.$t("common.priorityMust"),trigger:"blur"},{pattern:/^([1-9][0-9]{0,2}|1000)$/,message:this.$t("common.Must1000"),trigger:"blur"}]},nat_web_limit:0,isShowArgee:!1,nat_host_ip:"",cloudsXml:"",migrate_type:"",showMigBtn:!0,assign_ipv6:!1,isShowAllow:!1,coldMigrate:!1,lastAssign_ip:!0,assign_ip:!1,cold_migrate_discard_snap:!1,hot_migrate_discard_snap:!1,userId:null,userInfo:this.$store.state.userInfo,isShowVncPort:!1,isShowPassword:!1,isShowPanelPassword:!1,isShowVNCPassword:!1,password:"",vncPassword:"",hiddenPassword:"",hiddenVncPassword:"",ip_name:"",ipForm:{id:""},isShowRestoreBackUp:!1,ipId:0,isShowFloatIpGroupTable:!1,groupList:[],addIpList:[],nowIpList:[],ipListId:0,ipListSelect:[],canStartCardOptions:[],ipSelect:[],nodeSelectOptions:[],nodeStoreList:[],storeList:[],isShowSelectWrapper:!1,floatIp:!1,dataType:"",numArr:Object(s["a"])(new Array(1001).keys()),rowInfo:{},isShowDelDialog:!1,diskSelectOptions:[],ipSelectOptions:[],ipElasticOptions:[],curIpSelectOptions:[],migrateIpOptions:[],ipList:[],backUpTitle:"",formLabelWidth:"30%",backForm:{diskId:null,store_id:-1,name:"",vncPort:"",vncPassWord:"",snap_num:null,backup_num:null,nat_acl_limit:0,nat_web_limit:0,ext_port:"",ext_port2:80,int_port:"",protocol:"",domain:""},canStartCardText:"",type:"",dialogPasswordVisible:!1,dialogPanelPasswordVisible:!1,dialogNodeVisible:!1,dialogCustomerVisible:!1,customer:[],isShowBackUp:!1,isShowFloatIpGroup:!1,activeName:"floatIp",value:!0,ApicStatus:1,AcpiStatus:1,AcpiCPU:0,VncStatus:1,TwoDStatus:1,threeDstatus:1,console:1,PaeStatus:1,mac:"",vlan:"",node_online:!0,isShowAlert:!1,isShowXMLDialog:!1,groupId:null,formData:{bootOrder:"",canStartCard:"",cpuModel:"",clock:""},floatIpRule:{ip:[{required:!0,message:this.$t("common.pleaseChoose"),trigger:"change"}],num:[{required:!0,message:this.$t("common.numberOfIP"),trigger:"blur"},{validator:function(t,a,o){e.isAgent||o(),e.cloudDetailInfo.resource_package.ip_num||o();var i=e.cloudDetailInfo.resource_package.ip_num-e.cloudDetailInfo.resource_package.ip_num_used;a>i&&o(new Error(e.$t("common.ipNumAllocated")+e.cloudDetailInfo.resource_package.ip_num+","+e.$t("common.used1")+e.cloudDetailInfo.resource_package.ip_num_used)),e.$validate.validateScope(t,a,o,0,9999999,e.$t("common.ipNumber"))}}],ipv6Num:{validator:function(t,a,o){return e.$validate.validateScope(t,a,o,0,1e3,e.$t("common.ipNumber"))}},in_bw:[{required:!0,message:this.$t("common.feedLimit"),trigger:"blur"},{validator:function(t,a,o){if(e.isAgent){e.cloudDetailInfo.resource_package.in_bw&&!parseInt(a)&&o(new Error(e.$t("common.inBandwidth")+e.$t("common.mustBig0")));var i=e.cloudDetailInfo.resource_package.in_bw-e.cloudDetailInfo.resource_package.in_bw_used,n=e.cloudDetailInfo.resource_package.in_bw_limit,r=e.$t("common.inBandwidthAllotTotal")+e.cloudDetailInfo.resource_package.in_bw+","+e.$t("common.used1");"addFloatIP"!==e.dataType?(i+=e.editInfo.in_bw,r+=e.cloudDetailInfo.resource_package.in_bw_used-e.editInfo.in_bw):r+=e.cloudDetailInfo.resource_package.in_bw_used,a>n&&n&&o(new Error(e.$t("common.perMachine")+n)),0===i&&e.cloudDetailInfo.resource_package.in_bw&&o(new Error(r)),a>i&&e.cloudDetailInfo.resource_package.in_bw&&o(new Error(r))}e.$validate.validateScope(t,a,o,0,9999999,e.$t("common.bandwidth"))}}],out_bw:[{required:!0,message:this.$t("common.bandwidthLimit"),trigger:"blur"},{validator:function(t,a,o){if(e.isAgent){e.cloudDetailInfo.resource_package.out_bw&&!parseInt(a)&&o(new Error(e.$t("common.outbandwidth")+e.$t("common.mustBig0")));var i=e.cloudDetailInfo.resource_package.out_bw-e.cloudDetailInfo.resource_package.out_bw_used,n=e.cloudDetailInfo.resource_package.out_bw_limit,r=e.$t("common.outBandwidthAllotTotal")+e.cloudDetailInfo.resource_package.out_bw+","+e.$t("common.used1");"addFloatIP"!==e.dataType?(i+=e.editInfo.out_bw,r+=e.cloudDetailInfo.resource_package.out_bw_used-e.editInfo.out_bw):r+=e.cloudDetailInfo.resource_package.out_bw_used,a>n&&n&&o(new Error(e.$t("common.perMachine")+n)),0===i&&e.cloudDetailInfo.resource_package.out_bw&&o(new Error(r)),a>i&&e.cloudDetailInfo.resource_package.out_bw&&o(new Error(r))}e.$validate.validateScope(t,a,o,0,9999999,e.$t("common.bandwidth"))}}],agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:n,trigger:"change"}]},rules:{xialaxuanze:[{required:!0,message:this.$t("common.dropDownSelect"),trigger:"change"}]},backupsRule:{diskId:[{required:!0,message:this.$t("common.Pleaseselectdisk"),trigger:"change"}],backup_num:[{required:!0,message:this.$t("common.enterQuantity"),trigger:"blur"},{validator:function(t,a,o){if(e.isAgent&&e.cloudDetailInfo.resource_package.backup_num){a||o(new Error(e.$t("common.backupNum")+e.$t("common.mustBig0")));var i=e.cloudDetailInfo.backup_num;-1===e.cloudDetailInfo.backup_num&&(i=0);var n=e.cloudDetailInfo.backup_num;-1===e.cloudDetailInfo.backup_num&&(n=0),a-i>e.cloudDetailInfo.resource_package.backup_num-e.cloudDetailInfo.resource_package.backup_num_used&&o(new Error(e.$t("common.usedBackNum")+e.cloudDetailInfo.resource_package.backup_num+","+e.$t("common.used1")+(e.cloudDetailInfo.resource_package.backup_num_used-n)))}e.$validate.validateScopes(t,a,o,-1,9999)},trigger:"blur"}],snap_num:[{required:!0,message:this.$t("common.enterQuantity"),trigger:"blur"},{validator:function(t,a,o){if(e.isAgent&&e.cloudDetailInfo.resource_package.snap_num){parseInt(a)||o(new Error(e.$t("common.snapNum")+e.$t("common.mustBig0")));var i=e.cloudDetailInfo.snap_num;-1===e.cloudDetailInfo.snap_num&&(i=0);var n=e.cloudDetailInfo.snap_num;-1===e.cloudDetailInfo.snap_num&&(n=0),a-i>e.cloudDetailInfo.resource_package.snap_num-e.cloudDetailInfo.resource_package.snap_num_used&&o(new Error(e.$t("common.usedsnapNum")+e.cloudDetailInfo.resource_package.snap_num+"，"+e.$t("common.used1")+(e.cloudDetailInfo.resource_package.snap_num_used-n)))}e.$validate.validateScopes(t,a,o,-1,9999)},trigger:"blur"}],nat_acl_limit:[{required:!0,message:this.$t("common.limitedNumber"),trigger:"blur"},{validator:function(t,a,o){if(e.isAgent&&e.cloudDetailInfo.resource_package.nat_acl_num){a||o(new Error(e.$t("common.natAclLimit")+e.$t("common.mustBig0")));var i=e.cloudDetailInfo.nat_acl_limit;-1===e.cloudDetailInfo.nat_acl_limit&&(i=0),a-i>e.cloudDetailInfo.resource_package.nat_acl_num-e.cloudDetailInfo.resource_package.nat_acl_num_used&&o(new Error(e.$t("common.usedNatNum")+e.cloudDetailInfo.resource_package.nat_acl_num+"，"+e.$t("common.used1")+e.cloudDetailInfo.resource_package.nat_acl_num_used))}e.$validate.validateScopes(t,a,o,-1,9999)},trigger:"blur"}],nat_web_limit:[{required:!0,message:this.$t("common.limitedNumber"),trigger:"blur"},{validator:function(t,a,o){if(e.isAgent&&e.cloudDetailInfo.resource_package.nat_web_num){a||o(new Error(e.$t("common.natWebLimit")+e.$t("common.mustBig0")));var i=e.cloudDetailInfo.nat_web_limit;-1===e.cloudDetailInfo.nat_web_limit&&(i=0),a-i>e.cloudDetailInfo.resource_package.nat_web_num-e.cloudDetailInfo.resource_package.nat_web_num_used&&o(new Error(e.$t("common.usedWebNum")+e.cloudDetailInfo.resource_package.nat_web_num+","+e.$t("common.used1")+e.cloudDetailInfo.resource_package.nat_web_num_used))}e.$validate.validateScopes(t,a,o,-1,9999)},trigger:"blur"}],name:[{required:!0,message:this.$t("common.namePlaceholder"),trigger:"blur"}],domain:[{required:!0,message:this.$t("common.domainPlaceholder"),trigger:"blur"}],ext_port:[{validator:a,trigger:"blur"}],ext_port2:[{required:!0,message:this.$t("common.post443"),trigger:"blur"},{validator:o,trigger:"blur"}],int_port:[{required:!0,message:this.$t("common.post65535"),trigger:"blur"},{validator:i,trigger:"blur"}],protocol:[{required:!0,message:this.$t("common.selectProtocol"),trigger:"change"}]},clockOptions:[{label:"Default",value:0},{label:"UTC",value:1},{label:"Localtime",value:2}],cpuModelOptions:[{label:this.$t("common.mirror"),value:0},{label:"host-passthrough",value:1},{label:"host-model",value:2},{label:"custom",value:3}],bootOrderOptions:[{label:"CDROM Only",value:"c"},{label:"Hard Disk Only",value:"d"},{label:"(1) Hard Disk  (2) CDROM",value:"dc"},{label:"(1) CDROM (2) Hard Disk",value:"cd"}],safeGroupVisible:!1,isShowVncPassDialog:!1,safeGroupDetailsTableData:[],startDiskData:"",ipData:[],IPV6Data:[],backupData:[],snapData:[],isAddFloatGourp:!1,safeGroup:null,isoGroup:null,safeGroupSelect:[],isoGroupSelect:[],buttonList:[{},{}],searchText:"",pageGroupIpInfo:{page:1,per_page:50,orderby:"",sort:"",search:"",cloud:""},backupPageInfo:{page:1,per_page:4,total:0,total_page:1},fastphotoInfo:{page:1,per_page:4,total:0,total_page:1},ipPageInfo:{page:1,per_page:3,total:0,total_page:1},IPV6PageInfo:{page:1,per_page:3,total:0,total_page:1},pageInfo:{page:1,per_page:50,total:0,total_page:1},pageTaskInfo:{page:1,per_page:50,total:0,total_page:1},natTranspondData:[],natTranspondPageInfo:{page:1,per_page:4,total:0,total_page:1},protocolsListData:[{value:this.$t("common.basicProtocol"),label:this.$t("common.basicProtocol"),children:[]},{value:this.$t("common.CommonProtocol"),label:this.$t("common.CommonProtocol"),children:[]}],natBuildData:[],natBuildPageInfo:{page:1,per_page:4,total:0,total_page:1},updatePasswordForm:{randomPassWord:"",panel_pass:"",agree:!1},updatePasswordFormRules:{randomPassWord:[{required:!0,message:this.$t("common.iptPwd"),trigger:"blur"},{validator:t,trigger:"blur"}],panel_pass:[{required:!0,message:this.$t("common.iptPwd"),trigger:"blur"}],agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:n,trigger:"change"}]},dialogForm:{tiltle:"",type:"",show:!1},dialogFormData:{uid:null,vpc:null,agree:!1,type:"snap",frequency:1,cycle:"hour",disk:[],cputopcheck:0,cputunecheck:0,cpunumacheck:0,cpusockets:null,cpucores:null,cputhreads:null,cputune:null,cpunumatop:null,hostname:null,adsl:""},networkQueuesForm:{queues:1,vram:256,gpu:1,vramArr:[16,32,64,128,256,512,1024,2048],agree:!1},networkQueuesFormRules:{agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:n,trigger:"change"}]},vpcNetwork:[],formRules:{uid:{required:!0,message:this.$t("common.selectCustome"),trigger:"change"},vpc:{required:!0,message:this.$t("common.selectNetwork"),trigger:"change"},disk:{required:!0,message:this.$t("common.Pleaseselectdisk"),trigger:"change"},hostname:{pattern:/^\S*([a-zA-Z])([a-zA-Z0-9-_.]){5,}$/,message:this.$t("cloud.pleaseEnterTheCorrectHostName")},agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:n,trigger:"change"}],type:{required:!0,message:this.$t("common.selectType"),trigger:"change"},frequency:{required:!0,message:this.$t("common.selectfrequency"),trigger:"change"},cpusockets:{required:!0,message:this.$t("common.input"),trigger:"blur"},cpucores:{required:!0,message:this.$t("common.input"),trigger:"blur"},cputhreads:{required:!0,message:this.$t("common.input"),trigger:"blur"},adsl:{required:!0,message:this.$t("common.select")+"ADSL"+this.$t("login.account"),trigger:"change"}},updatePasswordType:!0,migrateShow:!0,migrate:{taskid:"",target_node:{name:""},progress:0,migrate_size:0,total_size:0,eta_string:0,speed:0},timer:null,checkType:"normal",isTopAdd:!1,selectValue:[],defaultProps:{children:"ip",label:"ip_name",isLeaf:"leaf"},curCheck:[]}},methods:{changeIp:function(e){var t=this;if("object"===Object(r["a"])(e)){var a=this.curIpSelectOptions.reduce((function(t,a){return t.push.apply(t,Object(s["a"])(a.ip.reduce((function(t,a){return e.includes(a.ip_name)&&t.push(a.id),t}),[]))),t}),[]);this.$nextTick((function(){var o=[];t.curIpSelectOptions.forEach((function(e){var t=e.ip.reduce((function(e,t){return e.push(t.id),e}),[]);t.every((function(e){return a.includes(e)}))?a.push(e.id):t.some((function(e){return a.includes(e)}))&&o.push(e.id)})),t.$refs.tree.setCheckedKeys(a),o.forEach((function(e){var a=t.$refs.tree.getNode(e);a&&(a.indeterminate=!0)})),t.curCheck=t.curCheck.filter((function(t){return e.includes(t.ip_name)}))}))}else e&&this.$refs.tree.filter(e)},hideSelect:function(){this.$refs.tree.filter("")},clearIp:function(){this.curCheck=[],this.arrLable=[],this.selectValue=[],this.$refs.tree.setCheckedKeys([])},filterNode:function(e,t){return-1!==t.ip_name.indexOf(e)},loadNode:function(e,t){var a=this.curIpSelectOptions.reduce((function(e,t){return e.push({id:t.id,ip_name:t.ip_name}),e}),[]);if(0===e.level)return t(a);var o,i=null===(o=this.curIpSelectOptions.filter((function(t){return t.id===e.data.id}))[0])||void 0===o?void 0:o.ip;return t(i)},handlerCheckChange:function(e){var t=this.$refs.tree.getCheckedNodes().indexOf(e)>-1;if(e.leaf)t?this.curCheck.push(e):this.curCheck=this.curCheck.filter((function(t){return t.id!==e.id}));else if(t){var a;(a=this.curCheck).push.apply(a,Object(s["a"])(this.curIpSelectOptions.filter((function(t){return t.id===e.id}))[0].ip))}else{var o=this.curIpSelectOptions.filter((function(t){return t.id===e.id}))[0].ip.reduce((function(e,t){return e.push(t.id),e}),[]);this.curCheck=this.curCheck.filter((function(e){return!o.includes(e.id)}))}var i=[],n=[];this.curCheck.forEach((function(e){n.push(e.ip_name),i.push(e.id)})),this.floatIpForm.ip=Array.from(new Set(n)),this.selectValue=Array.from(new Set(i))},checkLast:function(e,t){return!t||t-e>0},goNodeDetail:function(e){this.$router.push({name:"NodeDetails",query:{id:e}})},saveCpuLimit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o={id:t.cloudDetailInfo.id,cpu_limit:t.cloudDetailInfo.cpu_limit},"status"===e?o.cpu_limit=0:("0"===t.cloudDetailInfo.cpu_limit||"100"===t.cloudDetailInfo.cpu_limit?t.AcpiCPU=0:t.AcpiCPU=1,0===t.AcpiCPU&&(o.cpu_limit=0)),t.$message.success(t.$t("common.updateSuccess")),a.next=5,u["a"].updateCpuLimitReq(o);case 5:t.$emit("refreshCloudInfo"),t.$emit("refreshCloudStatus");case 7:case"end":return a.stop()}}),a)})))()},safeGroupDialogClose:function(){this.$refs.safeGroupRules.clearCondition()},handleClickShowSafeGroup:function(){this.safeGroupParams.id=this.cloudDetailInfo.security,this.getsafeGroupDetailsTableData(),this.safeGroupVisible=!0},searchCallback:function(){if(this.searchText){switch(this.safeGroupParams.page=1,this.searchText){case this.$t("common.allowRemoteWin"):this.safeGroupParams.search="RDP";break;case this.$t("common.allowRemoteLin"):this.safeGroupParams.search="SSH";break;case this.$t("common.allowRemoteHttps"):this.safeGroupParams.search="HTTPS";break;case this.$t("common.allowRemoteHttp"):this.safeGroupParams.search="HTTP";break;case this.$t("common.allTraffic"):this.safeGroupParams.search="ALLOW ALL OUT";break;case this.$t("common.AllowPing"):this.safeGroupParams.search="ICMP";break;default:this.safeGroupParams.search=this.searchText;break}this.getsafeGroupDetailsTableData()}else this.searchText=this.safeGroupParams.search="",this.getsafeGroupDetailsTableData()},getsafeGroupDetailsTableData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=0,o=0,t.prev=2,t.next=5,e.$api.getSafeGroupRulesRes(e.safeGroupParams);case 5:i=t.sent,i.data.forEach((function(t){switch(t.description){case"RDP":t.description=e.$t("common.allowRemoteWin");break;case"SSH":t.description=e.$t("common.allowRemoteLin");break;case"HTTPS":t.description=e.$t("common.allowRemoteHttps");break;case"HTTP":t.description=e.$t("common.allowRemoteHttp");break;case"ALLOW ALL OUT":t.description=e.$t("common.allTraffic");break;case"ICMP":t.description=e.$t("common.AllowPing");break}"in"===t.direction?a++:o++})),e.safeGroupDetailsTableData=i.data.reverse(),e.safeGroupDetailsTableData.inNum=a,e.safeGroupDetailsTableData.outNum=o,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),e.$message.error(t.t0.data.error);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))()},downloadPDR:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].downloadPDR({id:e.cloudDetailInfo.id});case 2:a=t.sent,o=a,i=e.cloudDetailInfo.kvmid+".rdp",n=document.createElement("a"),n.download=i,n.style.display="none",n.href=URL.createObjectURL(o),document.body.appendChild(n),n.click();case 11:case"end":return t.stop()}}),t)})))()},changeStatus:Object(l["b"])((function(e,t){var a,o=this,i=1===t?this.$t("common.open"):this.$t("common.close"),n=1===t?1:0;switch(e){case"apic":a={apic:n};break;case"acpi":a={acpi:n};break;case"pae":a={pae:n};break;case"vnc":a={vnc:n};break;case"console":a={console:n};break;case"cpu":t||this.saveCpuLimit("status");break;case"dynamic_memory":a={dynamic_memory:n};break;case"skipColdBackup":a={skip_cold_backup:n};break;default:break}a&&this.$api.upCloud1(this.id,a).then((function(e){o.$message.success("".concat(i).concat(o.$t("common.success"))),o.$emit("refreshCloudInfo")})).catch((function(e){o.$message.error(e.data.error)}))})),taskStatusFormatter:function(e){var t=parseInt(e.status);switch(t){case 0:return this.$t("common.notStart");case 1:return this.$t("common.executing");case 2:return this.$t("common.true");case 3:return this.$t("common.execFailure");case 4:return this.$t("common.forcedEnd");default:return""}},taskRetryFormatter:function(e){var t=e.retry;switch(Boolean(t)){case!0:return this.$t("common.yes");case!1:return this.$t("common.no");default:return""}},currentTaskChange:function(){this.getTaskInfo()},currentChange:function(e){"IPV6"===e?this.getIPV6Data():this.getLimitRateIp()},backupCurrentChange:function(){this.getBackUpAndfastphotoInfo("backup")},fastphotoCurrentChange:function(){this.getBackUpAndfastphotoInfo("fastphoto")},handleClickisoGroup:function(e){var t,a=this;this.isoGroupSelect.forEach((function(a){a.id===e&&(t=a.name)})),this.$swal.fire({title:this.$t("common.determineBinding")+t+"?",icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(o){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o.value&&(i={iso:parseInt(e)},a.$api.mountIso(a.id,i).then((function(e){a.$notify({title:a.$t("common.success"),message:a.$t("common.bindIsoSuccess"),type:"success",offset:80}),a.$emit("refreshCloudInfo")})).catch((function(e){a.$notify({title:a.$t("common.bindingFailed"),message:e.data.error,type:"error",offset:80})})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getProtocolsListData:function(){var e=this;this.$api.protocolsList().then((function(t){t.forEach((function(t){"lightHost"===e.type&&"gre"===t.value||(t.label=t.name,"all"===t.value||"all_tcp"===t.value||"all_udp"===t.value||"tcp"===t.value||"udp"===t.value||"icmp"===t.value||"gre"===t.value?e.protocolsListData[0].children.push(t):e.protocolsListData[1].children.push(t))}))}))},unbind:function(){var e=this;this.$swal.fire({title:this.$t("common.determineSolution")+"?",icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.isConfirmed){t.next=11;break}return o={hostid:[e.id]},t.prev=2,t.next=5,p["a"].unbindSshReq(e.cloudDetailInfo.ssh_key.id,o);case 5:e.$message.success(e.$t("common.unbind")+e.$t("common.success")),e.$emit("refreshCloudInfo"),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](2);case 11:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}())},getNodeByArea:function(){var e=this,t={enable:1,list_type:"all"};this.cloudDetailInfo.cross_area_migrate||(t.area=this.cloudDetailInfo.area_id),this.$api.nodeList(t).then((function(t){t&&(e.nodeSelectOptions=t.data.filter((function(t){return t.id!==e.cloudDetailInfo.node_id})),e.NoHrpervNodeSelectOptions=t.data.filter((function(t){return"hyperv"!==t.type&&t.id!==e.cloudDetailInfo.node_id})))})).catch((function(){}))},isShowDeleteIcon:function(e,t){var a="";return a=void 0!==t?e.ip||e.ipv6:e,a!==this.cloudDetailInfo.mainip||"normal"!==this.cloudDetailInfo.network_type},changeMig:function(e){"quick"===e&&this.dialogInfo.quick_migrate?this.dialogInfo.force_hot_migrate=0:"force"===e&&this.dialogInfo.force_hot_migrate&&(this.dialogInfo.quick_migrate=0),this.changeAllowShow()},jump:function(){this.$router.push({path:"system-upgrade"}),sessionStorage.setItem("upgradeNeedId",958)},updateNodeSure:function(){var e,t=this;"moveNode"===this.dialogInfo.type?this.$refs.dialogInfo.validate((function(a){a&&(e={id:t.id,node:t.dialogInfo.node,store:t.dialogInfo.store,ip:t.dialogInfo.ip,hot_migrate:t.dialogInfo.hot_migrate,quick_migrate:t.dialogInfo.quick_migrate,force_hot_migrate:t.dialogInfo.force_hot_migrate,allow_hang:t.dialogInfo.allow_hang},t.isShowAllow&&(e.allow_discard_snap=t.dialogInfo.allow_discard_snap),t.dialogInfo.ipGroup||t.dialogInfo.advanced||t.assign_ip||(delete e.ipGroup,delete e.ip),"hot_migrate"===t.migrate_type?(delete e.quick_migrate,delete e.force_hot_migrate):(delete e.hot_migrate,delete e.allow_hang),t.showMigBtn||(delete e.hot_migrate,delete e.allow_hang,delete e.quick_migrate,delete e.force_hot_migrate),t.moveNode(e))})):this.$refs.dialogInfo.validate((function(a){a&&(e={id:t.id,disk:[]},"off"!==t.status&&(e.hot_migrate=t.dialogInfo.hot_migrate),t.isShowArgee&&(e.allow_discard_snap=t.dialogInfo.allow_discard_snap),t.dialogInfo.agree&&!e.hot_migrate&&(e.force=!0),t.tableData.forEach((function(t){t.checkStore&&e.disk.push({id:t.id,store:t.checkStore})})),t.moveDisk(e))}))},moveDisk:function(e){var t=this;this.$refs.dialogInfo.validate(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o){a.next=12;break}return a.prev=1,a.next=4,u["a"].changDiskStoreReq(e);case 4:t.$message.success(t.$t("common.initiatedSuccessfully")),t.$emit("migrationNode","migration"),t.$emit("refreshCloudInfo"),t.dialogNodeVisible=!1,a.next=12;break;case 10:a.prev=10,a.t0=a["catch"](1);case 12:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}())},moveNode:function(e){var t=this;this.$api.mainframeMigrate(e).then((function(e){t.$message.success(t.$t("common.initiatedSuccessfully")),t.$emit("migrationNode","migration"),t.$emit("refreshCloudInfo"),t.dialogNodeVisible=!1})).catch((function(e){t.$message.error(e.data.error)}))},changeExpand:function(e){this.protocolSuite=e[0]},changeCascader:function(){var e=this;switch(this.$refs.operaForm.clearValidate("port"),this.$refs.operaForm.clearValidate("start_port"),this.$refs.operaForm.clearValidate("end_port"),this.isDisabled=!0,this.isPortDisabled=!0,this.protocolSuite===this.$t("common.basicProtocol")?("host"===this.cloudDetailInfo.type&&(this.operaForm.port="1-65535"),"tcp"!==this.operaForm.protocol&&"udp"!==this.operaForm.protocol||(this.isDisabled=!1,this.isPortDisabled=!1)):this.protocolsListData[1].children.forEach((function(t){e.operaForm.protocol===t.value&&(e.operaForm.start_port=t.port,e.operaForm.end_port=t.port,e.operaForm.port=t.port)})),this.operaForm.protocol){case"rdp":this.operaForm.description=this.$t("common.allowRemoteWin");break;case"ssh":this.operaForm.description=this.$t("common.allowRemoteLin");break;case"https":this.operaForm.description=this.$t("common.allowRemoteHttps");break;case"http":this.operaForm.description=this.$t("common.allowRemoteHttp");break;case"all":this.operaForm.description=this.$t("common.allTraffic");break;case"icmp":this.operaForm.description=this.$t("common.AllowPing");break;default:this.operaForm.description="";break}},submitRestoreBackUp:function(){var e=this;"backup"===this.activeName?this.$swal.fire({title:this.$t("common.deleteAllSnapshots"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.value&&e.restoreSnap();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):this.restoreSnap()},restoreSnap:function(){var e=this;this.isShowRestoreBackUp=!1;var t={id:this.rowInfo.id};this.$swal.fire("","".concat(this.$t("common.restore33")).concat(this.dataType),"success"),this.$api.restoreCloudBackUp(t).then((function(t){var a={id:t.taskid,callback:function(){this.$emit("refreshCloudInfo")},extra:!0};e.$tool.executeTask(e,a)})).catch((function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})}))},showVncPassword:function(){this.isShowVNCPassword=!this.isShowVNCPassword},showPassword:function(e){this[e]=!this[e]},restoreBackUp:function(e){this.rowInfo=e,this.isShowRestoreBackUp=!0,"snap"===this.rowInfo.type&&(this.dataType=this.$t("common.snapshoot"))},getIpInfo:function(e){var t=this;this.$api.ip({ip_segment_id:e}).then((function(e){t.ipSelect=e.data,t.ipSelect.length?t.ipId=t.ipSelect[0].id:t.ipId=""})).catch((function(e){t.$message.error(e.data.error)}))},submitAddFloatIp:function(){var e=this,t={id:this.id,ip:this.ipId};this.$api.addFloatIP(t).then((function(t){e.$message.success(e.$t("common.addSuccess")),e.getFloatIPInfo(),e.isShowBackUp=!1}),(function(t){e.$message.error(t.data.error)})).catch((function(t){e.$message.error(t.data.error)}))},isSuspend:function(){return"suspend"===this.status&&(this.$message({message:this.$t("common.msg16"),type:"error"}),!0)},handleClickNode:function(){this.dialogNodeVisible=!0},changedialogType:function(e){this.dialogInfo.type=e},changeHotMig:function(){var e=this;this.isShowArgee=!1,this.tableData.forEach((function(t){var a=e.storeList.find((function(e){return e.id===t.checkStore}));a&&("local"===a.type&&"local"===t.store_type?e.dialogInfo.hot_migrate&&1===t.status&&t.snap_num&&(e.isShowArgee=!0):(e.dialogInfo.hot_migrate,t.snap_num&&(e.isShowArgee=!0)))}))},checkStore:function(){this.dialogInfo.allow_discard_snap=0},changeMigNode:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.NoHrpervNodeSelectOptions.find((function(t){return t.id===e.dialogInfo.node})),"adsl"===a.type?e.dialogInfo.showAdsl=!0:e.dialogInfo.showAdsl=!1,e.dialogInfo.ip=[],e.dialogInfo.ipGroup=0,e.dialogInfo.store="",t.next=7,e.getMigrateInfo(!0);case 7:e.getStore(!0,e.dialogInfo.node),e.getIpByCloud(e.dialogInfo.node);case 9:case"end":return t.stop()}}),t)})))()},changeGroup:function(){var e=this;if(0!==this.dialogInfo.ipGroup){var t=this.migrateIpOptions.find((function(t){return t.id===e.dialogInfo.ipGroup}));t&&t.ip?this.ipList=t.ip:this.ipList=[]}else this.ipList=[];this.getMigrateInfo()},getMigrateInfo:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=e.length>0&&void 0!==e[0]&&e[0],t.isShowAlert=!1,i={hostid:t.cloudDetailInfo.id,node:t.dialogInfo.node},t.dialogInfo.node){a.next=5;break}return a.abrupt("return");case 5:return(t.dialogInfo.advanced||t.assign_ip)&&(0!==t.dialogInfo.ipGroup?i.ip=1:i.ip=0),t.dialogInfo.advanced&&(i.store=t.dialogInfo.store),a.next=9,m["a"].getMigrateInfoReq(i);case 9:n=a.sent,t.isShowAlert=!0,t.showMigBtn=!0,t.assign_ipv6=n.assign_ipv6,n.hot_migrate||n.quick_migrate||n.force_hot_migrate||n.allow_hang||(t.showMigBtn=!1),n.hot_migrate?t.migrate_type="hot_migrate":t.migrate_type="cold_migrate",t.assign_ip=n.assign_ip,t.cold_migrate_discard_snap=n.cold_migrate_discard_snap,t.hot_migrate_discard_snap=n.hot_migrate_discard_snap,t.mac=n.mac,t.vlan=n.vlan,t.node_online=n.node_online,t.node_online||(t.dialogInfo.hot_migrate=0,t.dialogInfo.quick_migrate=0),o&&(t.lastAssign_ip=n.assign_ip),t.changeAllowShow();case 24:case"end":return a.stop()}}),a)})))()},changeAllowShow:function(){this.isShowAllow=!1,this.coldMigrate=!1,this.showMigBtn?"hot_migrate"===this.migrate_type?this.dialogInfo.hot_migrate||(this.coldMigrate=!0):this.dialogInfo.quick_migrate||this.dialogInfo.force_hot_migrate||(this.coldMigrate=!0):this.coldMigrate=!0,this.cloudDetailInfo.snap_used&&(this.isShowAllow=!0,this.showMigBtn||this.cold_migrate_discard_snap?"hot_migrate"===this.migrate_type?this.dialogInfo.hot_migrate||this.cold_migrate_discard_snap?this.dialogInfo.hot_migrate&&!this.hot_migrate_discard_snap&&(this.isShowAllow=!1):this.isShowAllow=!1:(this.dialogInfo.quick_migrate||this.dialogInfo.force_hot_migrate||this.cold_migrate_discard_snap)&&(!this.dialogInfo.quick_migrate&&!this.dialogInfo.force_hot_migrate||this.hot_migrate_discard_snap)||(this.isShowAllow=!1):this.isShowAllow=!1)},getHiddenPassword:function(){this.hiddenPassword="";for(var e=0;e<this.password.length;e++)this.hiddenPassword+="*"},getHiddenVncPassword:function(){this.hiddenVncPassword="";for(var e=0;e<this.vncPassword.length;e++)this.hiddenVncPassword+="*"},handleClickSure:function(){var e=this;this.isShowSelectWrapper=!1;var t={id:this.ipId,name:this.ip_name},a=this.nowIpList.filter((function(a){if(a.id===t.id)return e.$message.error(e.$t("common.msg115")),!0}));0===a.length&&this.nowIpList.push(t)},addFloatIp:function(){this.isShowSelectWrapper=!0},submitDeleteRow:function(){var e=this,t=this.rowInfo,a={id:t.id,hostid:this.id};if(this.safeGroupVisible)this.$api.deleteSafeGroupRulesRes(a).then((function(t){e.$message.success(e.$t("common.deletedSuccessfully")),e.getsafeGroupDetailsTableData()}),(function(t){e.$message.error(t.data.error)}));else switch(this.activeName){case"natTranspond":this.$api.deleteCloudNatTranspond(a).then((function(t){e.getCloudNatTranspond()}),(function(t){e.$message.error(t.data.error)}));break;case"natBuild":this.$api.deleteCloudNatBuild(a).then((function(t){e.getCloudNatBuild()}),(function(t){e.$message.error(t.data.error)}));break;default:this.$api.deleteCloudbackUp(t).then((function(t){var a={id:t.taskid,str:e.$t("common.delete"),callback:function(){this.$emit("refreshCloudInfo")},extra:!0};e.$message.success(e.$t("common.deleting")),e.$tool.executeTask(e,a)}),(function(t){e.$message.error(t.data.error)})).catch((function(t){e.$message.error(t.data.error)}));break}},refreshCloudInfo:function(){this.$emit("refreshCloudInfo")},openNetworkQueuesDialog:function(e){if(this.networkQueuesForm.type=e,"queues"===e){if(0===this.$store.state.config.edition)return void this.$message(this.$t("common.msg8"));if(2===this.$store.state.config.edition)return void this.$message(this.$t("common.msg228"));this.networkQueuesForm.queues=this.cloudDetailInfo.queues}else"vram"===e?(this.networkQueuesForm.vram=this.cloudDetailInfo.vram,this.networkQueuesForm.gpu=this.cloudDetailInfo.gpu):this.cloudDetailInfo.gpu=this.cloudDetailInfo.gpu?0:1;this.isNetworkQueueShow=!0},deleteRow:function(e){this.isShowDelDialog=!this.isShowDelDialog,this.dataType="",this.rowInfo=e},isNull:function(e){return""===e||void 0===e||null===e?'<span style="color:#5989f6">'.concat(this.$t("common.notHave"),"</span>"):e},changeTitle:function(){this.isShowAlone=!0},addtabsInfo:function(e){switch(this.activeName){case"backup":this.isShowEditBackUpType="add",this.backUpTitle=this.$t("common.addBackupInformation"),this.isShowBackUp=!0,this.type="backup";break;case"snap":this.isShowEditBackUpType="add",this.backUpTitle=this.$t("common.addSnapshot"),this.isShowBackUp=!0,this.type="snap";break;case"natTranspond":this.isShowNat=!0,this.backUpTitle=this.$t("common.addNatForwarding");break;case"ip":this.backUpTitle=this.$t("common.createIpBw"),this.dataType="addIP",this.isShowFloatIpGroup=!0,this.isAddFloatGourp=!1,this.$refs.tree&&this.$refs.tree.setCheckedNodes([]);break;case"IPV6":if(0===this.$store.state.config.edition)return void this.$message(this.$t("common.msg8"));if(2===this.$store.state.config.edition)return void this.$message(this.$t("common.msg228"));this.backUpTitle=this.$t("common.add")+"IPV6",this.dataType="addIPV6",this.isShowFloatIpGroup=!0,this.$refs.tree&&this.$refs.tree.setCheckedNodes([]),this.isAddFloatGourp=!1;break;case"floatIp":"number"===typeof e?(this.isAddFloatGourp=!1,this.groupId=e):(this.isAddFloatGourp=!0,this.groupId=null),this.ipRadio=0,this.checkType="normal",this.isShowFloatIpGroup=!0,this.curIpSelectOptions=this.ipSelectOptions,this.backUpTitle=this.$t("common.addIp"),this.$refs.tree&&this.$refs.tree.setCheckedNodes([]),this.dataType="addFloatIP";break;case"natBuild":this.isShowNat=!0,this.backUpTitle=this.$t("common.addAConstructionSite");break;case"hardware":if(0===this.$store.state.config.edition)return void this.$message(this.$t("common.msg8"));if(2===this.$store.state.config.edition)return void this.$message(this.$t("common.msg228"));this.$refs.ComputerInfoPci.handleClickDialogShow(this.$t("common.addHardware"),"addHardware");break;case"timeTask":this.handleClickDialogShow(this.$t("common.addTimedTasks"),"timeTask");break;default:break}},editTabsInfo:function(){this.isShowBackUp=!0,"backup"===this.activeName?(this.isShowEditBackUpType="backup",this.backUpTitle=this.$t("common.modifyTheNumberOfBackups"),this.backForm.backup_num=this.cloudDetailInfo.backup_num):"snap"===this.activeName?(this.isShowEditBackUpType="snap",this.backUpTitle=this.$t("common.modifyTheNumberOfSnapshots"),this.backForm.snap_num=this.cloudDetailInfo.snap_num,this.backForm.snap_num=this.cloudDetailInfo.snap_num):"natTranspond"===this.activeName?(this.isShowEditBackUpType="natTranspond",this.backUpTitle=this.$t("common.modifyNatForwardingQuantity"),this.backForm.nat_acl_limit=this.cloudDetailInfo.nat_acl_limit):"natBuild"===this.activeName&&(this.isShowEditBackUpType="natBuild",this.backUpTitle=this.$t("common.modifyConstructionSites"),this.backForm.nat_web_limit=this.cloudDetailInfo.nat_web_limit)},editFloatBws:function(e){this.backUpTitle=this.$t("common.modifyIpWide"),this.dataType="updateFloatIP",this.editInfo=e,this.floatIpForm.in_bw=e.in_bw,this.floatIpForm.out_bw=e.out_bw,this.floatIpForm.id=e.id,this.isShowFloatIpGroup=!0,this.isAddFloatGourp=!0},getFloatIPInfo:function(){var e=this;this.pageGroupIpInfo.cloud=this.id,this.$api.getRateLimitGroup(this.pageGroupIpInfo).then((function(t){e.groupList=t.data}),(function(t){t.data&&e.$message.error(t.data.error)})).catch((function(t){t.data&&e.$message.error(t.data.error)})),this.isShowBackUp=!1},submitAddBackUp:function(){var e=this;this.$refs.backFormRef.validate((function(t){if(t){if(e.backUpTitle===e.$t("common.addSnapshot")&&-1===e.cloudDetailInfo.snap_num||e.backUpTitle===e.$t("common.addBackupInformation")&&-1===e.cloudDetailInfo.backup_num){var a=e.backUpTitle===e.$t("common.addSnapshot")?e.$t("common.snapshoot"):e.$t("common.backups");return e.$message.error(e.$t("common.notAllowedToCreate")+a),void(e.isShowBackUp=!1)}if("add"===e.isShowEditBackUpType){var o={id:e.backForm.diskId,type:e.type,name:e.backForm.name};-1!==e.backForm.store_id&&"backup"===e.isShowEditBackUpType&&(o.store_id=e.backForm.store_id),e.$api.addCloudbackUp(o).then((function(t){e.$message.success(e.$t("common.beingAdded"));var a={id:t.taskid,str:e.$t("common.add"),showMessage:!0,time:3e4};e.$tool.executeTask(e,a),e.$emit("refreshCloudInfo")})).catch((function(t){e.$message.error(t.data.error)}))}else{var i={};"snap"===e.isShowEditBackUpType?i.snap_num=e.backForm.snap_num:"backup"===e.isShowEditBackUpType?i.backup_num=e.backForm.backup_num:"natTranspond"===e.isShowEditBackUpType?i.nat_acl_limit=e.backForm.nat_acl_limit:"natBuild"===e.isShowEditBackUpType&&(i.nat_web_limit=e.backForm.nat_web_limit),e.$swal.fire("",e.$t("common.underRevision"),"success"),e.$api.upCloud1(e.id,i).then((function(t){e.$notify({title:e.$t("common.success"),message:e.$t("common.changeSuccess"),type:"success",offset:80}),e.$emit("refreshCloudInfo")})).catch((function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})}))}e.isShowBackUp=!1}}))},submitAddNat:function(){var e=this;this.$refs.backFormRef.validate((function(t){-1===e.cloudDetailInfo.nat_acl_limit&&e.$message.error(e.$t("common.msg116")),t&&("natTranspond"===e.activeName?e.$api.addCloudNatTranspond(Object(c["a"])({id:e.id},e.backForm)).then((function(t){e.$message.success(e.$t("common.addSuccess")),e.$emit("refreshCloudInfo"),e.getCloudNatTranspond(),e.isShowNat=!1})).catch((function(t){e.isShowNat=!1,e.$message.error(t.data.error)})):"natBuild"===e.activeName&&e.$api.addCloudNatBuild(Object(c["a"])(Object(c["a"])({id:e.id},e.backForm),{},{ext_port:e.backForm.ext_port2})).then((function(t){e.$message.success(e.$t("common.addSuccess")),e.$emit("refreshCloudInfo"),e.isShowNat=!1,e.getCloudNatBuild()})).catch((function(t){e.isShowNat=!1,e.$message.error(t.data.error)})))}))},deleteIp:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;if(t)if("ipv6"===a){if(!this.$refs.ipv6Table.selection.length)return this.$message.warning(this.$t("common.pleaseSelect"));this.rowInfo.ips=this.$refs.ipv6Table.selection,this.dataType="deleteBatchesIPV6",this.backUpTitle=this.$t("common.delete")+"IPV6"}else{if(!this.$refs.ipTable.selection.length)return this.$message.warning(this.$t("common.pleaseSelect"));this.rowInfo.ips=this.$refs.ipTable.selection,this.dataType="deleteBatchesIP",this.backUpTitle=this.$t("common.deleteIp")}else"ipv6"===a?(this.rowInfo=e,this.dataType="deleteIPv6",this.backUpTitle=this.$t("common.delete")+"IPV6"):(this.rowInfo=e,this.dataType="deleteIP",this.backUpTitle=this.$t("common.deleteIp"));this.isShowFloatIpGroup=!0},deleteFloatIP:function(e,t){var a=this,o="",i={id:this.id};"batches"===t?(o=this.$t("common.msg165"),i.ip=e):(i.ip=[e.id],o=this.$t("common.determineDeleteIp")+o+"?"),this.$swal.fire({title:o,icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.value&&a.$api.deleteCloudIp(i).then((function(e){a.$emit("refreshCloudInfo"),setTimeout((function(){a.$notify({title:a.$t("common.success"),message:a.$t("common.deletedIpSuccessfully"),type:"success",offset:80})}),3e3),a.$refs.floatIpData.dialogVisible=!1})).catch((function(e){a.$notify({title:a.$t("common.fail"),message:e.data.error,type:"error",offset:80})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},cancelConnectIso:function(e){var t=this;this.$swal.fire({title:this.$t("common.determineUninstallation")+e.name+"?",icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o.value&&(i={iso:parseInt(e.id)},t.$api.unInstallIso(t.id,i).then((function(e){t.$notify({title:t.$t("common.success"),message:t.$t("common.uninstallIsoSuccess"),type:"success",offset:80}),t.$emit("refreshCloudInfo")})).catch((function(e){t.$notify({title:t.$t("common.fail"),message:e.data.error,type:"error",offset:80})})));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},cancelConnectSafe:function(){var e=this;this.$swal.fire({title:this.$t("common.determineSolution")+this.cloudDetailInfo.security_name+this.$t("common.securityGroup")+"?",icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.value&&e.$api.cancelConnectSafeGroupRes(e.id).then((function(t){e.$notify({title:e.$t("common.success"),message:e.$t("common.solvingSecurityGroup"),type:"success",offset:80}),e.$emit("refreshCloudInfo")})).catch((function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},clickEditVncPort:function(){this.backForm.vncPort=this.cloudDetailInfo.vncport,this.isShowVncPort=!0},resetForm:function(){this.protocolsListData=[{value:this.$t("common.basicProtocol"),label:this.$t("common.basicProtocol"),children:[]},{value:this.$t("common.CommonProtocol"),label:this.$t("common.CommonProtocol"),children:[]}],this.isDisabled=!1,this.$refs.operaForm.resetFields()},handleClickStartCard:function(e){var t=this;this.canStartCardOptions.forEach((function(a){a.id===e&&(t.canStartCardText=a.name)})),this.$swal.fire({title:this.$t("common.IdentifyingChoice")+this.canStartCardText+this.$t("common.asAStartupDisk"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o.value&&(t.$swal.fire("",t.$t("common.setTheBootDisk"),"success"),t.$api.setStartDisk(parseInt(e)).then((function(a){t.$notify({title:t.$t("common.success"),message:t.$t("common.StartupDiskSuccess"),type:"success",offset:80}),t.formData.canStartCard=e,t.$emit("refreshCloudInfo")})).catch((function(e){t.$notify({title:t.$t("common.fail"),message:e.data.error,type:"error",offset:80})})));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},onCopy:Object(l["b"])((function(e){this.$message({message:this.$t("common.copyPasswordSuccess"),type:"success"})})),onError:Object(l["b"])((function(){this.$message({message:this.$t("common.copyPasswordFailed"),type:"error"})})),handleClickClock:function(e){var t,a=this;this.clockOptions.forEach((function(a){a.value===e&&(t=a.label)})),this.$swal.fire({title:this.$t("common.msg117")+t+this.$t("common.why")+"?",icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(o){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o.value&&(i={clock:e},a.$swal.fire("",a.$t("common.underRevision"),"success"),a.$api.upCloud1(a.id,i).then((function(t){a.$notify({title:a.$t("common.success"),message:a.$t("common.msg118"),type:"success",offset:80}),a.formData.clock=e,a.$emit("refreshCloudInfo")})).catch((function(e){a.$notify({title:a.$t("common.fail"),message:e.data.error,type:"error",offset:80})})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},resetFloatGroupForm:function(){var e=this;this.isShowAlone=!1,this.isAddFloatGourp=!1,this.floatIpForm={id:void 0,ip:void 0,num:void 0,out_bw:void 0,in_bw:void 0,agree:!1,ipv6Num:0},setTimeout((function(){e.$refs.floatIpForm.clearValidate()}),0),this.floatIpForm.ip=[],this.selectValue=[],this.curCheck=[],this.$refs.tree&&this.$refs.tree.setCheckedKeys([]),this.$refs.tree&&this.$refs.tree.filter("")},addResetFloatGroupForm:function(){var e=this;setTimeout((function(){e.$refs.floatIpForm.clearValidate()}),0)},changeAddBtn:function(){this.dialogFromShow=!0,this.getProtocolsListData(),this.isDisabled=!1,this.isPortDisabled=!1},handleClickcpuModel:function(e){var t,a=this;this.cpuModelOptions.forEach((function(a){a.value===e&&(t=a.label)})),this.$swal.fire({title:this.$t("common.please17")+t+this.$t("common.why")+"?",icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(o){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o.value&&(i={cpumodel:e},a.$swal.fire("",a.$t("common.underRevision"),"success"),a.$api.upCloud1(a.id,i).then((function(t){a.$notify({title:a.$t("common.success"),message:a.$t("common.msg119"),type:"success",offset:80}),a.formData.cpuModel=e,a.$emit("refreshCloudInfo")})).catch((function(e){a.$notify({title:a.$t("common.fail"),message:e.data.error,type:"error",offset:80})})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleClickBootBorder:function(e){var t,a=this;this.bootOrderOptions.forEach((function(a){a.value===e&&(t=a.label)})),this.$swal.fire({title:this.$t("common.IdentifyingChoice")+t,icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(o){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o.value&&(i={bootorder:e},a.$swal.fire("",a.$t("common.changing"),"success"),a.$api.upCloud1(a.id,i).then((function(t){a.$notify({title:a.$t("common.success"),message:a.$t("common.msg120"),type:"success",offset:80}),a.formData.bootOrder=e,a.$emit("refreshCloudInfo")})).catch((function(e){a.$notify({title:a.$t("common.fail"),message:e.data.error,type:"error",offset:80})})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},submitAddFloatGroup:Object(l["b"])((function(){var e=this;this.$refs.floatIpForm.validate((function(t){if(t){var a={};if("updateFloatIP"===e.dataType)a={id:e.floatIpForm.id,in_bw:parseInt(e.floatIpForm.in_bw),out_bw:parseInt(e.floatIpForm.out_bw)},e.$api.editRateLimitGroup(a).then((function(t){e.isShowFloatIpGroup=!1,e.getIpByCloud(),e.$message.success(e.$t("common.updateSuccess")),e.getFloatIPInfo()}),(function(t){t.data&&e.$message.error(t.data.error)})).catch((function(t){t.data&&e.$message.error(t.data.error)}));else if("deleteIP"===e.dataType||"deleteIPv6"===e.dataType||"deleteBatchesIP"===e.dataType||"deleteBatchesIPV6"===e.dataType){var o={id:e.id};if("deleteBatchesIP"===e.dataType)o.ip=e.rowInfo.ips.map((function(e){return e.id}));else if("deleteIP"===e.dataType)o.ip=[e.rowInfo.id];else{if("deleteIPv6"===e.dataType)return o.ipv6=[e.rowInfo.id],void e.deleteIPV6(o);if("deleteBatchesIPV6"===e.dataType)return o.ipv6=e.rowInfo.ips.map((function(e){return e.id})),void e.deleteIPV6(o)}e.$api.deleteCloudIp(o).then((function(t){e.$notify({title:e.$t("common.success"),message:e.$t("common.deletedIpSuccessfully"),type:"success",offset:80}),setTimeout((function(){e.getLimitRateIp()}),1e3),e.isShowFloatIpGroup=!1})).catch((function(t){e.isShowFloatIpGroup=!1,e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})}))}else"addIPV6"===e.dataType?(a={id:e.id,num:e.floatIpForm.ipv6Num},u["a"].addCloudIPV6Req(a).then((function(t){e.isShowFloatIpGroup=!1,e.$message({message:e.$t("common.addSuccess"),type:"success"}),e.getIPV6Data(),e.$emit("refreshCloudInfo")})).catch((function(t){t.data&&e.$message.error(t.data.error)}))):(a={id:e.id,ip:e.floatIpForm.ip,num:e.floatIpForm.num,in_bw:parseInt(e.floatIpForm.in_bw),out_bw:parseInt(e.floatIpForm.out_bw),bw_group:e.groupId?parseInt(e.groupId):null},a.ip_type=e.checkType,"addIP"===e.dataType&&(a.bw_group=e.cloudDetailInfo.default_bw_group.id),e.$refs.tree&&(a.ip=e.$refs.tree.getCheckedKeys(!0)),e.floatIpForm.num?e.$api.addIPNum(a).then((function(t){e.isShowFloatIpGroup=!1,"addIP"===e.dataType&&e.$emit("refreshCloudInfo"),e.$message({message:e.$t("common.addSuccess"),type:"success"}),"addIP"===e.dataType?e.getLimitRateIp():e.getFloatIPInfo()}),(function(t){t.data&&e.$message.error(t.data.error)})).catch((function(t){t.data&&e.$message.error(t.data.error)})):e.$api.addFloatIP(a).then((function(t){e.isShowFloatIpGroup=!1,"addIP"===e.dataType&&e.$emit("refreshCloudInfo"),e.$message({message:e.$t("common.addSuccess"),type:"success"}),"addIP"===e.dataType?e.getLimitRateIp():e.getFloatIPInfo(),e.getIpByCloud(),e.getelasticIpByCloud()}),(function(t){t.data&&e.$message.error(t.data.error)})).catch((function(t){t.data&&e.$message.error(t.data.error)})),e.$emit("refreshCloudInfo"))}}))}),2e3),deleteIPV6:function(e){var t=this;u["a"].delCloudIPV6Req(e).then((function(e){t.$notify({title:t.$t("common.success"),message:t.$t("common.deletedIpSuccessfully"),type:"success",offset:80}),setTimeout((function(){t.getIPV6Data()}),1e3),t.isShowFloatIpGroup=!1,t.$emit("refreshCloudInfo")})).catch((function(e){t.isShowFloatIpGroup=!1,t.$notify({title:t.$t("common.fail"),message:e.data.error,type:"error",offset:80})}))},clickEditVncPass:function(){this.isShowVncPassDialog=!0,this.randomVncPass()},randomVncPass:function(){this.backForm.vncPassWord=this.$tool.randomPass(8,1,1,0,1)},createSafeGroup:function(){var e=this;this.$swal.fire({title:this.$t("common.msg121"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var o,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a.isConfirmed?(o=e.genEnCode(8,1,1,0,1),i="firewall".concat(o),n={uid:e.cloudDetailInfo.user_id,name:i,hostid:e.cloudDetailInfo.id},e.$api.createSafeGroupRes(n).then((function(t){e.$notify({title:e.$t("common.success"),message:e.$t("common.msg122"),type:"success",offset:80}),e.$emit("refreshCloudInfo")})).catch((function(t){e.safeGroup=null,e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})}))):e.safeGroup=null;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},changeStore:function(){0===this.$store.state.config.edition&&-1!==this.backForm.store_id&&(this.$message(this.$t("common.msg8")),this.backForm.store_id=-1),2===this.$store.state.config.edition&&-1!==this.backForm.store_id&&(this.$message(this.$t("common.msg228")),this.backForm.store_id=-1)},closeBackForm:function(){Object.assign(this.backForm,this.$options.data.call(this).backForm),this.$refs.backFormRef.resetFields()},getAdslList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={per_page:99999,used:0,node:e.cloudDetailInfo.node_id,lock:0},t.next=3,d["a"].getAdslListReq(a);case 3:o=t.sent,i=o.data,e.adslList=i.filter((function(t){return t.id!==e.cloudDetailInfo.adsl.id}));case 6:case"end":return t.stop()}}),t)})))()},changeCheckAdsl:function(){var e=this,t=this.adslList.find((function(t){return t.id===e.dialogFormData.adsl}));this.cloudDetailInfo.adsl.vlan===t.vlan?(this.isAdslAgree=!1,this.$refs.dialogFormData.clearValidate("agree")):this.isAdslAgree=!0},changeAdsl:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={id:e.id,adsl:e.dialogFormData.adsl,force_off:e.dialogFormData.agree},t.next=4,u["a"].changeCloudAdsl(a);case 4:e.$message.success(e.$t("common.updateSuccess")),e.dialogForm.show=!1,e.$emit("refreshCloudInfo"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error(t.t0.msg);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},handleClickSafeGroup:function(){var e,t=this;this.safeGroupSelect.forEach((function(a){a.id===t.safeGroup&&(e=a.name)})),this.$swal.fire({title:this.$t("common.msg123")+e+this.$t("common.securityGroup")+"?",icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.value?(o={cloud:t.id,id:t.safeGroup,type:1},t.$api.relevanceSafeGroupRes(o).then((function(e){t.$notify({title:t.$t("common.success"),message:t.$t("common.msg122"),type:"success",offset:80}),t.$emit("refreshCloudInfo"),t.$emit("refreshCloudStatus")})).catch((function(e){t.$notify({title:t.$t("common.fail"),message:e.data.error,type:"error",offset:80})}))):t.safeGroup=void 0;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},rowStyle:function(e){e.row,e.rowIndex;var t={height:"43px"};return t},submitEditVncPassWord:Object(l["b"])((function(){var e=this;this.$refs.backForm.validate((function(t){if(t){var a={vncpass:e.backForm.vncPassWord};e.$api.upCloud1(e.id,a).then((function(t){e.isShowVncPassDialog=!1,e.$notify({title:e.$t("common.success"),message:e.$t("common.msg124"),type:"success",offset:80}),e.$emit("refreshCloudInfo"),e.vncPassword=e.backForm.vncPassWord,e.getHiddenVncPassword()}),(function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})})).catch((function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})}))}}))})),submitEditVncPort:Object(l["b"])((function(){var e=this;this.$refs.backForm.validate((function(t){if(t){var a={vncport:parseInt(e.backForm.vncPort)};e.$api.upCloud1(e.id,a).then((function(t){e.isShowVncPort=!1,e.$notify({title:e.$t("common.success"),message:e.$t("common.msg125"),type:"success",offset:80}),e.$emit("refreshCloudInfo")}),(function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})})).catch((function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})}))}}))})),getSafeGroupResInfo:function(){var e=this,t={orderby:"id",sort:"asc",search:"",user:this.cloudDetailInfo.user_id,list_type:"all"};this.$api.getSafeGroupRes(t).then((function(t){e.safeGroupSelect=t.data.filter((function(t){return t.type===e.cloudDetailInfo.type}))}),(function(t){e.$message.error(t.data.error)})).catch((function(t){t.data&&e.$message.error(t.data.error)}))},getAvaliIso:function(){var e=this,t={id:this.cloudDetailInfo.node_id&&void 0!==this.cloudDetailInfo.node_id?parseInt(this.cloudDetailInfo.node_id):parseInt(this.cloudDetailInfo.area_id),type:this.cloudDetailInfo.node_id&&void 0!==this.cloudDetailInfo.node_id?"node":"area"};this.$api.getIsoByAreaOrNode(t).then((function(t){e.isoGroupSelect=[],t.forEach((function(t){t.info.forEach((function(t){e.isoGroupSelect.push(t)}))}))}),(function(t){e.$message.error(t.data.error)})).catch((function(t){t.data&&e.$message.error(t.data.error)}))},getCpuLimit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.query.id,t.next=3,e.$api.cloudsDeatil({id:a});case 3:o=t.sent,e.cpu_limit1=o.cpu_limit,"0"===e.cpu_limit1||"100"===e.cpu_limit1?e.AcpiCPU=0:e.AcpiCPU=1;case 6:case"end":return t.stop()}}),t)})))()},showXmlDialog:function(){var e=this;this.isShowXMLDialog=!0;var t={id:this.id};this.$api.getCloudsXml(t).then((function(t){e.cloudsXml=t.xml}),(function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})})).catch((function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})}))},handleClickEditPass:function(e){this.randomPassWord(e),"panel"===e?this.dialogPanelPasswordVisible=!0:this.dialogPasswordVisible=!0},closeUpdatePasswordForm:function(){this.$refs.updatePasswordForm.resetFields()},randomPassWord:function(e){var t=this.genEnCode(10,1,1,0,1);"panel"===e?this.updatePasswordForm.panel_pass=t:this.updatePasswordForm.randomPassWord=t},genEnCode:function(e,t,a,o,i,n){var r="";if(0===t&&0===a&&0===o)return r;for(var s=e;s>=0;s--){var c=Math.floor(94*Math.random()+33);0===t&&c>=48&&c<=57||0===a&&(c>=65&&c<=90||c>=97&&c<=122)||0===o&&(c>=33&&c<=47||c>=58&&c<=64||c>=91&&c<=96||c>=123&&c<=127)?s++:r+=String.fromCharCode(c)}return"0"===i&&(r="0"===n?r.toUpperCase():r.toLowerCase()),Math.floor(10*Math.random()+1)+r},updatePasswordSure:function(e){var t=this;this.$refs.updatePasswordForm.validate(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o&&("panel"===e?(t.dialogPanelPasswordVisible=!1,i={id:t.id,panel_pass:t.updatePasswordForm.panel_pass},t.$api.mainframeUpdatePanelPassword(i).then((function(e){t.$message.success(t.$t("common.msg126")),t.$emit("refreshCloudInfo")}))):(t.dialogPasswordVisible=!1,n={id:t.id,password:t.updatePasswordForm.randomPassWord},t.$api.mainframeUpdatePassword(n).then((function(e){t.$message.success(t.$t("common.msg127"));var a={id:e.taskid,str:t.$t("common.msg128"),callback:function(){this.$message.success(this.$t("common.msg129")),this.$emit("refreshCloudInfo")}};t.$tool.executeTask(t,a)})).catch((function(e){t.$message.error(e.data.error)}))));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},getIpByCloud:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a={};t?(a.node=t,a.mac=this.mac,a.vlan=this.vlan):a={node:this.cloudDetailInfo.node_id,hostid:this.cloudDetailInfo.id,rid:this.cloudDetailInfo.resource_package?this.cloudDetailInfo.resource_package.id:"",vlan:null!==this.cloudDetailInfo.vlan?this.cloudDetailInfo.vlan:""},this.$api.getIpByNode(a).then((function(a){a.forEach((function(t){t.ip_name="".concat(t.ip_name,"（").concat(e.$t("area.ipQuantity"),":").concat(t.ip.length,"）"),t.ip=t.ip.map((function(e){return e.ip_name=e.ip,e.leaf=!0,delete e.ip,e}))})),e.ipSelectOptions=e.curIpSelectOptions=a,t&&(e.migrateIpOptions=a)}))},getelasticIpByCloud:function(){var e=this,t={node:this.cloudDetailInfo.node_id,hostid:this.cloudDetailInfo.id,rid:this.cloudDetailInfo.resource_package?this.cloudDetailInfo.resource_package.id:"",vlan:null!==this.cloudDetailInfo.vlan?this.cloudDetailInfo.vlan:"",uid:this.cloudDetailInfo.user_id};this.$api.getIpByNode(t).then((function(t){t.forEach((function(t){t.ip_name="".concat(t.ip_name,"（").concat(e.$t("area.ipQuantity"),":").concat(t.ip.length,"）"),t.ip=t.ip.map((function(e){return e.ip_name=e.ip,e.leaf=!0,delete e.ip,e}))})),e.ipElasticOptions=t}))},getCloudNatTranspond:function(){var e=this;this.$api.getCloudNatTranspond(Object(c["a"])({id:this.id},this.natTranspondPageInfo)).then((function(t){e.natTranspondData=t.data,e.natTranspondPageInfo.total_page=t.meta.total_page,e.natTranspondPageInfo.total=t.meta.total,e.natTranspondPageInfo.page=t.meta.page,e.nat_host_ip=t.nat_host_ip}))},getCloudNatBuild:function(){var e=this;this.$api.getCloudNatBuild(Object(c["a"])({id:this.id},this.natBuildPageInfo)).then((function(t){t?(e.natBuildData=t.data,e.natBuildPageInfo.total_page=t.meta.total_page,e.natBuildPageInfo.total=t.meta.total,e.natBuildPageInfo.page=t.meta.page):e.natBuildData=[]}))},getBackUpAndfastphotoInfo:function(e){var t,a=this;"fastphoto"===e?t={id:this.id,orderby:"id",per_page:parseInt(this.fastphotoInfo.per_page),page:parseInt(this.fastphotoInfo.page),sort:"desc",search:"",type:"snap"}:"backup"===e&&(t={id:this.id,orderby:"id",per_page:parseInt(this.backupPageInfo.per_page),page:parseInt(this.backupPageInfo.page),sort:"desc",search:"",type:"backup"}),this.$api.getCloudbackUp(t).then((function(t){"fastphoto"===e?(a.snapData=t.data,a.snapData=void 0===a.snapData?[]:a.snapData,a.$emit("update:fastPhotoData",a.snapData),a.fastphotoInfo.total_page=t.meta.total_page,a.fastphotoInfo.total=t.meta.total,a.fastphotoInfo.page=t.meta.page):"backup"===e&&(a.backupData=t.data,a.backupPageInfo.total_page=t.meta.total_page,a.backupPageInfo.total=t.meta.total,a.backupPageInfo.page=t.meta.page)}),(function(e){a.$message.error(e.data.error)})).catch((function(e){e.data&&a.$message.error(e.data.error)}))},headClassName:function(e){e.row,e.rowIndex;return"success-row"},tableRowClassName:function(e){e.row;var t=e.rowIndex;return 1===t?"warning-row":3===t?"success-row":""},getLimitRateIp:function(){var e=this,t={id:this.defaultGroupIp,page:parseInt(this.ipPageInfo.page),per_page:parseInt(this.ipPageInfo.per_page)};this.$api.getLimitGroupIpList(this.defaultGroupIp,t).then((function(t){e.ipData=[],e.ipPageInfo.total=t.meta.total,e.ipPageInfo.total_page=t.meta.total_page,e.ipData=t.data}),(function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})})).catch((function(t){t.data&&e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})}))},handleClickDialogShow:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a.dialogForm.show=!0,a.dialogForm.title=e,a.dialogForm.type=t,"updateCustomer"!==t){o.next=10;break}return o.next=6,u["a"].userListReq({list_type:"all"});case 6:i=o.sent,a.customer=i.data.filter((function(e){return a.cloudDetailInfo.user_id!==e.id})),o.next=11;break;case 10:"cpuLimit"===t?(a.dialogFormData.cpusockets=a.cloudDetailInfo.cpusockets,a.dialogFormData.cpucores=a.cloudDetailInfo.cpucores,a.dialogFormData.cputhreads=a.cloudDetailInfo.cputhreads,a.dialogFormData.cputopcheck=a.cloudDetailInfo.cputopcheck,a.dialogFormData.cputunecheck=a.cloudDetailInfo.cputunecheck,a.dialogFormData.cpunumacheck=a.cloudDetailInfo.cpunumacheck,a.dialogFormData.cputune=a.cloudDetailInfo.cputune,a.dialogFormData.cpunumatop=a.cloudDetailInfo.cpunumatop):"editHostname"===t?a.dialogFormData.hostname=a.cloudDetailInfo.hostname:"editAdsl"===t&&a.getAdslList();case 11:case"end":return o.stop()}}),o)})))()},closeDialog:function(e){"dialogInfo"===e?(this.dialogInfo={type:"moveNode",advanced:!1,ipGroup:0,store:"",node:"",ip:[],hot_migrate:1,quick_migrate:1,force_hot_migrate:0,allow_hang:0,force:0,showAdsl:!1,adsl:0,agree:!1,allow_discard_snap:0,disk:[]},this.migrate_type="",this.coldMigrate=!1,this.isShowAllow=!1,this.$refs.dialogInfo.resetFields(),this.$emit("changeMigShow"),this.tableData.forEach((function(e){e.checkStore=""}))):(this.isAdslAgree=!0,this.$refs.dialogFormData.resetFields())},closeNetDialog:function(){this.$refs.networkQueuesForm.resetFields()},submitNetworkQueuesForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.networkQueuesForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o={},i=e.$t("common.updateSuccess"),"queues"===e.networkQueuesForm.type?o.queues=e.networkQueuesForm.queues:"vram"===e.networkQueuesForm.type?(o.vram=e.networkQueuesForm.vram,o.gpu=e.networkQueuesForm.gpu):(o.gpu=!e.cloudDetailInfo.gpu,i=e.cloudDetailInfo.gpu?e.$t("common.close")+e.$t("common.success"):e.$t("common.startSuccess")),!a){t.next=16;break}return t.prev=4,t.next=7,e.$api.upCloud1(e.id,o);case 7:e.$message.success(i),e.$emit("refreshCloudInfo"),e.$emit("refreshCloudStatus"),e.isNetworkQueueShow=!1,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4),e.$message.error(t.t0.data.error);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this;this.$refs.operaForm.validate((function(t){if(t){var a={};for(var o in e.operaForm)a[o]=e.operaForm[o];"hyperv"===e.cloudDetailInfo.type&&(a.priority=1e3-a.priority),e.$api.createSafeGroupRulesRes(Object(c["a"])({id:e.safeGroupParams.id},a)).then((function(t){e.dialogFromShow=!1,e.getsafeGroupDetailsTableData(),e.$message.success(e.$t("common.addSuccess"))})).catch((function(t){e.$message.error(t.data.error)}))}}))},submitFormDialog:function(){var e=this;this.$refs.dialogFormData.validate((function(t){if(t)switch(e.dialogForm.type){case"updateCustomer":e.updateCustomer();break;case"timeTask":e.timeTask();break;case"cpuLimit":e.cpuLimit();break;case"editHostname":e.changeHostname();break;case"editAdsl":e.changeAdsl();break}}))},changeHostname:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={hostname:e.dialogFormData.hostname},t.prev=1,t.next=4,u["a"].changeHostname(e.id,a);case 4:e.$message.success(e.$t("common.updateSuccess")),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](1);case 9:e.dialogForm.show=!1,e.$emit("refreshCloudInfo");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()},changeIpType:function(e){0===e?(this.checkType="normal",this.curIpSelectOptions=this.ipSelectOptions):(this.checkType="elastic",this.curIpSelectOptions=this.ipElasticOptions),this.$refs.floatIpForm.resetFields(),this.floatIpForm.ip=[],this.selectValue=[],this.curCheck=[],this.$refs.tree.setCheckedKeys([]),this.$refs.tree.filter("")},getVpcList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].vpcNetworksReq({node:e.cloudDetailInfo.node_id,user:e.dialogFormData.uid,list_type:"all"});case 2:a=t.sent,e.vpcNetwork=a.data.filter((function(t){return t.name!==e.cloudDetailInfo.vpc_name}));case 4:case"end":return t.stop()}}),t)})))()},updateCustomer:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e.cloudDetailInfo.id,uid:e.dialogFormData.uid,vpc:e.dialogFormData.vpc},t.next=3,u["a"].updateCloudUserReq(a);case 3:o=t.sent,e.$message.success(e.$t("common.msg130")),e.dialogForm.show=!1,i={id:o.taskid,str:e.$t("common.msg131"),callback:function(){this.$emit("refreshCloudInfo")}},e.$tool.executeTask(e,i);case 8:case"end":return t.stop()}}),t)})))()},timeTask:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e.cloudDetailInfo.id,type:e.dialogFormData.type,frequency:e.dialogFormData.frequency,cycle:e.dialogFormData.cycle,disk:e.dialogFormData.disk},t.next=3,u["a"].createTimeTaskReq(a);case 3:e.dialogForm.show=!1,e.$message.success(e.$t("common.msg132")),e.$refs.ComputerTimeTask&&e.$refs.ComputerTimeTask.getData();case 6:case"end":return t.stop()}}),t)})))()},cpuLimit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e.cloudDetailInfo.id,cputopcheck:e.dialogFormData.cputopcheck,cputunecheck:e.dialogFormData.cputunecheck,cpunumacheck:e.dialogFormData.cpunumacheck,cpusockets:e.dialogFormData.cpusockets,cpucores:e.dialogFormData.cpucores,cputhreads:e.dialogFormData.cputhreads,cputune:e.dialogFormData.cputune,cpunumatop:e.dialogFormData.cpunumatop},t.next=3,u["a"].updateCloudReq(a);case 3:e.dialogForm.show=!1,e.$message.success(e.$t("common.updateSuccess")),e.$emit("refreshCloudInfo"),e.$emit("refreshCloudStatus");case 7:case"end":return t.stop()}}),t)})))()},getStore:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,i,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=e.length>0&&void 0!==e[0]&&e[0],i=e.length>1?e[1]:void 0,n={list_type:"all",enable:1,node:i},a.prev=3,a.next=6,t.$api.getStorages(n);case 6:r=a.sent,r.data=r.data.filter((function(e){return e.status})),o?t.nodeStoreList=r.data:t.storeList=r.data,a.next=13;break;case 11:a.prev=11,a.t0=a["catch"](3);case 13:case"end":return a.stop()}}),a,null,[[3,11]])})))()},closeMigrate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t)return this.migrateShow=!1,void(this.migrate={taskid:"",target_node:{name:""},progress:0,migrate_size:0,total_size:0,eta_string:0,speed:0});this.$swal.fire({title:this.$t("common.msg133"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value){t.next=7;break}return t.next=3,u["a"].cancelTaskReq({id:e.migrate.taskid});case 3:e.$message.success(e.$t("common.msg134")),e.$emit("refreshCloudInfo"),e.$emit("refreshCloudStatus"),e.migrate={taskid:"",target_node:{name:""},progress:0,migrate_size:0,total_size:0,eta_string:0,speed:0};case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getIPV6Data:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e.id,page:e.IPV6PageInfo.page,per_page:e.IPV6PageInfo.per_page},t.next=3,e.$api.getCloudIPV6Req(a);case 3:if(o=t.sent,o.data){t.next=7;break}return e.IPV6Data=[],t.abrupt("return");case 7:e.IPV6Data=o.data,e.IPV6PageInfo.page=o.meta.page,e.IPV6PageInfo.per_page=o.meta.per_page,e.IPV6PageInfo.total=o.meta.total;case 11:case"end":return t.stop()}}),t)})))()},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.activeName="floatIp",e.getIPV6Data(),e.getFloatIPInfo(),!e.isAgent&&e.isCursomerVersion){t.next=8;break}return t.next=6,e.getIpByCloud();case 6:return t.next=8,e.getelasticIpByCloud();case 8:case"end":return t.stop()}}),t)})))()}}},y=k,D=(a("0a57"),a("840a"),Object(_["a"])(y,o,i,!1,null,"02feb862",null));t["a"]=D.exports}}]);
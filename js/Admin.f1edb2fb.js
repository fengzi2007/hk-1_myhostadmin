(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Admin"],{"00cb":function(t,e,a){},"091f":function(t,e,a){"use strict";var r=a("b65e"),o=a.n(r);o.a},1602:function(t,e,a){"use strict";var r=a("5530"),o=a("a27e");a("b5d2");e["a"]={getUserListReq:function(t){return Object(o["b"])("/user",t)},loadUserPage:function(t){return Object(o["b"])("/user/search",Object(r["a"])({},t))},createUserReq:function(t){return Object(o["c"])("/user",t)},updateUserReq:function(t){return Object(o["d"])("/user/".concat(t.id),t)},deleteUserReq:function(t){return Object(o["a"])("/user/".concat(t))},deleteMoreReq:function(t){return Object(o["a"])("/user",t)},downloadReq:function(t){return Object(o["b"])("/download/client",t,"blob")},getLoginUserReq:function(t){return Object(o["c"])("/user/".concat(t,"/login"))},changeStatus:function(t,e){return Object(o["d"])("/user/".concat(t,"/toggle_state"),e)},changePassword:function(t){return Object(o["d"])("/user/password",t)}}},"2c12":function(t,e,a){"use strict";var r=a("9619c"),o=a.n(r);o.a},4237:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ssl"},[a("el-row",{attrs:{justify:"center",type:"flex"}},[a("el-col",{attrs:{xs:24,sm:18,lg:12}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRule,"label-width":"100px","label-position":t.$globalConfig.labelPosition},on:{"hook:created":t.getSSL}},[a("el-form-item",{attrs:{label:t.$t("config.ssl.type"),prop:"type"}},[a("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("config.ssl.encrypt"))+" "),a("el-popover",{attrs:{placement:"top-start",width:"300",trigger:"hover"}},[a("div",[t._v(" "+t._s(t.$t("config.ssl.encryptDesc"))+" "),a("a",{attrs:{href:"https://letsencrypt.org",target:"_blank"}},[a("el-link",{attrs:{type:"danger"}},[t._v(t._s(t.$t("config.ssl.encryptNetwork")))])],1)]),a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc","margin-right":"40px"},attrs:{slot:"reference"},slot:"reference"})])],1),a("el-radio",{attrs:{label:2}},[t._v(" "+t._s(t.$t("config.ssl.selfSSL"))+" "),a("el-popover",{attrs:{placement:"top-start",trigger:"hover",content:t.$t("config.ssl.NotCredible")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc","margin-right":"40px"},attrs:{slot:"reference"},slot:"reference"})])],1),a("el-radio",{attrs:{label:3}},[t._v(" "+t._s(t.$t("config.ssl.customSSL"))+" "),a("el-popover",{attrs:{placement:"top-start",trigger:"hover",content:t.$t("config.ssl.customSSL")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc","margin-right":"40px"},attrs:{slot:"reference"},slot:"reference"})])],1)],1)],1),1===t.form.type?a("div",{staticClass:"text"},[t._v(" "+t._s(t.$t("config.ssl.encryptDesc"))+" "),a("a",{attrs:{href:"https://letsencrypt.org",target:"_blank"}},[a("el-link",{attrs:{type:"danger"}},[t._v(t._s(t.$t("config.ssl.encryptNetwork")))])],1)]):t._e(),2===t.form.type?a("div",{staticClass:"text"},[t._v(" "+t._s(t.$t("config.ssl.NotCredible"))+" ")]):t._e(),3===t.form.type?a("el-form-item",{attrs:{label:t.$t("config.ssl.kem"),prop:"ssl_pem"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:12}},model:{value:t.form.ssl_pem,callback:function(e){t.$set(t.form,"ssl_pem",e)},expression:"form.ssl_pem"}})],1):t._e(),3===t.form.type?a("el-form-item",{attrs:{label:t.$t("config.ssl.key"),prop:"ssl_key"}},[a("el-input",{attrs:{type:"textarea",placeholder:t.$t("config.ssl.keyDesc"),autosize:{minRows:8,maxRows:12}},model:{value:t.form.ssl_key,callback:function(e){t.$set(t.form,"ssl_key",e)},expression:"form.ssl_key"}})],1):t._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.$t("common.save")))])],1)],1)],1)],1)],1)},o=[],s=(a("ac1f"),a("5319"),a("1276"),{data:function(){return{form:{type:2,ssl_key:"",ssl_pem:""},formRule:{ssl_pem:{required:!0,message:this.$t("config.ssl.kemPlaceholder"),trigger:"blur"},ssl_key:{required:!0,message:this.$t("config.ssl.keyPlaceholder"),trigger:"blur"}}}},computed:{},watch:{},methods:{getSSL:function(){var t=this;this.$api.getSSL().then((function(e){Object.assign(t.form,e)})).catch((function(e){t.$message.error(e.data.error)}))},onSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e){var a=window.location.href.split("#")[0].replace(window.location.origin,"");t.$api.updateSSL(t.form).then((function(e){t.$message.success(t.$t("common.saveSuccess")),window.location.href="https://"+window.location.hostname+":8443"+a})).catch((function(e){e.data||1!==t.form.type?t.$message.error(e.data.error):t.getSSLinfo()}))}}))},getSSLinfo:function(){var t=this;this.$api.getSSLResult().then((function(e){var a=window.location.href.split("#")[0].replace(window.location.origin,"");t.$message.success(t.$t("common.saveSuccess")),window.location.href="https://"+window.location.hostname+":8443"+a})).catch((function(e){e.data?t.$message.error(e.data.error):setTimeout((function(){t.getSSLinfo()}),2e3)}))}}}),n=s,i=(a("2c12"),a("2877")),c=Object(i["a"])(n,r,o,!1,null,"4c981bb6",null);e["default"]=c.exports},4468:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"blacklist"},[a("el-card",[a("div",{staticClass:"crumbs-wrapper"},[a("crumbs")],1),a("metalTable",{ref:"tableRef",attrs:{tableLoading:t.tableLoading,tableData:t.tableData,total:t.total,orderby:t.orderby,sorting:t.sorting,page:t.page,pageSize:t.pageSize,search:t.search},on:{getTableData:t.getTableData,"update:orderby":function(e){t.orderby=e},"update:sorting":function(e){t.sorting=e},"update:page":function(e){t.page=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:search":function(e){t.search=e}},scopedSlots:t._u([{key:"button",fn:function(){return[a("div",{staticClass:"fboxRow"},[a("div",{staticClass:"mr-10"},[t.isCursomerVersion?t._e():a("el-popover",{attrs:{placement:"left-start",trigger:"hover"}},[a("div",{staticClass:"tips"},[a("div",[t._v(t._s(t.$t("common.clientVersion"))+": v"+t._s(t.$store.state.config.client_version))]),a("div",[t._v(t._s(t.$t("common.updateTime"))+": "+t._s(t.$store.state.config.client_update_date))]),a("div",{staticClass:"fboxRow Ycenter"},[t._v(t._s(t.$t("systemUpgrade.updateLog"))+": "),a("el-link",{attrs:{type:"primary"},on:{click:t.showLog}},[t._v(t._s(t.$t("common.clickHere")))])],1)]),a("el-button",{staticClass:"curtomer-button",attrs:{slot:"reference",size:"small",type:"primary"},nativeOn:{click:function(e){return t.download(e)}},slot:"reference"},[t._v(t._s(t.$t("userList.customerDownload"))+"v"+t._s(t.$store.state.config.client_version)),"1"==t.$store.state.config.client_is_update?a("div",{staticClass:"update"}):t._e()])],1)],1),a("addButton",{attrs:{type:"primary",size:"small",text:t.$t("userList.createUser")},nativeOn:{click:function(e){return t.openDialog(t.openCallback)}}}),t.isAgent?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$router.push("/resource-list")}}},[t._v(" "+t._s(t.$t("common.resourceStatistics"))+" ")])],1)]},proxy:!0},{key:"table",fn:function(){return[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"username",label:t.$t("userList.username")}}),t.isAgent?t._e():a("el-table-column",{attrs:{prop:"parent",label:t.$t("userList.parent")}}),a("el-table-column",{attrs:{prop:"email",label:t.$t("userList.email")}}),t.isAgent?t._e():a("el-table-column",{attrs:{prop:"cpu",label:t.$t("common.cpuAssign")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[t._v(" "+t._s(t.$t("common.useCpu"))+"："+t._s(r.cpu_used)+" "+t._s(t.$t("common.nuclear"))+" "),a("br"),t._v(" "+t._s(t.$t("common.cpuTotal"))+"： "+t._s(r.cpu)+" "+t._s(t.$t("common.nuclear"))+" ")])]),r.cpu?a("el-progress",{attrs:{percentage:parseInt(r.cpu_used/r.cpu*100),"stroke-width":10,"show-text":!1}}):t._e()],1)],1)]}}],null,!1,902719411)}),t.isAgent?t._e():a("el-table-column",{attrs:{prop:"cpu",label:t.$t("common.ramAssign")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[t._v(" "+t._s(t.$t("common.useMemory"))+"："+t._s(t.testUnit(r.memory_used))+" "),a("br"),t._v(" "+t._s(t.$t("common.totalMemory"))+"： "+t._s(t.testUnit(r.memory))+" ")])]),r.memory?a("el-progress",{attrs:{percentage:parseInt(r.memory_used/r.memory*100),"stroke-width":10,"show-text":!1}}):t._e()],1)],1)]}}],null,!1,4211326612)}),t.isAgent?t._e():a("el-table-column",{attrs:{prop:"disk",label:t.$t("common.diskUsage")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",[a("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[t._v(" "+t._s(t.$t("common.disk666"))+"："+t._s(r.disk_used)+" GB "),a("br"),t._v(" "+t._s(t.$t("common.diskTotal"))+"： "+t._s(r.disk)+" GB ")])]),r.disk?a("el-progress",{attrs:{percentage:parseInt(r.disk_used/r.disk*100),"stroke-width":10,"show-text":!1}}):t._e()],1)],1)]}}],null,!1,3988707893)}),a("el-table-column",{attrs:{prop:"count",label:t.$t("userList.count")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("router-link",{attrs:{to:{path:"/clouds?",query:{userId:r.id}}}},[t._v(" "+t._s(r.count)+" ")])]}}])}),t.isAgent?t._e():a("el-table-column",{attrs:{prop:"sub_count",label:t.$t("userList.subAccount")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",{staticStyle:{color:"#409eff",cursor:"pointer"},on:{click:function(e){return t.getTableData(r,!0,!0)}}},[r.r_count?a("span",[t._v(t._s(r.sub_count))]):a("span",[t._v(t._s(r.sub_count?r.sub_count:""))])])]}}],null,!1,590144342)}),t.isAgent?t._e():a("el-table-column",{attrs:{prop:"r_count",label:t.$t("common.resourceAllocation")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",[a("span",[t._v(t._s(r.r_count?r.r_count:""))])])]}}],null,!1,650982761)}),a("el-table-column",{attrs:{prop:"login_log.create_time",label:t.$t("userList.loginTime")}}),a("el-table-column",{attrs:{prop:"remark",label:t.$t("userList.remark"),width:"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"create_time",label:t.$t("userList.createTime")}}),t.isAgent?t._e():a("el-table-column",{attrs:{prop:"state",label:t.$t("cloudBackup.enable")},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",[a("el-switch",{on:{change:function(e){return t.changeStatus(r)}},model:{value:r.status,callback:function(e){t.$set(r,"status",e)},expression:"row.status"}})],1)]}}],null,!1,850742297)}),a("el-table-column",{attrs:{label:t.$t("common.manage"),width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{type:"success"},on:{click:function(e){return t.loginCustomer(r)}}},[t._v(t._s(t.$t("userList.login")))]),a("el-tooltip",{attrs:{content:t.$t("cloudBackup.accountModification"),disabled:1===t.$store.state.config.edition||1!==r.id}},[a("cl-button",{attrs:{type:"update"},on:{click:function(e){return t.updateAccount(r,t.updateCallback)}}})],1),1!==r.id?a("cl-button",{attrs:{type:"delete"},on:{click:function(e){return t.deleteRow(r)}}}):t._e()],1)]}}])})]},proxy:!0},{key:"batch",fn:function(){return[a("div",[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.delTableSelection}},[t._v(t._s(t.$t("databaseBackup.batchRemove"))+" ")])],1)]},proxy:!0}])}),a("el-dialog",{attrs:{title:t.form.title,visible:t.form.formDialogVisable,width:"500px"},on:{"update:visible":function(e){return t.$set(t.form,"formDialogVisable",e)},close:function(e){return t.closeDialog(t.isSubAccount=!1)},open:function(e){t.isAgent&&(t.isAllot=!0)}}},[a("el-form",{ref:"formData",attrs:{rules:t.formRule,model:t.formData,size:"medium","label-width":"160px","label-position":t.$globalConfig.labelPosition}},[a("el-form-item",{attrs:{label:t.$t("userList.username"),prop:"username"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),1!=t.formData.id?[a("el-form-item",{attrs:{label:t.$t("userList.password"),prop:"password"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}},[a("div",{staticClass:"icon",attrs:{slot:"suffix"},on:{click:function(e){return t.randomPassWord("panel")}},slot:"suffix"},[a("span",{staticClass:"icon-random"})])])],1),a("el-form-item",{attrs:{label:t.$t("userList.checkPassword"),prop:"checkPassword"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:t.formData.checkPassword,callback:function(e){t.$set(t.formData,"checkPassword",e)},expression:"formData.checkPassword"}})],1),a("el-form-item",{attrs:{label:t.$t("userList.email"),prop:"email"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"email"},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1),a("el-form-item",{attrs:{label:t.$t("userList.remark"),prop:"remark"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},maxlength:30,"show-word-limit":!0},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1),"update"===t.optType&&t.hasGoogle?a("el-form-item",[a("template",{slot:"label"},[t._v(" "+t._s(t.$t("plugin.tip18"))+" "),a("el-popover",{attrs:{placement:"top-start",width:"260",trigger:"hover"}},[t._v(" "+t._s(t.$t("plugin.tip19"))+" "),a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.isReset,callback:function(e){t.isReset=e},expression:"isReset"}})],2):t._e(),a("el-form-item",{attrs:{label:t.resourceText,prop:t.isAgent?"rid":""}},[t.isSubAccount&&"create"!==t.form.type?t._e():a("el-switch",{model:{value:t.isAllot,callback:function(e){t.isAllot=e},expression:"isAllot"}}),t._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.isAllot,expression:"isAllot"}],key:t.keyNum,attrs:{multiple:!t.isSubAccount&&!t.isAgent,disabled:t.isSubAccount&&"create"!==t.form.type},model:{value:t.formData.rid,callback:function(e){t.$set(t.formData,"rid",e)},expression:"formData.rid"}},t._l(t.packageList,(function(t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1)]:t._e()],2),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.form.formDialogVisable=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$t("common.sure")))])],1)],1)],1)],1)},o=[],s=(a("4160"),a("caad"),a("b0c0"),a("dca8"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("841c"),a("159b"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),n=a("d75a"),i=a("1602"),c={metaInfo:function(){return{title:this.$t("userList.name")}},mixins:[n["a"]],data:function(){var t=this;return{keyNum:0,isAgent:JSON.parse(localStorage.getItem("isAgent")),isCursomerVersion:!0,userInfo:this.$store.state.userInfo,tableData:[],searchId:"",resourceText:this.$t("common.resourceAllot"),isSubAccount:!1,total:0,tableLoading:!1,isAllot:!1,isReset:0,optType:"",packageList:[],formData:{username:"",password:"",checkPassword:"",email:"",remark:"",id:"",rid:this.isAgent?"":[],customfield:{google_auth_reset:0}},hasGoogle:localStorage.getItem("commonPlugin").includes("GoogleAuth"),formRule:{username:[{required:!0,message:this.$t("userList.usernamePlaceholder"),trigger:"blur"}],password:[{required:!0,message:this.$t("userList.passwordPlaceholder"),trigger:"blur"},{validator:function(e,a,r){return t.$validate.validatePass(e,a,r,"create"===t.form.type)},trigger:"blur"}],checkPassword:[{required:!0,message:this.$t("userList.checkPasswordPlaceholder"),trigger:"blur"},{validator:function(e,a,r){t.$validate.validateIseq(e,a,r,t.formData.password)},trigger:"blur"}],rid:[{required:!0,message:this.$t("common.checkResource"),trigger:"blur"},{validator:function(e,a,r){var o={};t.packageList.forEach((function(t){t.id===a&&(o=t)})),o.sub_account||r(),o.sub_account<o.sub_account_used&&r(new Error(t.$t("common.rCount")+o.sub_account+","+t.$t("common.used1")+o.sub_account_used)),r()},trigger:"blur"}]}}},computed:{},created:function(){this.$route.query.id&&(this.searchId=this.$route.query.id),this.getPackageList()},mounted:function(){var t=this.$searchAlive.urlGetData();t.search&&(this.search=t.search,this.$refs.tableRef.metalSearch=t.search,this.$refs.tableRef.getTableData())},watch:{},methods:{delTableSelection:function(){var t=this,e=this.$refs.tableRef.$refs.table.selection;e.length&&this.$swal.fire({title:this.$t("common.msg138"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(r){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r.value){a.next=7;break}return o=[],e.forEach((function(t){o.push(t.id)})),a.next=5,i["a"].deleteMoreReq({id:o});case 5:t.getTableData(),t.$message.success(t.$t("common.deleteSuccess"));case 7:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(){}))},testUnit:function(t,e){return t/1024>0?t/1024+"GB":t+"MB"},changeStatus:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r="",a.next=4,i["a"].changeStatus(t.id,{state:t.status?1:0});case 4:r=t.status?e.$t("common.startSuccess"):e.$t("common.closeSuccess"),e.$message.success(r),e.getTableData("",!1),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:case"end":return a.stop()}}),a,null,[[0,9]])})))()},getPackageList:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isAgent){e.next=5;break}t.userInfo.resource_package.forEach((function(t){t.show_name=t.name,t.isShow=!0})),t.packageList=t.userInfo.resource_package,e.next=14;break;case 5:return e.prev=5,e.next=8,t.$api.getUserPackageList({list_type:"all"});case 8:a=e.sent,a.data&&(a.data.forEach((function(e){e.isShow=!0,t.isAgent||0===e.uid||(e.isShow=!1)})),t.packageList=a.data),e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](5);case 14:case"end":return e.stop()}}),e,null,[[5,12]])})))()},showLog:function(){this.$alert(this.$store.state.config.client_update_log,this.$t("systemUpgrade.updateLog"),{customClass:"fontAuto",confirmButtonText:this.$t("common.determine"),dangerouslyUseHTMLString:!0})},openCallback:function(){this.optType="",this.formRule.checkPassword[0].required=!0,this.formRule.password[0].required=!0,this.isAgent&&(this.resourceText=this.$t("common.resourceAllocation")),this.isAllot=!1,this.keyNum++},updateAccount:function(t,e){1!==this.$store.state.config.edition&&1===t.id||this.updateRow(t,e)},updateCallback:function(t){this.optType="update",this.isReset=0,this.formRule.checkPassword[0].required=!1,this.formRule.password[0].required=!1,this.isAgent&&(this.resourceText=this.$t("common.resourceOf")),this.keyNum++,this.formData.rid=t.rid||t.resource_package,t.rid||t.resource_package.length?this.isAllot=!0:this.isAllot=!1,t.parent?this.isSubAccount=!0:this.isSubAccount=!1},randomPassWord:function(t){var e=this.$tool.randomPass(8,1,1,0,1);this.formData.password=e,this.formData.checkPassword=e},getTableData:function(t){var e=arguments,a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var o,s,n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=!(e.length>1&&void 0!==e[1])||e[1],s=e.length>2&&void 0!==e[2]&&e[2],a.$searchAlive.urlUpdate({search:a.search},location.href,a.$route.query),r.prev=3,a.tableLoading=o,s&&(a.search=""),n={orderby:a.orderby,sort:a.sorting,per_page:a.pageSize,search:a.search,page:s?1:a.page,id:a.searchId},a.search&&(n.page=1),t&&t.id&&(n.user=t.id),r.next=11,i["a"].getUserListReq(n);case 11:c=r.sent,c.data.forEach((function(t){t.status=1===t.state})),a.tableData=Object.freeze(c.data),a.total=c.meta.total,r.next=19;break;case 17:r.prev=17,r.t0=r["catch"](3);case 19:return r.prev=19,a.tableLoading=!1,r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[3,17,19,22]])})))()},create:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].createUserReq(t.formData);case 2:t.form.formDialogVisable=!1,t.$message.success(t.$t("common.addSuccess")),t.getTableData();case 5:case"end":return e.stop()}}),e)})))()},update:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSubAccount&&(t.formData.rid=""),a=JSON.parse(JSON.stringify(t.formData)),t.hasGoogle&&Object.assign(a,{customfield:{google_auth_reset:t.isReset}}),e.next=5,i["a"].updateUserReq(a);case 5:t.form.formDialogVisable=!1,t.$message.success(t.$t("common.updateSuccess")),t.getTableData(),t.getPackageList();case 9:case"end":return e.stop()}}),e)})))()},deleteRow:function(t){var e=this;this.$swal.fire({title:this.$t("common.confirmDelete"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r.isConfirmed){a.next=5;break}return a.next=3,i["a"].deleteUserReq(t.id);case 3:e.$message.success(e.$t("common.deleteSuccess")),e.getTableData();case 5:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())},download:function(){return Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].downloadReq();case 2:e=t.sent,a=new Blob([e]),r="cloudclient.zip",o=document.createElement("a"),o.download=r,o.style.display="none",o.href=URL.createObjectURL(a),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o);case 13:case"end":return t.stop()}}),t)})))()},loginCustomer:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i["a"].getLoginUserReq(t.id);case 2:r=a.sent,e.$store.dispatch("getCommonConfig"),setTimeout((function(){localStorage.setItem("customerToken",r.token);var t=window.location.origin+"/user";window.open(t)}),0);case 5:case"end":return a.stop()}}),a)})))()}}},l=c,u=(a("091f"),a("2877")),d=Object(u["a"])(l,r,o,!1,null,"0c95050c",null);e["default"]=d.exports},"9619c":function(t,e,a){},b65e:function(t,e,a){},d185:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-list"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"font-weight font16"},[t._v(t._s(t.$t("adminGroup.name")))]),a("div",{staticClass:"node-management-row"},[a("div",{staticClass:"management-left"}),a("div",{staticClass:"button-wrapper",on:{click:t.addAdminGroup}},[a("addButton")],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":t.$t("common.loading"),data:t.groupList}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}}])}),a("el-table-column",{attrs:{prop:"title",label:t.$t("adminGroup.groupName"),width:"200"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}}])}),a("el-table-column",{attrs:{prop:"",label:t.$t("adminGroup.username"),"min-width":"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.list,(function(e){return a("div",{key:e.id,staticClass:"user-item"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.username))])],1)}))}}])}),a("el-table-column",{attrs:{label:t.$t("common.manage"),width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!==e.row.id?a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{type:"update"},on:{click:function(a){return t.reviseAdmin(e.row)}}}),a("cl-button",{attrs:{type:"delete"},on:{click:function(a){return t.deleteRow(e.row)}}})],1):t._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.pageInfo.page,"page-sizes":[10,20,50,100],"page-size":t.pageInfo.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.currentChange,"current-change":t.currentChange,"update:currentPage":function(e){return t.$set(t.pageInfo,"page",e)},"update:current-page":function(e){return t.$set(t.pageInfo,"page",e)},"update:pageSize":function(e){return t.$set(t.pageInfo,"per_page",e)},"update:page-size":function(e){return t.$set(t.pageInfo,"per_page",e)}}})],1)],1),a("el-dialog",{attrs:{title:"add"==t.dialogOperaType?t.$t("adminGroup.addGroup"):t.$t("adminGroup.updateGroup"),visible:t.dialogTableAddAdmin,width:"500px"},on:{"update:visible":function(e){t.dialogTableAddAdmin=e},close:t.resetForm}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"adminForm",attrs:{rules:t.rules,model:t.adminForm,size:"medium","label-width":"140px"}},[a("el-form-item",{attrs:{label:t.$t("adminGroup.adminGroupName"),prop:"title"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:t.adminForm.title,callback:function(e){t.$set(t.adminForm,"title",e)},expression:"adminForm.title"}})],1),a("el-form-item",{attrs:{label:t.$t("adminGroup.adminGroupPower"),prop:"rules"}},[a("el-cascader",{staticStyle:{width:"85%"},attrs:{options:t.ruleList,props:{multiple:!0},"collapse-tags":""},model:{value:t.adminForm.rules,callback:function(e){t.$set(t.adminForm,"rules",e)},expression:"adminForm.rules"}})],1),a("el-form-item",{attrs:{label:t.$t("adminGroup.status"),prop:"regionsel"}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:t.$t("adminGroup.statusPlaceholder")},model:{value:t.adminForm.status,callback:function(e){t.$set(t.adminForm,"status",e)},expression:"adminForm.status"}},[a("el-option",{attrs:{value:1,label:t.$t("adminGroup.normal")}}),a("el-option",{attrs:{value:0,label:t.$t("adminGroup.disable")}})],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogTableAddAdmin=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAddAdminForm}},[t._v(t._s(t.$t("common.sure")))])],1)],1),a("deleteDialog",{staticClass:"deleteDialog",attrs:{isShowDelDialog:t.isShowDelDialog,dataType:t.$t("common.group"),rowInfo:t.rowInfo,keyword:"title"},on:{submitDeleteRow:t.submitDeleteRow,"update:isShowDelDialog":function(e){t.isShowDelDialog=e},"update:is-show-del-dialog":function(e){t.isShowDelDialog=e}}})],1)},o=[],s=(a("99af"),a("4160"),a("d3b7"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),a("ac0d")),n=a("6773"),i=a("fdad"),c={metaInfo:function(){return{title:this.$t("adminGroup.name")}},mixins:[s["a"]],components:{addButton:n["default"],deleteDialog:i["default"]},data:function(){return{loading:!1,rowInfo:{},isShowDelDialog:!1,pageInfo:{page:1,per_page:50,total:0,search:"",orderby:"id",sort:"desc"},ruleList:[],groupList:[],adminForm:{title:"",rules:[1,104,105],status:1,id:""},rules:{title:{required:!0,message:this.$t("adminGroup.adminGroupNamePlaceholder"),trigger:"blur"},rules:{required:!0,message:this.$t("adminGroup.adminGroupPowerPlaceholder"),trigger:"change"}},dialogTableAddAdmin:!1,dialogOperaType:"add",activeName:"groupList",formLabelWidth:"100px"}},methods:{resetForm:function(){var t=this;this.nodeForm={title:"",rules:[],status:1,id:""},setTimeout((function(){t.$refs.adminForm.clearValidate()}),0)},navList:function(){var t=[this.navPath[this.secondNavIndex]];return t},submitDeleteRow:function(){var t=this,e=this.rowInfo;this.$api.deleteGroupList(e.id).then((function(e){t.$message.success(t.$t("common.deleteSuccess")),t.getAdminGroupList()}),(function(e){t.$message.error(e.data.error)})).catch((function(e){t.$message.error(e.data.error)}))},deleteRow:function(t){this.isShowDelDialog=!this.isShowDelDialog,this.rowInfo=t,this.getAdminGroupList()},currentChange:function(){this.getAdminGroupList()},recursiveFormat:function(t,e){for(var a=0;a<t.length;a++)t[a].value=t[a].id,t[a].label=t[a].title,t[a].children?(e[a]=t[a],this.recursiveFormat(t[a].children,e[a].children)):e[a]=t[a]},getRuleList:function(){var t=this;this.$api.getRule().then((function(e){var a=[];t.recursiveFormat(e,a),t.ruleList=a}))},getAdminGroupList:function(){var t=this;this.loading=!0,this.$api.adminGroupList(this.pageInfo).then((function(e){t.groupList=e.data,t.pageInfo.total=e.meta.total,t.pageInfo.page=e.meta.page,t.pageInfo.per_page=e.meta.per_page})).catch().finally((function(){t.loading=!1}))},addAdminGroup:function(){this.$router.push({path:"/admin_config",query:{type:"add"}})},submitAddAdminForm:function(){var t=this;this.$refs.adminForm.validate((function(e){if(e){var a=[];t.adminForm.rules.forEach((function(t,e){a=a.concat(t)})),a=new Set(a);var r="";a.forEach((function(t,e){r+=t+","})),t.adminForm.rules=r,"add"===t.dialogOperaType?t.$api.addAdminGroup(t.adminForm).then((function(e){t.dialogTableAddAdmin=!1,t.$message.success(t.$t("common.addSuccess")),t.getAdminGroupList()})).catch((function(e){t.$message.error(e.data.error)})):t.$api.updateAdminGroup(t.adminForm).then((function(e){t.dialogTableAddAdmin=!1,t.$message.success(t.$t("common.updateSuccess")),t.getAdminGroupList()})).catch((function(e){t.$message.error(e.data.error)}))}}))},reviseAdmin:function(t){this.$router.push({path:"/admin_config",query:{type:"update",id:t.id}})},handleCallbackChangeOrder:function(t){this.pageInfo.orderby=t.orderby,this.pageInfo.sort=!0===t.sort?"asc":"desc",this.getAdminGroupList()}},created:function(){this.getAdminGroupList(),this.getRuleList()}},l=c,u=(a("df2b"),a("2877")),d=Object(u["a"])(l,r,o,!1,null,"4d763000",null);e["default"]=d.exports},d75a:function(t,e,a){"use strict";a("4160"),a("b64b"),a("d3b7"),a("25f0"),a("159b");e["a"]={data:function(){return{id:null,tableData:[],title:"",tableLoading:!1,search:"",pageSize:50,page:0,total:0,orderby:"",sorting:"desc",form:{formDialogVisable:!1,title:"",type:"create"}}},methods:{openDialog:function(t){this.form.formDialogVisable=!0,this.form.title=this.$t("common.add")+this.title,this.form.type="create","[object Function]"===Object.prototype.toString.call(t)&&t()},updateRow:function(t,e){this.copySameObjKey(this.formData,t),this.form.formDialogVisable=!0,this.form.title=this.$t("common.update")+this.title,this.form.type="update","[object Function]"===Object.prototype.toString.call(e)&&e(t)},closeDialog:function(t){"[object Function]"===Object.prototype.toString.call(t)&&t(),Object.assign(this.formData,this.$options.data.call(this).formData),this.$refs.formData.resetFields()},submitForm:function(){var t=this;this.$refs.formData.validate((function(e){e&&("create"===t.form.type?t.create():"update"===t.form.type?t.update():t[t.form.type]())}))},copySameObjKey:function(t,e){if(this.isPlainObject(t)&&this.isPlainObject(e))return Object.keys(t).forEach((function(a){t[a]=e[a]}))},isPlainObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)}},created:function(){this.id=this.$route.query.id}}},df2b:function(t,e,a){"use strict";var r=a("00cb"),o=a.n(r);o.a}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Nat"],{"07c6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elastic-ip"},[a("el-card",{staticClass:"box-card"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"areaList",attrs:{name:"natList"}},[a("crumbs"),a("div",{staticClass:"node-management-row"},[a("div",{staticClass:"management-left"},[a("searchInput",{attrs:{placeholder:t.isCursomerVersion?t.$t("common.pleaseChoose6"):t.$t("common.pleaseChoose4")},on:{callback:t.searchCallback},model:{value:t.pageInfo.search,callback:function(e){t.$set(t.pageInfo,"search",e)},expression:"pageInfo.search"}})],1),t.isCursomerVersion?t._e():a("div",{staticClass:"button-wrapper"},[a("addButton",{attrs:{text:t.$t("common.establish")},nativeOn:{click:function(e){return t.createNat(e)}}})],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":t.$t("common.loading"),data:t.ipData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"150"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}}])}),a("el-table-column",{attrs:{prop:"ip",label:t.$t("common.ipAddress"),"min-width":"150"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var i=e.row;return[a("el-tooltip",{attrs:{content:t.$t("common.ipIsLocked"),disabled:1!==i.lock}},[a("div",[a("span",{staticClass:"nat-ip"},[t._v(t._s(i.ip))]),1===i.lock?a("i",{staticClass:"el-icon-lock"}):t._e()])])]}}])}),a("el-table-column",{attrs:{prop:"name",label:t.$t("elastic.product_type"),"min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.type&&"cloud"===i.type?a("span",[t._v(t._s(t.$t("elastic.cloud")))]):i.type&&"load_balance"===i.type?a("span",[t._v(t._s(t.$t("elastic.load_balance")))]):t._e(),i.type&&"nat_gateway"===i.type?a("span",[t._v(t._s(t.$t("elastic.nat_gateway")))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"bw",label:t.$t("elastic.product_name"),"min-width":"150"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var i=e.row;return[i.type?a("router-link",{staticClass:"text-ellipsis",attrs:{to:{name:"cloud"===i.type?"CloudsHome":"balanceHome",query:{id:i.hostid}}}},[a("el-link",{staticClass:"text-ellipsis",attrs:{type:"primary"}},[t._v(t._s(i.hostname))])],1):t._e()]}}])}),t.isCursomerVersion?t._e():a("el-table-column",{attrs:{prop:"username",label:t.$t("common.user")},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}}],null,!1,501797150)}),a("el-table-column",{attrs:{label:t.$t("common.manage"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"icon-wrapper"},[0!==i.lock||i.hostid?t._e():a("cl-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleModify(i)}}},[t._v(" "+t._s(t.$t("common.distribution"))+" ")]),i.hostid?a("cl-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleDetach(i)}}},[t._v(" "+t._s(t.$t("common.idle"))+" ")]):t._e(),t.isCursomerVersion?t._e():a("cl-button",{attrs:{type:"delete"},on:{click:function(e){return t.deleteRow(i)}}})],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.pageInfo.page,"page-sizes":[10,20,50,100],"page-size":t.pageInfo.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.getData,"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pageInfo,"page",e)},"update:current-page":function(e){return t.$set(t.pageInfo,"page",e)},"update:pageSize":function(e){return t.$set(t.pageInfo,"per_page",e)},"update:page-size":function(e){return t.$set(t.pageInfo,"per_page",e)}}})],1)],1)],1)],1),a("el-dialog",{attrs:{title:t.$t("systemLog.ipAddress"),visible:t.isShowIpDialog,width:"400px"},on:{"update:visible":function(e){t.isShowIpDialog=e}}},t._l(t.ipList,(function(e){return a("p",{key:e.id},[t._v(" "+t._s(e.ip)+" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.ip,expression:"item.ip"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})])})),0),a("el-dialog",{attrs:{title:t.$t("elastic.allot"),visible:t.isShowBwDialog,width:"500px"},on:{"update:visible":function(e){t.isShowBwDialog=e},close:t.closeAllot}},[a("el-form",{ref:"allot",attrs:{model:t.ipForm,rules:t.rules}},[a("el-form-item",{attrs:{label:t.$t("elastic.product_type"),"label-width":t.formLabelWidth,prop:"product_type"}},[a("el-select",{attrs:{placeholder:t.$t("common.select")+t.$t("elastic.product_type")},on:{change:t.changeType},model:{value:t.ipForm.product_type,callback:function(e){t.$set(t.ipForm,"product_type",e)},expression:"ipForm.product_type"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:t.$t("elastic.product_name"),"label-width":t.formLabelWidth,prop:"rel_id"}},[a("el-select",{attrs:{placeholder:t.$t("common.select")+t.$t("elastic.product_type")},model:{value:t.ipForm.rel_id,callback:function(e){t.$set(t.ipForm,"rel_id",e)},expression:"ipForm.rel_id"}},t._l(t.productOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.hostname||t.name,value:t.id}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeAllot}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.subminReviseForm}},[t._v(t._s(t.$t("common.sure"))+" ")])],1)],1),a("deleteDialog",{staticClass:"deleteDialog",attrs:{keyword:"name",isShowDelDialog:t.isShowDelDialog,custom:t.custom},on:{submitDeleteRow:t.submitDeleteRow,"update:isShowDelDialog":function(e){t.isShowDelDialog=e},"update:is-show-del-dialog":function(e){t.isShowDelDialog=e}}})],1)},s=[],n=(a("4de4"),a("ac1f"),a("841c"),a("96cf"),a("1da1")),o=a("830e"),r=a("6773"),c=a("6cd3"),l=a("dc57"),p={metaInfo:function(){return{title:this.$t("elastic.elastic_ip")}},components:{crumbs:o["default"],addButton:r["default"]},data:function(){return{isCursomerVersion:!0,loading:!1,isAdvance:!1,charged:0,AdvanceInfo:{},rowInfo:"",checked:!1,isShowDelDialog:!1,isShowIpDialog:!1,isShowBwDialog:!1,ipData:[],ipList:[],ipForm:{product_type:"host",rel_id:""},activeName:"natList",dialogTableRevise:!1,formLabelWidth:"140px",custom:"",pageInfo:{page:1,per_page:20,total:0,search:"",orderby:"id",sort:"desc"},rules:{product_type:[{required:!0,message:this.$t("common.select")+this.$t("elastic.product_type"),trigger:"change"}],rel_id:[{required:!0,message:this.$t("common.select")+this.$t("elastic.product_name"),trigger:"change"}]},options:[{value:"host",label:this.$t("elastic.cloud")},{value:"load_balance",label:this.$t("elastic.load_balance")}],productOptions:[],enable_node:[],ipSwitch:0}},methods:{handleDetach:function(t){var e=this;try{this.$swal.fire({title:this.$t("elastic.sure_detach_ip"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(i){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i.value&&(s={id:t.id},c["a"].detachElasticIp(s).then((function(t){e.getData(),e.$notify({title:e.$t("common.success"),message:e.$t("elastic.detach_ip_success"),type:"success",offset:80})})).catch((function(t){e.$notify({title:e.$t("common.fail"),message:t.data.error,type:"error",offset:80})})));case 1:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())}catch(a){this.$message.error(a.data.msg)}},getFunctionSwitch:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].getFunctionSwitch();case 3:a=e.sent,t.ipSwitch=a.fs_elastic_ip_product,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},onCopy:Object(l["b"])((function(){this.$message({message:this.$t("common.copyIpSuccess"),type:"success"})})),onError:Object(l["b"])((function(){this.$message({message:this.$t("common.copyIpFailed"),type:"error"})})),createNat:function(){return 0===this.$store.state.config.edition?this.$message(this.$t("common.msg8")):2===this.$store.state.config.edition?this.$message(this.$t("common.msg228")):1!==this.ipSwitch?this.$message(this.$t("elastic.tip")):void this.$router.push("/add_elastic_ip")},getData:function(){var t=this;this.$searchAlive.urlUpdate({search:this.pageInfo.search},location.href,this.$route.query),this.loading=!0,c["a"].getElasticIpList(this.pageInfo).then((function(e){t.loading=!1,t.ipData=e.data,t.pageInfo.total=e.meta.total,t.pageInfo.total_page=e.meta.total_page})).catch((function(){t.loading=!1}))},searchCallback:function(){this.pageInfo.page=1,this.getData()},deleteRow:function(t){this.rowInfo=t,this.isShowDelDialog=!this.isShowDelDialog,this.custom=this.$t("common.confirmDelete1")+this.$t("elastic.elastic_ip")+"："+t.ip+" ？"},submitDeleteRow:function(){var t=this,e=this.rowInfo;c["a"].deleteElasticIp(e.id).then((function(e){t.$message({message:t.$t("area.successfullyDeleted"),type:"success"}),t.getData()}),(function(e){t.$message.error(e.data.error)})).catch((function(e){t.$message.error(e.data.error)}))},handleCallbackChangeOrder:function(t){this.pageInfo.orderby=t.orderby,this.pageInfo.sort=!0===t.sort?"asc":"desc",this.getData()},handleModify:function(t){return 0===this.$store.state.config.edition?this.$message(this.$t("common.msg8")):2===this.$store.state.config.edition?this.$message(this.$t("common.msg228")):1!==this.ipSwitch?this.$message(this.$t("elastic.tip")):(t.type?this.ipForm.product_type="cloud"===t.type?"host":t.type:this.ipForm.product_type="host",this.ipForm.rel_id=0===t.hostid?"":t.hostid,this.rowInfo=t,this.isShowBwDialog=!0,this.enable_node=t.enable_node,void this.changeType())},showIp:function(t){this.isShowIpDialog=!0,this.ipList=t.ip},changeType:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.rowInfo||0!==t.rowInfo.enable_node.length){e.next=3;break}return t.productOptions=[],e.abrupt("return");case 3:e.t0=t.ipForm.product_type,e.next="host"===e.t0?6:"load_balance"===e.t0?8:"nat"===e.t0?10:11;break;case 6:return t.getHostList(),e.abrupt("break",11);case 8:return t.getLoaBalance(),e.abrupt("break",11);case 10:return e.abrupt("break",11);case 11:case"end":return e.stop()}}),e)})))()},getHostList:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={user:t.rowInfo.uid,list_type:"all",node:t.rowInfo.enable_node,vlan:t.rowInfo.vlanid},t.productOptions=[],e.next=5,c["a"].getCloudList(a);case 5:i=e.sent,t.productOptions=i.data,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()},getLoaBalance:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={user:t.rowInfo.uid,list_type:"all",node:t.rowInfo.enable_node},t.productOptions=[],e.next=5,c["a"].getLoaBalanceList(a);case 5:i=e.sent,t.productOptions=i.data.filter((function(t){return 1===t.enable})),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()},subminReviseForm:function(t){var e=this;this.$refs.allot.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=13;break}return t.prev=1,t.next=4,c["a"].attachElasticIp(e.rowInfo.id,e.ipForm);case 4:e.$message({message:e.$t("elastic.allot")+e.$t("common.success"),type:"success"}),e.isShowBwDialog=!1,e.getData(),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](1);case 11:t.next=14;break;case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())},closeAllot:function(){this.isShowBwDialog=!1,this.$refs.allot.resetFields()}},created:function(){var t=this.$searchAlive.urlGetData();t&&(this.pageInfo.search=t.search),this.getFunctionSwitch(),this.getData()}},u=p,d=(a("a50d"),a("2877")),m=Object(d["a"])(u,i,s,!1,null,"b0d5c52e",null);e["default"]=m.exports},"0c87":function(t,e,a){},"0fc1":function(t,e,a){"use strict";var i=a("922c"),s=a.n(i);s.a},1348:function(t,e,a){},1363:function(t,e,a){"use strict";var i=a("eb21"),s=a.n(i);s.a},"18c9":function(t,e,a){"use strict";a("99af");var i=a("a27e");e["a"]={getBalanceData:function(t){return Object(i["b"])("/load_balance",t)},newBalance:function(t){return Object(i["c"])("/load_balance",t)},delBalance:function(t){return Object(i["a"])("/load_balance/".concat(t))},balanceDetails:function(t){return Object(i["b"])("/load_balance/".concat(t.id),t)},addListener:function(t,e){return Object(i["c"])("/load_balance/".concat(t,"/listener"),e)},addListenerTransmit:function(t,e){return Object(i["c"])("/load_balance_listener/".concat(t,"/acl"),e)},editListener:function(t,e,a){return Object(i["d"])("/load_balance_listener/".concat(t,"/acl/").concat(e),a)},delListenerTransmit:function(t){return Object(i["a"])("/load_balance_listener_acl/".concat(t))},ListenerListData:function(t,e){return Object(i["b"])("/load_balance/".concat(t,"/listener"),e)},editListenerBandwidth:function(t){return Object(i["d"])("/load_balance/".concat(t.id,"/bw"),t)},addListenerIpPath:function(t,e){return Object(i["c"])("/load_balance/".concat(t,"/ip"),e)},ListenerIpList:function(t){return Object(i["b"])("/load_balance/".concat(t.id,"/ip"),t)},delListenerIp:function(t,e){return Object(i["a"])("/load_balance/".concat(t,"/ip"),e)},editListenerIpNum:function(t){return Object(i["d"])("/load_balance/".concat(t.id,"/ip"),t)},lockBalance:function(t){return Object(i["c"])("/load_balance/".concat(t.id,"/lock"),t)},unlockBalance:function(t){return Object(i["c"])("/load_balance/".concat(t.id,"/unlock"),t)},disableBalance:function(t){return Object(i["c"])("/load_balance/".concat(t.id,"/disable"),t)},enableBalance:function(t){return Object(i["c"])("/load_balance/".concat(t.id,"/enable"),t)},openBalance:function(t){return Object(i["c"])("/load_balance/".concat(t.id,"/on"),t)},closeBalance:function(t){return Object(i["c"])("/load_balance/".concat(t.id,"/off"),t)},BalanceStatus:function(t){return Object(i["b"])("/load_balance/".concat(t.id,"/status"),t)},logData:function(t,e){return Object(i["b"])("/load_balance/".concat(t,"/log"),e)},chartData:function(t,e){return Object(i["b"])("/load_balance/".concat(t,"/chart_total"),e)},editChartData:function(t,e){return Object(i["b"])("/load_balance/".concat(t),e)},verifyPort:function(t){return Object(i["c"])("/common/check_listener_port",t)},verifyName:function(t){return Object(i["c"])("/common/check_listener_name",t)},editRemark:function(t,e){return Object(i["d"])("/load_balance/".concat(t,"/remark"),e)},editBalance:function(t){return Object(i["d"])("/load_balance/".concat(t.id),t)},checkPEM:function(t){return Object(i["c"])("/common/check_certificate",t)},EchartsData:function(t,e){return Object(i["b"])("/load_balance/".concat(t,"/chart"),e)},editMaxConnectReq:function(t,e){return Object(i["d"])("/load_balance/".concat(t,"/max_connect"),e)}}},"1b57":function(t,e,a){},"1cf8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-card",{staticStyle:{position:"relative"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"font-weight font16",staticStyle:{"margin-bottom":"30px"}},[t._v(" "+t._s(t.$t("common.establish")+"NAT"+t.$t("common.gateway"))+" ")])]),a("br"),a("el-form",{ref:"addCloudsForm",attrs:{model:t.addCloudsForm,rules:t.addCloudFormRuls,"label-width":"120px","label-position":t.$globalConfig.labelPosition}},[a("el-form-item",{attrs:{label:t.$t("cloud.selectDataCenter"),prop:"area"}},[a("div",{staticClass:"data_center_box maxw-1500 box-test"},[a("div",t._l(t.areaSelectOptions,(function(e,i){return a("div",{key:"area"+i,staticClass:"center_box_item",on:{click:function(a){return t.areaSelectChange(e.id)}}},[a("div",{staticClass:"box_item_country",class:{box_item_country_actvie:e.id===t.activeId}},[a("img",{attrs:{src:t.$globalUrl+"/common/country/"+e.country_code+".png",alt:""}}),a("div",[t._v(t._s(e.name))])]),a("div",{staticClass:"box_item_node"},[a("el-select",{attrs:{placeholder:t.$t("cloud.selectNode"),size:"mini"},on:{change:function(a){return t.nodeSelectChange(a,e.id)}},model:{value:e.selectNode,callback:function(a){t.$set(e,"selectNode",a)},expression:"areaItem.selectNode"}},t._l(e.node,(function(t,e){return a("el-option",{key:"node"+e,attrs:{label:t.name,value:t.id}})})),1)],1)])})),0)])]),a("el-form-item",{attrs:{label:t.$t("cloud.customer")}},[a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"}],staticStyle:{width:"250px"},attrs:{filterable:"",clearable:"",loading:t.loadingUser,remote:"","remote-method":t.remoteMethod,placeholder:t.$t("cloud.pleaseSelectTheGuestFirst")},on:{change:t.getVpc,clear:t.clearHandler},model:{value:t.addCloudsForm.client,callback:function(e){t.$set(t.addCloudsForm,"client",e)},expression:"addCloudsForm.client"}},t._l(t.clientSelectOptions,(function(t,e){return a("el-option",{key:"client"+e,attrs:{label:t.username,value:t.id}})})),1),0===t.addCloudsForm.client?a("el-input",{staticClass:"mr-10 ml-20",staticStyle:{width:"250px"},model:{value:t.addCloudsForm.client_name,callback:function(e){t.$set(t.addCloudsForm,"client_name",e)},expression:"addCloudsForm.client_name"}}):t._e()],1),a("el-form-item",{attrs:{label:t.$t("common.name"),prop:"name"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:t.addCloudsForm.name,callback:function(e){t.$set(t.addCloudsForm,"name",e)},expression:"addCloudsForm.name"}})],1),"vpc"===t.addCloudsForm.network_type&&0!==t.addCloudsForm.client&&-1===t.addCloudsForm.nat_web_limit&&-1===t.addCloudsForm.nat_acl_limit?a("el-form-item",{attrs:{label:t.$t("nat.belong")+"VPC"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{filterable:"",placeholder:t.$t("common.selectNetwork")},model:{value:t.addCloudsForm.vpc,callback:function(e){t.$set(t.addCloudsForm,"vpc",e)},expression:"addCloudsForm.vpc"}},t._l(t.networkSelectOptions,(function(t,e){return a("el-option",{key:"store"+e,attrs:{label:t.name,value:t.id}})})),1)],1):t._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.isWidthBandShow,expression:"isWidthBandShow"}],attrs:{label:t.$t("common.bandwidth"),prop:"in_bw"}},[a("div",{staticClass:"slider_box ml-10"},[a("el-slider",{staticClass:"fl mr-20 slider_box_slider",attrs:{min:0,max:"Mbps"===t.bandwidthUnit?1e3:10},model:{value:t.bandwidth,callback:function(e){t.bandwidth=e},expression:"bandwidth"}}),a("el-input-number",{staticClass:"fl mr-20",staticStyle:{width:"120px"},attrs:{controls:!1,precision:0,min:0},model:{value:t.bandwidth,callback:function(e){t.bandwidth=e},expression:"bandwidth"}}),a("div",{staticClass:"slider_box_unit fl",staticStyle:{width:"90px"}},[a("el-select",{model:{value:t.bandwidthUnit,callback:function(e){t.bandwidthUnit=e},expression:"bandwidthUnit"}},[a("el-option",{attrs:{value:"Mbps"}},[t._v("Mbps")]),a("el-option",{attrs:{value:"Gbps"}},[t._v("Gbps")])],1)],1)],1)]),t._l(t.addCloudsForm.ipSelects,(function(e,i){return a("el-form-item",{key:e.key,attrs:{label:t.$t("common.ipAddress")+(i+1>1?i+1:""),prop:"ipSelects["+i+"].id",rules:[{required:!0,message:t.$t("common.chooseIp"),trigger:"change"}]}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:t.$t("common.select")+"IP"},on:{change:function(e){return t.changeFreeIp(e,i)}},model:{value:e.id,callback:function(a){t.$set(e,"id",a)},expression:"sel.id"}},t._l(t.filterIpList,(function(t,e){return a("el-option",{key:"store"+e,attrs:{label:t.ip,disabled:t.disabled,value:t.id}})})),1),i>0?a("el-button",{staticClass:"addIp",attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.deleteIp(i)}}},[t._v(" "+t._s(t.$t("common.delete"))+" ")]):t._e(),i===t.addCloudsForm.ipSelects.length-1&&t.addCloudsForm.ipSelects.length<10?a("el-button",{staticClass:"addIp",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addIp(i)}}},[t._v(" "+t._s(t.$t("nat.addIp"))+" ")]):t._e()],1)})),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submitForm}},[t._v(" "+t._s(t.$t("common.establish")))])],1)],2)],1)],1)},s=[],n=(a("99af"),a("a623"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("d81d"),a("13d5"),a("45fc"),a("a434"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("2532"),a("841c"),a("159b"),a("2909")),o=(a("96cf"),a("1da1")),r=a("3995"),c=a("8491"),l=(a("18c9"),a("4873")),p=a("dc57"),u={metaInfo:function(){return{title:this.$t("common.establish")+"NAT"+this.$t("common.gateway")}},data:function(){var t=this;return{isWidthBandShow:!0,loading:!1,activeId:0,tempMemory:0,bandwidth:0,systemDisk:50,isAdvance:!1,node:{nat_acl:1,nat_web:1},vpc_ips:{vpc1:{tips:this.$t("cloud.range1"),value:10,select:[10,172,192]},vpc2:0,vpc3:0,vpc3Tips:"",vpc4:0,vpc4Tips:"",vpc6:{value:16,select:[16,17,18,19,20,21,22,23,24,25,26,27,28]},min:0,max:255},ip_id:[],ip_num:0,addCloudsForm:{ipSelects:[{id:"",key:Date.now()}],name:"",system_disk_size:void 0,area:"",node:"",cpu:1,memory:1,gid:void 0,osGroupSvg:void 0,os:void 0,in_bw:0,out_bw:1,network_type:"vpc",vpc:void 0,vpc_name:void 0,store:void 0,client:void 0,client_name:"",hostname:"",rootpass:"",port:null,ip_num:1,ipSelectOptions:[],data_disk_size:0,ipType:"",ip:void 0,curIpId:"",num:1,link_clone:0,max_connect:2e3,ipaddress:[],ip_group:void 0,template:void 0,backup_num:3,snap_num:3,nat_acl_limit:-1,nat_web_limit:-1,security_group:0,security_group_name:"",other_data_disk:[],cpu_limit:this.$store.state.config.cpu_limit_percent,vpc_ips:""},cpu_limit:this.$store.state.config.cpu_limit_switch,template:{isTemplate:!1,client:0,list:[],clientSelectOptions:[]},ip:{isIpAddress:!1,groupId:null,grouplist:[],list:[]},ipFreeList:[],natAcl:!1,natWeb:!1,backup:!0,safeGroup:!1,snap:!0,dataDisk:!1,addCloudFormRuls:{curIpId:{required:!0,message:this.$t("common.chooseIp"),trigger:"blur"},backup_num:{required:!0,message:this.$t("cloud.pleaseEnterBackup"),trigger:"blur"},template:{required:!0,message:this.$t("cloud.selectATemplate"),trigger:"blur"},snap_num:{required:!0,message:this.$t("cloud.pleaseEnterASnapshot"),trigger:"blur"},nat_acl_limit:{required:!0,message:this.$t("cloud.pleaseEnterNatForwarding"),trigger:"blur"},nat_web_limit:{required:!0,message:this.$t("cloud.enterNatStation"),trigger:"blur"},vpc_name:[{required:!0,message:this.$t("cloud.NetworkName"),trigger:"blur"},{validator:this.$validate.validateVpcName,trigger:"blur"}],vpc:[{required:!0,message:this.$t("cloud.pleaseSelectANetwork"),trigger:"change"}],os:[{required:!0,message:this.$t("cloud.selectSystem"),trigger:"change"}],network_type:[{required:!0,message:this.$t("cloud.pleaseSelectANetwork"),trigger:"change"}],ip_num:[{required:!0,message:this.$t("common.enterIpSegment"),trigger:"blur"}],port:[{required:!0,message:this.$t("common.enterPost"),trigger:"blur"},{validator:this.$validate.validatePort,trigger:"blur"}],hostname:[{required:!0,message:this.$t("cloud.pleaseEnterTheHostName"),trigger:"blur"},{pattern:/^\S*(?=\S{8,})(?=\S*\d)(?=\S*[A-Za-z])(?!\S*[。=+!@#$%^&*()])\S*$/,message:this.$t("common.pleaseEnterTheCorrectHostName")}],rootpass:[{required:!0,message:this.$t("common.pleaseEnterYourPassword"),trigger:"blur"},{pattern:/^[a-zA-Z0-9\u4e00-\u9fa5]{6,}$/,message:this.$t("common.pleaseEnterTheCorrectPassword")}],vpc_ips:{required:!0,message:this.$t("common.enterInternalIpSegment"),trigger:"blur"},max_connect:[{required:!0,message:this.$t("common.input")+this.$t("common.Maximum"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope2(e,a,i,100,5e5)},trigger:"change"}],name:[{required:!0,message:this.$t("common.namePlaceholder"),trigger:"blur"},{pattern:/^[a-zA-Z0-9-_\u4e00-\u9fa5]{1,20}$/,message:this.$t("nat.tip1")}]},memoryUnit:"GB",bandwidthUnit:"Mbps",areaSelectOptions:[],imageGroupOptions:[],imageOptions:[],clientSelectOptions:[],networkSelectOptions:[],storeSelectOptions:[],safeSelectOptions:[],noMemory:!1,ipTypeSelect:[{name:this.$t("common.ipQuantity"),id:"ipNum"}],userParams:{search:"",page:1,per_page:20,sort:"asc"},isLoading:!1,userTotal:0,searchTotal:0,loadingUser:!1}},watch:{isAdvance:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=a.$refs.addCloudsForm.fields,e.map((function(t){var e=[["ip_num","ipaddress","backup_num","snap_num","nat_acl_limit","nat_web_limit","store","data_disk_size"]];if(e.includes(t.prop))return t.resetField(),!1})),a.dataDisk=!1,a.addCloudsForm.ip_num=1,a.ip.isIpAddress=!1,a.addCloudsForm.ip_group=void 0;case 6:case"end":return t.stop()}}),t)})))()},"addCloudsForm.nat_web_limit":function(t){t>=0&&(this.addCloudsForm.network_type="vpc")},"addCloudsForm.nat_acl_limit":function(t){t>=0&&(this.addCloudsForm.network_type="vpc")},"template.client":{handler:function(t){this.getTemplateList(t)}},minSystemDisk:function(t){this.template.isTemplate&&this.systemDisk<t?this.systemDisk=t:this.template.isTemplate||(this.systemDisk=50)},storeCeph:function(t){t||(this.addCloudsForm.store=void 0)},"addCloudsForm.gid":function(t){this.systemDisk=1===t?this.$store.state.config.system_disk_size_for_windows:this.$store.state.config.system_disk_size_for_other},vpcIps:{handler:function(t){this.addCloudsForm.vpc_ips=t},immediate:!0,deep:!0}},computed:{vpcName:function(){var t=this,e=this.networkSelectOptions.find((function(e){return e.id===t.addCloudsForm.vpc}));return e?e.ips:""},vpcIps:function(){if(void 0!==this.vpc_ips.vpc2&&void 0!==this.vpc_ips.vpc3&&void 0!==this.vpc_ips.vpc4){var t=this.vpc_ips.vpc1.value+"."+this.vpc_ips.vpc2+"."+this.vpc_ips.vpc3+"."+this.vpc_ips.vpc4+"/"+this.vpc_ips.vpc6.value;return t}return""},filterIpList:function(){var t=[];t=this.ip_id.filter((function(t){return 0!==t}));var e=[];return e=this.ipFreeList.map((function(e){return e.disabled=!1,t.includes(e.id)&&(e.disabled=!0),e})),e}},methods:{getFreeIp:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={node:t.addCloudsForm.node,uid:t.addCloudsForm.client},e.next=4,l["a"].getIpFreeList(a);case 4:i=e.sent,s=[],i.forEach((function(t){s=Object(n["a"])(t.ip)})),s=s.map((function(t){return t.disabled=!1,t})),t.ipFreeList=s,0===t.ipFreeList.length&&(t.ipFreeList.push({id:0,ip:t.$t("nat.createIp"),disabled:!1}),t.addCloudsForm.curIpId=0),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),t.$message.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},changeFreeIp:function(t,e){this.ip_id.splice(e,1,t),this.ipFreeList=this.ipFreeList.map((function(e){return e.id===t&&0!==t&&(e.disabled=!0),e}))},addIp:function(t){if(""===this.addCloudsForm.ipSelects[t].id)return this.$message.error(this.$t("common.chooseIp"));var e=this.ipFreeList.filter((function(t){return 0!==t.id})).every((function(t){return!0===t.disabled})),a=this.ipFreeList.some((function(t){return 0===t.id}));e&&!a&&this.ipFreeList.unshift({id:0,ip:this.$t("nat.createIp"),disabled:!1}),this.addCloudsForm.ipSelects.push({id:e?0:"",key:Date.now()})},deleteIp:function(t){var e=this;this.ipFreeList=this.ipFreeList.map((function(a){return a.id===e.ip_id[t]&&(a.disabled=!1),a})),this.addCloudsForm.ipSelects.splice(t,1),this.ip_id.splice(t,1)},changeIsWidthBandShow:function(){"0"===this.addCloudsForm.ip_num?this.isWidthBandShow=!1:this.isWidthBandShow=!0},changeVpc3:function(){switch(this.vpc_ips.vpc6.value){case 16:this.vpc_ips.vpc3=0;break;case 17:this.vpc_ips.vpc3=this.near([0,128],this.vpc_ips.vpc3);break;case 18:this.vpc_ips.vpc3=this.near([0,64,128,192],this.vpc_ips.vpc3);break;case 19:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(32,224))),this.vpc_ips.vpc3);break;case 20:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(16,240))),this.vpc_ips.vpc3);break;case 21:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(8,248))),this.vpc_ips.vpc3);break;case 22:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(4,252))),this.vpc_ips.vpc3);break;case 23:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(2,254))),this.vpc_ips.vpc3);break}},changeVpc4:function(){switch(this.vpc_ips.vpc6.value){case 25:this.vpc_ips.vpc4=this.near([0,128],this.vpc_ips.vpc4);break;case 26:this.vpc_ips.vpc4=this.near([0,64,128,192],this.vpc_ips.vpc4);break;case 27:this.vpc_ips.vpc4=this.near([0].concat(Object(n["a"])(this.productArr(32,224))),this.vpc_ips.vpc4);break;case 28:this.vpc_ips.vpc4=this.near([0].concat(Object(n["a"])(this.productArr(16,240))),this.vpc_ips.vpc4);break}},productArr:function(t,e,a){for(var i=[],s=t;s<e+1;s+=t)i.push(s);return i},near:function(t,e){return t.sort((function(t,a){return Math.abs(t-e)-Math.abs(a-e)})),t[0]},changeVpcMask:function(t){switch(t){case 16:this.vpc_ips.vpc3=0,this.vpc_ips.vpc4=0;break;case 17:this.vpc_ips.vpc3=this.near([0,128],this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range2"),this.vpc_ips.vpc4=0;break;case 18:this.vpc_ips.vpc3=this.near([0,64,128,192],this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range3"),this.vpc_ips.vpc4=0;break;case 19:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(32,224))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range4"),this.vpc_ips.vpc4=0;break;case 20:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(16,240))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range5"),this.vpc_ips.vpc4=0;break;case 21:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(8,248))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range6"),this.vpc_ips.vpc4=0;break;case 22:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(4,252))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range7"),this.vpc_ips.vpc4=0;break;case 23:this.vpc_ips.vpc3=this.near([0].concat(Object(n["a"])(this.productArr(2,254))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range8"),this.vpc_ips.vpc4=0;break;case 24:this.vpc_ips.vpc3Tips=this.$t("cloud.range9"),this.vpc_ips.vpc4=0;break;case 25:this.vpc_ips.vpc4=this.near([0,128],this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range2"),this.vpc_ips.vpc3Tips=this.$t("cloud.range9");break;case 26:this.vpc_ips.vpc4=this.near([0,64,128,192],this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range3"),this.vpc_ips.vpc3Tips=this.$t("cloud.range9");break;case 27:this.vpc_ips.vpc4=this.near([0].concat(Object(n["a"])(this.productArr(32,224))),this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range4"),this.vpc_ips.vpc3Tips=this.$t("cloud.range9");break;case 28:this.vpc_ips.vpc4=this.near([0].concat(Object(n["a"])(this.productArr(16,240))),this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range5"),this.vpc_ips.vpc3Tips=this.$t("cloud.range9");break}},changeVPC:function(t){0===t&&(this.addCloudsForm.vpc_name="VPC-"+Math.random().toString(36).substr(2,8))},changeVpcIp:function(){switch(this.vpc_ips.vpc1.value){case 10:this.vpc_ips.vpc1.tips=this.$t("cloud.range9"),this.vpc_ips.min=0,this.vpc_ips.max=255;break;case 172:this.vpc_ips.vpc1.tips=this.$t("cloud.range10"),(this.vpc_ips.vpc2<16||this.vpc_ips.vpc2>31)&&(this.vpc_ips.vpc2=16),this.vpc_ips.min=16,this.vpc_ips.max=31;break;case 192:this.vpc_ips.vpc1.tips=this.$t("cloud.range11"),this.vpc_ips.vpc2=168,this.vpc_ips.min=168,this.vpc_ips.max=168;break}},changeIpProp:function(){this.ip.isIpAddress?this.isWidthBandShow=!0:this.changeIsWidthBandShow();var t=this.$refs.addCloudsForm.fields;t.map((function(t){if("ip_num"===t.prop||"ipaddress"===t.prop)return t.resetField(),!1}))},getIpCreated:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].getIpGroupsReq({list_type:"all",area:t.addCloudsForm.area,node:t.addCloudsForm.node});case 2:a=e.sent,i=a.data,i&&i.unshift({id:void 0,name:t.$t("common.automatic")}),t.ip.grouplist=i;case 6:case"end":return e.stop()}}),e)})))()},changeIpGroup:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.addCloudsForm.ipaddress=[],t.ip.list=[],e.next=4,r["a"].getIpFreeReq({ip_group:t.addCloudsForm.ip_group,node:t.addCloudsForm.node,area:t.addCloudsForm.area});case 4:a=e.sent,t.ip.list=a;case 6:case"end":return e.stop()}}),e)})))()},changeIp:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.addCloudsForm.ipaddress.length>0?(t.isWidthBandShow=!0,t.addCloudsForm.num=1):t.isWidthBandShow=!1;case 1:case"end":return e.stop()}}),e)})))()},getArea:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getCloudsCreatePage().then((function(e){(e.data||[]).forEach((function(e,a){e.selectNode=0===a?0:void 0,e.node.unshift({id:0,name:t.$t("common.automatic"),store:[]})})),t.areaSelectOptions=e.data,e.data.length&&(t.activeId=e.data[0].id,t.addCloudsForm.area=e.data[0].id,t.getVpc(),e.data[0].store.length?(t.storeSelectOptions=e.data[0].store,t.addCloudsForm.store=void 0,t.noMemory=!1):t.noMemory=!0)}),(function(e){t.$message.error(e.data.error)}));case 2:case"end":return e.stop()}}),e)})))()},areaSelectChange:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.activeId!==t&&(this.activeId=t,(this.areaSelectOptions||[]).forEach((function(i){t!==i.id?(i.selectNode=void 0,e.addCloudsForm.node=void 0):(e.addCloudsForm.area=i.id,a&&(i.selectNode=0),i.store.length?(e.storeSelectOptions=i.store,e.noMemory=!1):(e.noMemory=!0,e.storeSelectOptions=[],e.addCloudsForm.store=void 0))})),a&&this.getVpc())},nodeSelectChange:function(t,e,a){var i=this;this.areaSelectChange(e,!1),this.addCloudsForm.node=t,this.getVpc(),this.getIpCreated(),this.ip.isIpAddress&&this.changeIpGroup(),this.getTemplateList(),(this.areaSelectOptions||[]).forEach((function(e){(e.node||[]).forEach((function(a){t===a.id&&(a.store.length?(i.storeSelectOptions=a.store,i.noMemory=!1,i.node=a):(i.noMemory=!0,i.addCloudsForm.store=void 0,i.storeSelectOptions=e.store,i.node={nat_web:1,nat_acl:1}))}))})),this.getFreeIp()},remoteMethod:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""===t){a.next=13;break}return e.loadingUser=!0,e.userTotal=0,e.userParams.search=t,e.userParams.page=1,a.next=7,e.$api.loadUserPage(e.userParams);case 7:i=a.sent,e.clientSelectOptions=i.data,e.searchTotal=i.meta.total,e.loadingUser=!1,a.next=19;break;case 13:return e.userParams.page=1,e.userParams.search="",a.next=17,e.$api.loadUserPage(e.userParams);case 17:s=a.sent,e.clientSelectOptions=s.data;case 19:case"end":return a.stop()}}),a)})))()},clearHandler:function(){this.userParams.search="",this.userParams.page=1,this.getUserList()},loadMore:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.clientSelectOptions.length<t.userTotal&&!t.isLoading||t.clientSelectOptions.length<t.searchTotal&&!t.isLoading)){e.next=8;break}return t.userParams.page+=1,t.isLoading=!0,e.next=5,t.$api.loadUserPage(t.userParams);case 5:a=e.sent,t.isLoading=!1,a.data.forEach((function(e){t.clientSelectOptions.push(e)}));case 8:case"end":return e.stop()}}),e)})))()},getUserList:function(){var t=this;this.$api.loadUserPage(this.userParams).then((function(e){t.template.clientSelectOptions=JSON.parse(JSON.stringify(e.data)),t.userTotal=e.meta.total,t.template.clientSelectOptions.unshift({id:0,username:t.$t("cloud.allCustomers")}),e.data.unshift({id:0,username:t.$t("cloud.createNewCustomers")}),t.clientSelectOptions=e.data,t.addCloudsForm.client=1,t.getVpc()}),(function(e){t.$message.error(e.data.error)}))},getVpc:function(){var t=this;this.addCloudsForm.ipSelects=[],this.addCloudsForm.ipSelects.push({id:"",key:Date.now()});var e={area:this.addCloudsForm.area,user:this.addCloudsForm.client,enable:1};this.$api.getVpcNetworks(e).then((function(e){e&&e.data.length?(t.addCloudsForm.vpc=0===t.addCloudsForm.client?0:e.data[0].id,t.networkSelectOptions=e.data):(t.networkSelectOptions=[],t.addCloudsForm.vpc="")}),(function(e){t.$message.error(e.data.error)})),this.$api.getSafeGroupRes({list_type:"all",user:this.addCloudsForm.client}).then((function(e){e&&e.data.length?(t.addCloudsForm.security_group=0===t.addCloudsForm.client?0:e.data[0].id,t.safeSelectOptions=e.data):(t.networkSelectOptions=[],t.addCloudsForm.security_group=0),t.safeSelectOptions.unshift({id:0,name:t.$t("cloud.createASecurityGroup")})})),this.getFreeIp()},getIpAdressList:function(){this.addCloudsForm.ipType=this.ipTypeSelect[0].id},getTemplateList:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.template.list=[],e.addCloudsForm.template=void 0,i={user:t,list_type:"all",status:1,area:e.addCloudsForm.area,node:0===e.addCloudsForm.node?void 0:e.addCloudsForm.node},a.next=5,c["a"].modelListReq(i);case 5:if(s=a.sent,n=s.data,n){a.next=9;break}return a.abrupt("return",!1);case 9:e.template.list=n,e.template.list&&e.template.list.length>0&&(e.$route.query.template&&0===e.template.client?(e.template.isTemplate=!0,e.addCloudsForm.template=parseInt(e.$route.query.template)):e.addCloudsForm.template=e.template.list[0].id);case 11:case"end":return a.stop()}}),a)})))()},submitForm:Object(p["b"])((function(){var t=this;"GB"===this.memoryUnit?this.addCloudsForm.memory=1024*this.tempMemory:this.addCloudsForm.memory=this.tempMemory,"Gbps"===this.bandwidthUnit?this.addCloudsForm.in_bw=1024*this.bandwidth:this.addCloudsForm.in_bw=this.bandwidth,this.addCloudsForm.out_bw=this.addCloudsForm.in_bw;var e={};e.uid=this.addCloudsForm.client,e.node=this.addCloudsForm.node,e.area=this.addCloudsForm.area,e.name=this.addCloudsForm.name,e.vpc=this.addCloudsForm.vpc,e.bw=this.addCloudsForm.in_bw,e.ip_id=this.ip_id.filter((function(t){return 0!==t})),e.ip_num=this.ip_id.reduce((function(t,e){return 0===e&&(t+=1),t}),0),this.$refs.addCloudsForm.validate(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i){a.next=2;break}return a.abrupt("return",!1);case 2:return t.loading=!0,a.prev=3,a.next=6,l["a"].createNat(e);case 6:t.$message.success(t.$t("cloud.createSuccess")),t.$router.push("/nat_gateway"),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),t.$message.error(a.t0.data.error);case 13:return a.prev=13,t.loading=!1,a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[3,10,13,16]])})));return function(t){return a.apply(this,arguments)}}())}),1e3)},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return document.onkeydown=function(e){var a=e;13===a.keyCode&&t.submitForm()},e.next=3,t.getArea();case 3:t.getUserList(),t.getTemplateList(),t.getIpCreated(),t.getIpAdressList(),t.addCloudsForm.name="nat-"+Math.random().toString(36).substr(2,20),t.getFreeIp();case 9:case"end":return e.stop()}}),e)})))()}},d=u,m=(a("2c7d"),a("2877")),h=Object(m["a"])(d,i,s,!1,null,"354d4a15",null);e["default"]=h.exports},"1f9c":function(t,e,a){},"20b7":function(t,e,a){"use strict";var i=a("3c08"),s=a.n(i);s.a},2402:function(t,e,a){"use strict";var i=a("1b57"),s=a.n(i);s.a},"25dc":function(t,e,a){"use strict";var i=a("1f9c"),s=a.n(i);s.a},"2c7d":function(t,e,a){"use strict";var i=a("768b"),s=a.n(i);s.a},"3c08":function(t,e,a){},"3df1":function(t,e,a){},4873:function(t,e,a){"use strict";a("99af");var i=a("a27e");e["a"]={getNatList:function(t){return Object(i["b"])("/nat_gateway",t)},getIpFreeList:function(t){return Object(i["b"])("/ip/free",t)},createNat:function(t){return Object(i["c"])("/nat_gateway",t)},updateNat:function(t,e){return Object(i["d"])("/nat_gateway/".concat(t),e)},updateNatMark:function(t,e){return Object(i["d"])("/nat_gateway/".concat(t,"/remark"),e)},getNatDetail:function(t){return Object(i["b"])("/nat_gateway/".concat(t))},deleteNat:function(t,e){return Object(i["a"])("/nat_gateway/".concat(t),e)},backNat:function(t){return Object(i["a"])("nat_gateway/recycle_bin",t)},changeVpc:function(t,e){return Object(i["d"])("/nat_gateway/".concat(t,"/vpc_network"),e)},lockNat:function(t){return Object(i["c"])("nat_gateway/".concat(t,"/lock"))},unlockNat:function(t){return Object(i["c"])("nat_gateway/".concat(t,"/unlock"))},getNatIpList:function(t,e){return Object(i["b"])("nat_gateway/".concat(t,"/ip"),e)},getNatLog:function(t,e){return Object(i["b"])("/nat_gateway/".concat(t,"/log"),e)},getNatChart:function(t,e){return Object(i["b"])("/nat_gateway/".concat(t,"/chart"),e)},getNatChartTotal:function(t){return Object(i["b"])("/nat_gateway/".concat(t,"/chart_total"))},setOutIp:function(t,e){return Object(i["d"])("nat_gateway/".concat(t,"/outip"),e)},getNatAclList:function(t,e){return Object(i["b"])("/nat_gateway/".concat(t,"/nat_acl"),e)},addNatAcl:function(t,e){return Object(i["c"])("nat_gateway/".concat(t,"/nat_acl"),e)},deleteNatAcl:function(t,e){return Object(i["a"])("/nat_gateway/".concat(t,"/nat_acl/").concat(e))},addNatIp:function(t,e){return Object(i["c"])("nat_gateway/".concat(t,"/ip"),e)},deleteNatIp:function(t,e){return Object(i["a"])("nat_gateway/".concat(t,"/ip"),e)},updateBw:function(t,e){return Object(i["d"])("/nat_gateway/".concat(t,"/bw"),e)},getTaskStatus:function(t){return Object(i["b"])("/tasks/".concat(t))},getNatCaseList:function(t,e){return Object(i["b"])("/nat_gateway/".concat(t,"/clouds"),e)}}},5241:function(t,e,a){"use strict";var i=a("bec4"),s=a.n(i);s.a},5872:function(t,e,a){"use strict";a.r(e);var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homepage"},[a("div",{staticClass:"content-box"},[a("div",{staticClass:"crumbs-wrapper"},[a("crumbs",{attrs:{id:t.id}})],1),a("div",{staticClass:"container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:24,lg:12}},[a("div",{staticClass:"container-item"},[a("div",{staticClass:"top-up"},[a("div",{staticClass:"top-up-first"},[a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"button-wrapper"},[a("span",{staticClass:"sprite start"}),1===t.balanceData.lock?a("el-tooltip",{attrs:{content:t.$t("common.theInstanceIsLocked")}},[a("div",{staticClass:"lock"},[a("i",{staticClass:"iconfont icon-zu"})])]):t._e()],1)]),a("div",{staticClass:"computer-ip"},[a("div",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.balanceData.name,expression:"balanceData.name"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"ip-info"},[a("span",{staticClass:"ip-info-text"},[t._v(t._s(t.balanceData.name))]),a("span",{staticClass:"el-icon-document-copy"})]),a("div",{staticClass:"cloud-bz",on:{click:function(e){t.handleClickDialogShow(t.$t("common.modifyRemarks"),"remark")}}},[t.balanceData.remark?a("span",{staticClass:"editpass-mes"},[t._v(t._s(t.balanceData.remark))]):a("span",{staticClass:"editpass-mes"},[t._v(t._s(t.$t("common.remarkInformation")))]),a("span",{staticClass:"icon-editpass"})])]),a("div",{staticClass:"right-box"},[a("div",{staticClass:"computer-info"},[a("div",{staticClass:"computer-info-item ml-20"},[a("div",{staticClass:"item-text"},[t._v(t._s(t.$t("common.bandwidth"))+" "),a("span",{staticClass:"ml-5"},[t._v(t._s(t.balanceData.bw)+"Mbps")])])]),t.isAgent||!t.isCursomerVersion?a("div",{staticClass:"editIcon-wrapper",on:{click:t.handleUpdateBw}},[a("span",{staticClass:"icon-editpass",staticStyle:{color:"#3673ff !important"}})]):t._e()])])]),a("div",{staticClass:"top-up-second"},[a("div",{staticClass:"wiondw-iconWrapper"},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticClass:"img",attrs:{src:t.$globalUrl+"/common/system/"+t.balanceData.svg+".svg",alt:""}})]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.balanceData.vpc_name,placement:"top"}},[a("div",{staticClass:"window-text text-ellipsis"},[t._v(t._s(t.balanceData.vpc_name))])])],1),a("div",{staticClass:"computeOperation-button"},[[a("el-button",{staticClass:"elButton",attrs:{size:"small",type:"primary"},on:{click:t.lockNat}},[t._v(" "+t._s(t.balanceData.lock?t.$t("common.unlock"):t.$t("common.locking"))+" ")]),a("el-button",{staticClass:"elButton",attrs:{size:"small",type:"primary"},on:{click:t.delNat}},[t._v(" "+t._s(t.$t("common.delete"))+" ")]),a("el-button",{staticClass:"elButton",attrs:{size:"small",type:"primary"},on:{click:t.changeVpc}},[t._v(" "+t._s(t.$t("nat.changeVpc"))+" ")])]],2)])]),a("div",{staticClass:"computerInfo-moudle"},[a("computerInfo-moudle",{ref:"computerInfoMoudle",attrs:{id:t.balanceData.id,balanceData:t.balanceData},on:{refreshCloudStatus:t.refreshCloudStatus}})],1),a("div",{staticClass:"computerInfo-moudle"},[a("computerInfo-logData",{ref:"ComputerInfoLogData",attrs:{id:t.id,cloudDetailInfo:t.cloudDetailInfo},on:{refreshCloudStatus:t.refreshCloudStatus}})],1)])]),a("el-col",{attrs:{md:24,lg:12}},[a("div",{staticClass:"container-item"},[a("div",{staticClass:"info-wrapper-item"},[a("div",{staticClass:"info-header flow",staticStyle:{display:"flex","justify-content":"space-between","align-items":"center","margin-right":"15px"}},[a("div",{staticClass:"info-header-text"},[t._v(t._s(t.$t("common.trafficBillingStatistics")))]),a("div",{staticStyle:{display:"flex"}},[t.isCursomerVersion?t._e():a("div",{staticClass:"flow-title",on:{click:function(e){return t.clearFlow("limit")}}},[t._v(" "+t._s(t.$t("common.billingSettings")))])])]),a("div",{staticClass:"table-wrapper"},[a("el-table",{attrs:{data:t.flowStatistics,"row-style":t.rowStyle,"cell-class-name":t.callPolice}},[a("el-table-column",{attrs:{prop:"type",label:t.$t("common.typesOf")}}),a("el-table-column",{attrs:{prop:"accept",label:t.$t("common.inflow")}}),a("el-table-column",{attrs:{prop:"send",label:t.$t("common.outflow1")}}),a("el-table-column",{attrs:{prop:"total",label:t.$t("common.total1")}}),a("el-table-column",{attrs:{prop:"percent",label:t.$t("common.percentage")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(a.percent))]}}])})],1)],1)]),a("div",{staticClass:"info-wrapper-item"},[a("el-tabs",{staticClass:"elastic",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:t.$t("nat.elastic")+"IP",name:"elastic"}},[a("el-table",{attrs:{height:"200",data:t.showGroupList,width:"100%"}},[a("el-table-column",{attrs:{prop:"ip",label:t.$t("common.ipAddress")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.ip&&i.ip[0]?a("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openDialog(i,!1)}}},[a("span",[t._v(t._s(i.ip[0].ip))]),a("span",{staticStyle:{color:"#3673ff"}},[t._v("("+t._s(i.ip.length)+")")])]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"out_bw",label:t.$t("common.bandwidthInOut")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.bw)+"Mbps ")]}}])}),t.isCursomerVersion?t._e():a("el-table-column",{attrs:{label:t.$t("common.manage"),"min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleUpdateBw(i)}}},[t._v(" "+t._s(t.$t("common.modifyBandwidth"))+" ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.addtabsInfo()}}},[t._v(" "+t._s(t.$t("common.add")+t.$t("common.ipAddress"))+" ")])],1)]}}],null,!1,1854385860)})],1)],1)],1)],1),a("div",{staticClass:"info-wrapper-item"},[a("div",{staticClass:"link"}),a("div",{staticClass:"echartsOne-wrapper-card"},[a("el-tabs",{model:{value:t.activeEchartsName,callback:function(e){t.activeEchartsName=e},expression:"activeEchartsName"}},[a("el-tab-pane",{attrs:{label:t.$t("common.networkCard"),name:"cloudNetwork"}}),a("el-tab-pane",{attrs:{label:t.$t("common.dosage"),name:"serveNetwork"}}),a("el-tab-pane",{attrs:{label:t.$t("common.packetForwardingRate"),name:"cloudPPS"}})],1)],1),a("div",{staticClass:"flowEchartWrapper",staticStyle:{padding:"10px 40px 20px"}},[a("flowEcharts",{ref:"flowEcharts",attrs:{nodeId:t.id,kvm:t.cloudInfo.kvm,type:t.activeEchartsName,diskInfo:t.cloudDetailInfo.disk,networkInfo:t.netTableData,toDayDate:t.balanceData.create_time}})],1)])])])],1)],1)]),a("el-dialog",{attrs:{title:t.flowInfoModel.title,visible:t.flowInfoModel.show,width:"530px"},on:{"update:visible":function(e){return t.$set(t.flowInfoModel,"show",e)}}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"flowInfoModelRef",attrs:{model:t.flowInfoModel,size:"medium","label-width":"140px",rules:t.flowInfoModelRule,"label-position":t.$globalConfig.labelPosition}},[a("el-form-item",{attrs:{label:t.$t("common.limitTraffic"),prop:"traffic_quota"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",placeholder:t.$t("common.enterNewQuotaTraffic"),autocomplete:"off"},model:{value:t.flowInfoModel.traffic_quota,callback:function(e){t.$set(t.flowInfoModel,"traffic_quota",t._n(e))},expression:"flowInfoModel.traffic_quota"}})],1),a("el-form-item",{attrs:{label:t.$t("common.temporaryTraffic"),prop:"tmp_traffic"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",placeholder:t.$t("common.enterNewTemporaryTraffic"),autocomplete:"off"},model:{value:t.flowInfoModel.tmp_traffic,callback:function(e){t.$set(t.flowInfoModel,"tmp_traffic",t._n(e))},expression:"flowInfoModel.tmp_traffic"}})],1),a("el-form-item",{attrs:{label:t.$t("common.statisticalDirection")}},[a("el-radio-group",{model:{value:t.flowInfoModel.traffic_type,callback:function(e){t.$set(t.flowInfoModel,"traffic_type",e)},expression:"flowInfoModel.traffic_type"}},[a("el-radio",{attrs:{label:1}},[t._v(t._s(t.$t("common.inTheDirection")))]),a("el-radio",{attrs:{label:2}},[t._v(t._s(t.$t("common.direction")))]),a("el-radio",{attrs:{label:3}},[t._v(t._s(t.$t("common.total1")))])],1)],1),a("el-form-item",{attrs:{label:t.$t("common.trafficResetDay")}},[a("template",{slot:"label"},[a("span",[t._v(t._s(t.$t("common.trafficResetDay")))]),a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:t.$t("common.msg79")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),a("div",{staticClass:"fboxRow Ycenter"},[a("span",{staticClass:"mr-10"},[t._v(t._s(t.$t("common.perMonth")))]),a("el-select",{model:{value:t.flowInfoModel.reset_flow_day,callback:function(e){t.$set(t.flowInfoModel,"reset_flow_day",e)},expression:"flowInfoModel.reset_flow_day"}},t._l(30,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1),a("span",{staticClass:"ml-10"},[t._v(t._s(t.$t("common.number7")))])],1)],2),a("el-alert",{attrs:{title:t.$t("common.msg14"),type:"error",closable:!1}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.flowInfoModel.show=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.updateCloud}},[t._v(t._s(t.$t("common.sure")))])],1)],1),a("deleteDialog",{staticClass:"deleteDialog",attrs:{isShowDelDialog:t.delInfo.isShowDelDialog,custom:t.delInfo.custom},on:{submitDeleteRow:t.submitDeleteRow,"update:isShowDelDialog":function(e){return t.$set(t.delInfo,"isShowDelDialog",e)},"update:is-show-del-dialog":function(e){return t.$set(t.delInfo,"isShowDelDialog",e)}},scopedSlots:t._u([{key:"radio",fn:function(){return[a("div",{staticClass:"mt-20 mb-20"},[a("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v(t._s(t.$t("common.forcedDelete"))+" "),a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:t.$t("nat.forcedDelete")}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1)],1)]},proxy:!0}])}),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.isEditDialogShow,width:"500px"},on:{"update:visible":function(e){t.isEditDialogShow=e}}},[a("div",{staticStyle:{"padding-left":"50px"}},[a("span",[t._v(t._s(t.$t("common.remarkInformation"))+":")]),t._v(" "),a("el-input",{staticStyle:{display:"inline-block",width:"300px"},model:{value:t.editInfo,callback:function(e){t.editInfo=e},expression:"editInfo"}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isEditDialogShow=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.editRemark}},[t._v(t._s(t.$t("common.sure")))])],1)]),a("el-dialog",{attrs:{title:t.$t("common.modifyBandwidth"),visible:t.isBandWidthDialogShow,width:"500px"},on:{"update:visible":function(e){t.isBandWidthDialogShow=e},close:function(e){return t.$refs.bandwidth.resetFields()}}},[a("el-row",[a("el-col",{attrs:{span:20,offset:2}},[a("el-form",{ref:"bandwidth",attrs:{model:t.bandwidth,rules:t.bandwidthRules}},[a("el-form-item",{attrs:{label:t.$t("common.bandwidth"),"label-width":"80px",prop:"bw"}},[a("el-input",{staticStyle:{width:"260px"},model:{value:t.bandwidth.bw,callback:function(e){t.$set(t.bandwidth,"bw",t._n(e))},expression:"bandwidth.bw"}}),t._v(" "),a("span",[t._v("Mbps")])],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isBandWidthDialogShow=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAddBandwidth}},[t._v(t._s(t.$t("common.sure")))])],1)],1),a("el-dialog",{attrs:{title:t.$t("nat.changeVpc"),visible:t.isVpcDialogShow,width:"500px"},on:{"update:visible":function(e){t.isVpcDialogShow=e}}},[a("div",{staticStyle:{padding:"0 30px"}},[a("span",[t._v("VPC")]),t._v(" "),a("el-select",{attrs:{placeholder:t.$t("image.placeholder")},model:{value:t.curVpcId,callback:function(e){t.curVpcId=e},expression:"curVpcId"}},t._l(t.vpcList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("el-tag",{staticClass:"danger tag-danger",attrs:{type:"danger"}},[t._v(t._s(t.$t("nat.changTip")))])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isVpcDialogShow=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.editVpc}},[t._v(t._s(t.$t("common.sure")))])],1)]),a("el-dialog",{attrs:{title:t.$t("common.ipAddress"),visible:t.elasticDialogVisible,width:"30%"},on:{"update:visible":function(e){t.elasticDialogVisible=e}}},[a("el-table",{attrs:{data:t.elasticList}},[a("el-table-column",{attrs:{prop:"ip",label:"IP",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(t._s(i.ip)+" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:i.ip,expression:"row.ip"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})]}}])}),a("el-table-column",{attrs:{prop:"subnet_mask",label:t.$t("common.mask"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(a.subnet_mask))]}}])}),a("el-table-column",{attrs:{prop:"gateway",label:t.$t("common.gateway")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(a.gateway))]}}])})],1)],1),a("el-dialog",{attrs:{title:t.$t("common.add")+t.$t("common.ipAddress"),visible:t.ipDialogShow,width:"500px"},on:{"update:visible":function(e){t.ipDialogShow=e}}},[a("div",{staticStyle:{padding:"0 30px"}},[a("span",[t._v("IP")]),t._v(" "),a("el-select",{attrs:{multiple:"",placeholder:t.$t("image.placeholder")},model:{value:t.curIpId,callback:function(e){t.curIpId=e},expression:"curIpId"}},t._l(t.ipList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.ip,value:t.id}})})),1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.ipDialogShow=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.addIp}},[t._v(t._s(t.$t("common.sure")))])],1)])],1)},n=[],o=(a("99af"),a("7db0"),a("4160"),a("b0c0"),a("b680"),a("159b"),a("ade3")),r=a("2909"),c=(a("96cf"),a("1da1")),l=a("830e"),p=a("b5d2"),u=a("18c9"),d=a("4873"),m=a("8491"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"computerInfo-wrapper"},[a("div",{staticClass:"link"}),t.isShowAddButton?a("div",{staticClass:"showRuns"},[a("div",{staticClass:" showNum-Wrapper mr-10"},[a("span",[t._v(t._s(t.strNum))])]),a("div",{staticClass:"addButton-Wrapper",on:{click:function(e){return t.addBtn("add")}}},[a("i",{staticClass:"el-icon-plus"})])]):t._e(),a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"tabs-item",attrs:{label:t.$t("common.overview"),name:"overview"}},[a("ul",{staticClass:"tabs-ul"},[a("li",{staticClass:"tabs-li information"},[a("span",{staticClass:"li-fields"},[t._v(t._s(t.$t("userList.parent")))]),a("div",{staticClass:"li-normal li-normal-content"},[t._v(t._s(t.balanceData.username))])]),a("li",{staticClass:"tabs-li information"},[a("span",{staticClass:"li-fields"},[t._v("NATID")]),a("div",{staticClass:"li-normal li-normal-content"},[t._v(t._s(t.balanceData.id))])]),a("li",{staticClass:"tabs-li information"},[a("span",{staticClass:"li-fields"},[t._v(t._s(t.$t("common.createdTime")))]),a("div",{staticClass:"li-normal"},[t._v(t._s(t.balanceData.create_time))])])])]),a("el-tab-pane",{staticClass:"tabs-item",attrs:{label:t.$t("common.example5"),name:"example5"}},[a("div",{staticClass:"info-wrapper-item"},[a("div",{staticClass:"table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":t.$t("common.loading"),data:t.natCaseData},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{prop:"status",align:"center",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",cursor:"pointer"},on:{click:function(a){return t.getSingleCloudStatus(e.row)}}},[a("el-tooltip",{attrs:{content:t.statusContent(e.row.status,e.row),right:"",disabled:e.row.statusLoading||"init"===e.row.status||"task"===e.row.status}},[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[e.row.statusLoading||"init"===e.row.status||"task"===e.row.status?a("i",{staticClass:"el-icon-loading"}):"rescue"===e.row.status?a("span",{staticClass:"sprite-rescue"}):"paused"===e.row.status?a("span",{staticClass:"sprite-paused"}):"hot_migrate"===e.row.status?a("span",{staticClass:"hot-migrate"},[a("i",{staticClass:"iconfont icon-shujuqianyi"})]):"cold_migrate"===e.row.status?a("span",{staticClass:"hot-migrate cold-migrate"},[a("i",{staticClass:"iconfont icon-shujuqianyi"})]):a("span",{staticClass:"sprite-status",class:e.row.status})])])],1)]}}])},[a("template",{slot:"header"},[a("i",{staticClass:"el-icon-refresh",staticStyle:{cursor:"pointer"},on:{click:t.getAllCloudStatus}})])],2),a("el-table-column",{attrs:{"class-name":"selection-id",prop:"id",label:"ID",width:"170"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}}])}),a("el-table-column",{attrs:{prop:"hostname",label:t.$t("common.hostName"),"min-width":"160","show-overflow-tooltip":""},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:" Ycenter"},[1===i.lock?a("el-tooltip",{attrs:{content:t.$t("common.theInstanceIsLocked")}},[a("i",{staticClass:"el-icon-lock "})]):t._e(),a("router-link",{staticClass:"text-ellipsis",attrs:{to:{name:"CloudsHome",query:{id:i.id}}}},[a("el-link",{staticClass:"text-ellipsis",attrs:{type:"primary"}},[t._v(t._s(i.hostname))])],1),i.remark?a("div",{staticStyle:{color:"#ccc","font-size":"12px","line-height":"1"}},[t._v(" "+t._s(i.remark))]):t._e()],1)]}}])}),a("el-table-column",{attrs:{prop:"ipaddress",label:t.$t("common.internalNetwork")+"IP","min-width":"150"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(t){var e=t.row;return[a("systemIcon",{attrs:{network_type:e.network_type,mainip:e.mainip,ipaddress:e.ipaddress,transparent:e.transparent,ip_num:e.ip_num+e.ipv6_num,id:e.id,other_interface_ip:e.other_interface_ip}})]}}])}),a("el-table-column",{attrs:{"class-name":"selection-id",prop:"ip",label:t.$t("nat.exportIP")},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var i=e.row;return[t.balanceData.ip.length<=1?a("p",[t._v(t._s(i.ip))]):a("el-select",{attrs:{value:t.ip_id,placeholder:t.$t("common.select")},on:{change:function(e){return t.setOutput(i,t.e)}}},t._l(t.balanceData.ip,(function(t){return a("el-option",{key:t.id,attrs:{label:t.ip,value:t.id}})})),1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.natPage.page,"page-sizes":[5],"page-size":t.natPage.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.natPage.total},on:{"update:currentPage":function(e){return t.$set(t.natPage,"page",e)},"update:current-page":function(e){return t.$set(t.natPage,"page",e)},"size-change":t.getData,"current-change":t.getData,"update:pageSize":function(e){return t.$set(t.natPage,"per_page",e)},"update:page-size":function(e){return t.$set(t.natPage,"per_page",e)}}})],1)],1)])]),a("el-tab-pane",{staticClass:"tabs-item",attrs:{label:t.$t("nat.forward"),name:"forward"}},[a("div",{staticClass:"info-wrapper-item"},[a("div",{staticClass:"info-wrapper-item"},[a("div",{staticClass:"table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":t.$t("common.loading"),data:t.natForwardData},on:{"selection-change":t.selectionChange}},[a("el-table-column",{attrs:{prop:"status",align:"center",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",cursor:"pointer"},on:{click:function(a){return t.getSingleCloudStatus(e.row)}}},[a("el-tooltip",{attrs:{content:t.statusContent(e.row.status,e.row),right:"",disabled:e.row.statusLoading||"init"===e.row.status||"task"===e.row.status}},[a("div",{staticStyle:{display:"flex","justify-content":"center"}},[e.row.statusLoading||"init"===e.row.status||"task"===e.row.status?a("i",{staticClass:"el-icon-loading"}):"rescue"===e.row.status?a("span",{staticClass:"sprite-rescue"}):"paused"===e.row.status?a("span",{staticClass:"sprite-paused"}):"hot_migrate"===e.row.status?a("span",{staticClass:"hot-migrate"},[a("i",{staticClass:"iconfont icon-shujuqianyi"})]):"cold_migrate"===e.row.status?a("span",{staticClass:"hot-migrate cold-migrate"},[a("i",{staticClass:"iconfont icon-shujuqianyi"})]):a("span",{staticClass:"sprite-status",class:e.row.status})])])],1)]}}])},[a("template",{slot:"header"},[a("i",{staticClass:"el-icon-refresh",staticStyle:{cursor:"pointer"},on:{click:t.getAllCloudStatus}})])],2),a("el-table-column",{attrs:{"class-name":"selection-id",prop:"id",label:"ID",width:"100"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}}])}),a("el-table-column",{attrs:{prop:"hostname",label:t.$t("common.hostName"),"min-width":"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:" Ycenter"},[1===i.lock?a("el-tooltip",{attrs:{content:t.$t("common.theInstanceIsLocked")}},[a("i",{staticClass:"el-icon-lock "})]):t._e(),a("router-link",{staticClass:"text-ellipsis",attrs:{to:{name:"CloudsHome",query:{id:i.id}}}},[a("el-link",{staticClass:"text-ellipsis",attrs:{type:"primary"}},[t._v(t._s(i.hostname))])],1),i.remark?a("div",{staticStyle:{color:"#ccc","font-size":"12px","line-height":"1"}},[t._v(" "+t._s(i.remark))]):t._e()],1)]}}])}),a("el-table-column",{attrs:{prop:"ipaddress",label:t.$t("common.internalNetwork")+"IP","min-width":"100"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.ipaddress)+" ")]}}])}),a("el-table-column",{attrs:{prop:"ipaddress",label:t.$t("common.Extranet")+"IP","min-width":"100"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.ip)+" ")]}}])}),a("el-table-column",{attrs:{"class-name":"selection-id",prop:"ip",label:t.$t("common.internalPort")},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.int_port)+" ")]}}])}),a("el-table-column",{attrs:{"class-name":"selection-id",prop:"ip",label:t.$t("nat.outside")+t.$t("common.port")},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.ext_port)+" ")]}}])}),a("el-table-column",{attrs:{label:t.$t("common.manage"),width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.deleteForward(i)}}},[t._v(" "+t._s(t.$t("common.delete")))])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.natPage.page,"page-sizes":[5],"page-size":t.natPage.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.natPage.total},on:{"update:currentPage":function(e){return t.$set(t.natPage,"page",e)},"update:current-page":function(e){return t.$set(t.natPage,"page",e)},"size-change":t.getData,"current-change":t.getData,"update:pageSize":function(e){return t.$set(t.natPage,"per_page",e)},"update:page-size":function(e){return t.$set(t.natPage,"per_page",e)}}})],1)],1)])])])],1),a("el-dialog",{attrs:{title:t.$t("common.add")+"NAT"+t.$t("nat.forward"),visible:t.isShowFloatIpGroup,width:"500px"},on:{"update:visible":function(e){t.isShowFloatIpGroup=e},close:function(e){return t.$refs.natAclFrom.resetFields()}}},[a("el-form",{ref:"natAclFrom",attrs:{rules:t.aclRule,model:t.natAclFrom,"label-width":"100px","label-position":t.$globalConfig.labelPosition}},[a("el-form-item",{attrs:{prop:"hostid",label:t.$t("common.example5")}},[a("el-select",{attrs:{"collapse-tags":"",placeholder:t.$t("common.select")+t.$t("common.example5")},model:{value:t.natAclFrom.hostid,callback:function(e){t.$set(t.natAclFrom,"hostid",e)},expression:"natAclFrom.hostid"}},t._l(t.natCaseData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.hostname,value:t.id}})})),1)],1),a("el-form-item",{attrs:{prop:"int_port",label:t.$t("common.internalPort")}},[a("el-input",{model:{value:t.natAclFrom.int_port,callback:function(e){t.$set(t.natAclFrom,"int_port",e)},expression:"natAclFrom.int_port"}})],1),a("el-form-item",{attrs:{prop:"protocol",label:t.$t("nat.forward")+t.$t("common.protocol")}},[a("el-select",{attrs:{"collapse-tags":"",placeholder:t.$t("common.example5")},model:{value:t.natAclFrom.protocol,callback:function(e){t.$set(t.natAclFrom,"protocol",e)},expression:"natAclFrom.protocol"}},t._l(t.protocolList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1),a("el-form-item",{attrs:{prop:"ip_id",label:t.$t("common.Extranet")+"IP"}},[a("el-select",{attrs:{"collapse-tags":"",placeholder:t.$t("common.example5")},model:{value:t.natAclFrom.ip_id,callback:function(e){t.$set(t.natAclFrom,"ip_id",e)},expression:"natAclFrom.ip_id"}},t._l(t.balanceData.ip,(function(t){return a("el-option",{key:t.id,attrs:{label:t.ip,value:t.id}})})),1)],1),a("el-form-item",{attrs:{prop:"ext_port",label:t.$t("common.ExternalPort")}},[a("el-input",{model:{value:t.natAclFrom.ext_port,callback:function(e){t.$set(t.natAclFrom,"ext_port",e)},expression:"natAclFrom.ext_port"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowFloatIpGroup=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAddForward}},[t._v(t._s(t.$t("common.sure")))])],1)],1),a("el-dialog",{attrs:{title:t.$t("common.update")+t.$t("common.Maximum"),visible:t.isUpdateMaximumVisible,width:"500px"},on:{"update:visible":function(e){t.isUpdateMaximumVisible=e}}},[a("br"),a("el-form",{ref:"bandwidth",attrs:{model:t.bandwidth,rules:t.bandwidthRules}},[a("el-form-item",{attrs:{label:t.$t("common.Maximum"),"label-width":"120px",prop:"max_connect"}},[a("el-input",{staticStyle:{width:"260px"},model:{value:t.bandwidth.max_connect,callback:function(e){t.$set(t.bandwidth,"max_connect",e)},expression:"bandwidth.max_connect"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isUpdateMaximumVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitBandwidth}},[t._v("确 定")])],1)],1),a("deleteDialog",{staticClass:"deleteDialog",attrs:{isShowDelDialog:t.isShowDelDialog,dataType:t.dataType},on:{submitDeleteRow:t.submitDeleteRow,"update:isShowDelDialog":function(e){t.isShowDelDialog=e},"update:is-show-del-dialog":function(e){t.isShowDelDialog=e}}}),a("deleteDialog",{staticClass:"deleteDialog",attrs:{isShowDelDialog:t.delInfo.isShowDelDialog,custom:t.delInfo.custom},on:{submitDeleteRow:t.sureDeleteAcl,"update:isShowDelDialog":function(e){return t.$set(t.delInfo,"isShowDelDialog",e)},"update:is-show-del-dialog":function(e){return t.$set(t.delInfo,"isShowDelDialog",e)}}}),a("el-dialog",{attrs:{title:t.$t("common.switchOutIp"),visible:t.outDialogVisible,width:"30%"},on:{"update:visible":function(e){t.outDialogVisible=e}}},[a("span",[t._v(t._s(t.$t("common.example5")+t.example5Name+t.$t("nat.willUse")+t.curOutIp+t.$t("nat.as")+t.$t("nat.exportIP")))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.outDialogVisible=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.changeOutIp}},[t._v(t._s(t.$t("common.determine")))])],1)])],1)},f=[],g=(a("fb6a"),a("a9e3"),a("d3b7"),a("3ca3"),a("ddb0"),a("5530")),v=a("dc57"),b=a("fdad"),_=a("d9e2"),w={components:{deleteDialog:b["default"],systemIcon:_["a"]},props:{fastPhotoData:{type:Array},cloudDetailInfo:{type:Object,default:null},balanceData:{type:Object,required:!0,deep:!0},id:{type:Number},diskInfo:{type:Array},status:{type:String,default:null},isCursomerVersion:{type:Boolean,default:!1}},data:function(){var t=this;return{example5Name:"",tempId:"",tempHost:"",curOutIp:"",outDialogVisible:!1,loading:!1,aclId:"",hostList:[],delInfo:{isShowDelDialog:!1,custom:""},natAclFrom:{hostid:"",int_port:"",protocol:1,ip_id:"",ext_port:""},protocolList:[{id:1,label:"TCP"},{id:2,label:"UDP"},{id:3,label:"TCP+UDP"}],natCaseData:[],natForwardData:[],ip_id:"",isShowFloatIpGroup:!1,isUpdateMaximumVisible:!1,balanceId:"",activeName:"overview",ipData:[],ipSelectOptions:[],floatIpForm:{ip:[]},delTitle:"",natPage:{page:1,per_page:5,orderby:"id",sort:"desc"},aclPage:{page:1,per_page:5,orderby:"id",sort:"desc"},ipPageInfo:{page:1,per_page:10,total:0},dataType:"",delId:"",listenerInfo:{page:1,per_page:3,total:0},isShowDelDialog:!1,listenerInfoData:[],floatIpRule:{ip:[{required:!0,message:this.$t("common.chooseIp"),trigger:"submit"}]},bandwidthRules:{max_connect:[{required:!0,message:this.$t("common.input")+this.$t("common.Maximum"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope2(e,a,i,100,5e5)},trigger:"change"}]},bandwidth:{max_connect:2e3},aclRule:{hostid:{required:!0,message:this.$t("common.select")+this.$t("common.example5"),trigger:"blur"},int_port:[{required:!0,message:this.$t("common.input")+this.$t("common.example5")+this.$t("common.port"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,1,65535)},trigger:"blur"}],protocol:{required:!0,message:this.$t("common.select")+this.$t("common.protocol"),trigger:"blur"},ext_port:[{message:this.$t("common.input")+this.$t("common.ExternalPort"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,1,65535)},trigger:"blur"}],ip_id:{required:!0,message:this.$t("common.select")+"IP",trigger:"blur"}}}},watch:{id:{immediate:!0,handler:function(t){t&&this.getData()}},ipId:function(t){var e=this;this.ipSelect.forEach((function(a){a.id===t&&(e.ip_name=a.ip)}))},ipListId:function(t){this.getIpInfo(t)},cloudDetailInfo:{handler:function(t,e){e&&(this.vncPassword=this.cloudDetailInfo.vncpass,this.getHiddenVncPassword()),this.defaultGroupIp!==this.cloudDetailInfo.default_bw_group.id&&(this.defaultGroupIp=this.cloudDetailInfo.default_bw_group.id,this.getLimitRateIp()),this.backup_num=this.cloudDetailInfo.backup_num,this.backForm.backup_num=this.cloudDetailInfo.backup_num,this.backup_used=this.cloudDetailInfo.backup_used,this.snap_num=this.cloudDetailInfo.snap_num,this.snap_used=this.cloudDetailInfo.snap_used,this.backForm.snap_num=this.cloudDetailInfo.snap_num,this.nat_acl_limit=this.cloudDetailInfo.nat_acl_limit,this.nat_web_limit=this.cloudDetailInfo.nat_web_limit,this.backForm.nat_acl_limit=this.cloudDetailInfo.nat_acl_limit,this.backForm.nat_web_limit=this.cloudDetailInfo.nat_web_limit},deep:!0},"$store.state.migrate":{handler:function(t){this.migrate=t},deep:!0}},computed:{isShowAddButton:function(){return"forward"===this.activeName},strNum:function(){if("backup"===this.activeName&&-1!==this.backup_num){var t=0===this.backup_num?this.$t("common.unlimited"):this.backup_num;return this.backup_used+"/"+t}if("snap"===this.activeName&&-1!==this.snap_num){var e=0===this.snap_num?this.$t("common.unlimited"):this.snap_num;return this.snap_used+"/"+e}if("natTranspond"===this.activeName&&-1!==this.nat_acl_limit){var a=0===this.nat_acl_limit?this.$t("common.unlimited"):this.nat_acl_limit;return this.cloudDetailInfo.nat_acl_used+"/"+a}if("natBuild"===this.activeName&&-1!==this.nat_web_limit){var i=0===this.nat_web_limit?this.$t("common.unlimited"):this.nat_web_limit;return this.cloudDetailInfo.nat_web_used+"/"+i}return""}},methods:{setOutput:function(t,e){this.outDialogVisible=!0,this.example5Name=t.hostname,this.curOutIp=this.balanceData.ip[e].ip,this.tempHost=t.hostid},changeOutIp:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.ip_id=t.tempId,e.next=4,d["a"].setOutIp(t.id,{hostid:t.hostid,ip_id:t.tempId});case 4:t.$message.success(t.$t("common.updateSuccess")),t.getData(),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},deleteForward:function(t){this.delInfo.isShowDelDialog=!0,this.delInfo.custom=this.$t("common.sureDelete")+"?",this.aclId=t.id},sureDeleteAcl:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].deleteNatAcl(t.id,t.aclId);case 3:t.$message.success(t.$t("common.deleteSuccess")),t.getNatAclList(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$message.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},submitAddForward:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{d["a"].addNatAcl(t.id,t.natAclFrom)}catch(a){t.$message.error(a)}case 1:case"end":return e.stop()}}),e)})))()},selectionChange:function(){},getAllCloudStatus:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,i,s,n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=5,i=[],s=0;s<t.natCaseData.length;s+=a)i.push(t.natCaseData.slice(s,s+a));n=0;case 4:if(!(n<i.length)){e.next=12;break}for(o=[],r=0;r<i[n].length;r++)o.push(t.getSingleCloudStatus(i[n][r]));return e.next=9,Promise.all(o);case 9:n++,e.next=4;break;case 12:case"end":return e.stop()}}),e)})))()},handleCallbackChangeOrder:function(t,e){this.natPage.orderby=e||t.orderby,this.natPage.sort=!0===t.sort?"asc":"desc",this.getData()},getData:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=8;break}return e.next=4,d["a"].getNatCaseList(t.id,t.natPage);case 4:a=e.sent,t.natCaseData=a.data,t.natPage.total=a.meta.total,t.$forceUpdate();case 8:e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$message.error(e.t0.data.error),t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getNatAclList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].getNatAclList(4,t.aclPage);case 3:a=e.sent,t.natForwardData=a.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$message.error(e.t0.data.error);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},statusContent:function(t,e){switch(t){case"on":return this.$t("common.startingUp");case"off":return this.$t("common.powerOff");case"unknown":return this.$t("common.unknown");case"wait_reboot":return this.$t("common.waitingToRestart");case"suspend":return"traffic"===e.suspend_type?this.$t("common.excessiveTraffic1"):this.$t("common.suspend");case"init":return this.$t("common.exampleCreates");case"waitOff":return this.$t("common.waitingToShutDown");case"waitOn":return this.$t("common.waitingForBoot");case"rescue":return this.$t("common.rescueSystem");case"paused":return this.$t("common.hang");case"hot_migrate":return this.$t("common.hotMigration");case"cold_migrate":return this.$t("common.coldMigration");case"recycle":return this.$t("common.recycleBin");default:}},submitBandwidth:function(){var t=this;this.$refs.bandwidth.validate(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=7;break}return e.next=3,d["a"].editMaxConnectReq(t.balanceId,{max_connect:t.bandwidth.max_connect});case 3:t.$message.success(t.$t("common.updateSuccess")),t.$emit("refreshCloudStatus"),t.$refs.bandwidth.resetFields(),t.isUpdateMaximumVisible=!1;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},editMaximumOpen:function(){this.bandwidth.max_connect=this.balanceData.max_connect,this.isUpdateMaximumVisible=!0},submitDeleteRow:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"ip"!==t.delTitle){e.next=8;break}return e.next=4,d["a"].delListenerIp(t.balanceId,{ip:[t.delId]});case 4:t.$message.success(t.$t("common.deletedIpSuccessfully")),t.getIpData(),e.next=12;break;case 8:return e.next=10,d["a"].delListenerTransmit(t.delId);case 10:t.$message.success(t.$t("common.deletedSuccessfully")),t.getListenerListData();case 12:e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](0);case 16:case"end":return e.stop()}}),e,null,[[0,14]])})))()},deleteIp:Object(v["b"])((function(t,e){if(this.delTitle=e,this.delId=t.id,"ip"===e)this.dataType="ip: ".concat(t.ip),this.isShowDelDialog=!0;else{if(!this.balanceData.enable)return void this.$message({message:this.$t("common.loadStop"),type:"warning"});this.dataType=t.name,this.isShowDelDialog=!0}})),getIpData:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].ListenerIpList(Object(g["a"])({id:t.balanceId},t.ipPageInfo));case 3:a=e.sent,a&&(t.ipPageInfo=a.meta),t.ipData=a.data,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getListenerListData:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].ListenerListData(t.balanceId,t.listenerInfo);case 3:a=e.sent,a&&(t.listenerInfo=a.meta),t.listenerInfoData=a.data,t.listenerInfoData.forEach((function(t){t.acl.forEach((function(t){t.status=0,t.host.forEach((function(e){"DOWN"===e.health_status&&t.status++}))}))})),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()},addBtn:function(t,e,a){if("listener"===this.activeName){if(!this.balanceData.enable)return void this.$message({message:this.$t("common.loadStop"),type:"warning"});"add"===t?this.$router.push({path:"add-listener",query:{vpc:this.balanceData.vpc,id:this.balanceData.id}}):"edit"===t?this.$router.push({name:"addListener",params:{row:e,acl:a,vpc:this.balanceData.vpc}}):"addListenerRules"===t&&this.$router.push({name:"addListener",params:{id:e.id,key:"addListenerRules",vpc:this.balanceData.vpc,protocol:e.protocol,row:{lb_id:this.balanceId}}})}else this.isShowFloatIpGroup=!0},getIpList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.getIpByNode({hostid:t.balanceId,type:"load_balance"});case 3:a=e.sent,t.ipData.forEach((function(t){a.forEach((function(e){e.ip.forEach((function(a,i){a.id===t.id&&delete e.ip[i]}))}))})),t.ipSelectOptions=a,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},submitAddFloatGroup:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].addListenerIpPath(t.balanceId,{ip:t.floatIpForm.ip});case 3:t.$message.success(t.$t("common.addSuccess")),t.isShowFloatIpGroup=!1,t.getIpData(),t.getIpList(),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()}},created:function(){sessionStorage.getItem("activeName")&&(this.activeName=sessionStorage.getItem("activeName"),sessionStorage.removeItem("activeName")),this.balanceId=this.$route.query.id,this.$route.query.activeName&&(this.activeName=this.$route.query.activeName),this.getData(),this.getNatAclList()},beforeDestroy:function(){}},k=w,y=(a("25dc"),a("2877")),$=Object(y["a"])(k,h,f,!1,null,"51c53ecc",null),C=$.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"computerInfo-wrapper"},[a("div",{staticClass:"link"}),a("div",{staticClass:"more",on:{click:t.handleClickMore}},[t._v(t._s(t.$t("common.more")))]),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"tabs-item",attrs:{label:t.$t("common.task"),name:"task"}},[a("div",{staticClass:"info-wrapper-item"},[a("div",{staticClass:"table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":t.$t("common.loading"),height:"400","row-style":t.rowStyle,data:t.taskData,width:"100%"}},[a("el-table-column",{attrs:{prop:"status",label:t.$t("common.status"),width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{content:t.taskStatusFormatter(e.row),placement:"right"}},[a("div",{staticClass:"icon-wrapper"},[3===e.row.status||4===e.row.status?a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}}):t._e(),2===e.row.status?a("i",{staticClass:"el-icon-success",staticStyle:{color:"#46bf8b"}}):t._e(),0===e.row.status?a("i",{staticClass:"el-icon-remove"}):t._e(),1===e.row.status?a("i",{staticClass:"el-icon-loading",staticStyle:{color:"#46bf8b"}}):t._e(),5===e.row.status?a("i",{staticClass:"el-icon-error"}):t._e()])])]}}])}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),a("el-table-column",{attrs:{prop:"type",label:t.$t("common.taskType"),"min-width":"90","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"start_time",label:t.$t("common.startTime"),width:"155",formatter:t.formatterStartTime}}),a("el-table-column",{attrs:{prop:"end_time",label:t.$t("common.endTime"),width:"155",formatter:t.formatterEndTime}}),a("el-table-column",{attrs:{prop:"progress",label:t.$t("common.progress"),"min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[100!==i.progress?a("el-progress",{attrs:{percentage:i.progress}}):a("span",[t._v(t._s(i.progress)+"%")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.pageTaskInfo.page,"page-sizes":[7],"page-size":t.pageTaskInfo.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.pageTaskInfo.total},on:{"size-change":t.currentTaskChange,"current-change":t.currentTaskChange,"update:currentPage":function(e){return t.$set(t.pageTaskInfo,"page",e)},"update:current-page":function(e){return t.$set(t.pageTaskInfo,"page",e)},"update:pageSize":function(e){return t.$set(t.pageTaskInfo,"per_page",e)},"update:page-size":function(e){return t.$set(t.pageTaskInfo,"per_page",e)}}})],1)],1)])]),a("el-tab-pane",{staticClass:"tabs-item",attrs:{label:t.$t("common.log"),name:"log"}},[a("div",{staticClass:"info-wrapper-item"},[a("div",{staticClass:"table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{overflow:"auto"},attrs:{"element-loading-text":t.$t("common.loading"),height:"400",data:t.logData,width:"100%","row-style":t.rowStyle}},[a("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"40"}}),a("el-table-column",{attrs:{prop:"des",label:t.$t("common.des"),"min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{domProps:{innerHTML:t._s(i.des)}})]}}])}),a("el-table-column",{attrs:{prop:"create_time",label:t.$t("common.createTime"),"min-width":"100"}}),a("el-table-column",{attrs:{prop:"username",label:t.$t("common.username"),"min-width":"60","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{content:t.usernameAndipFormatter(e.row),placement:"right"}},[a("div",[t._v(t._s(e.row.username))])])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.pageInfo.page,"page-sizes":[7],"page-size":t.pageInfo.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.currentChange,"current-change":t.currentChange,"update:currentPage":function(e){return t.$set(t.pageInfo,"page",e)},"update:current-page":function(e){return t.$set(t.pageInfo,"page",e)},"update:pageSize":function(e){return t.$set(t.pageInfo,"per_page",e)},"update:page-size":function(e){return t.$set(t.pageInfo,"per_page",e)}}})],1)],1)])])],1)],1)},x=[],D=(a("c740"),a("45fc"),a("a434"),{components:{},props:{cloudDetailInfo:{type:Object,default:null},id:{type:Number},diskInfo:Array},watch:{cloudDetailInfo:function(t,e){e&&(this.vncPassword=this.cloudDetailInfo.vncpass,this.getHiddenVncPassword())},ipId:function(t){var e=this;this.ipSelect.forEach((function(a){a.id===t&&(e.ip_name=a.ip)}))},ipListId:function(t){this.getIpInfo(t)}},computed:{status:function(){return!1}},data:function(){return{loading:!1,isShowVncPort:!1,isShowPassword:!1,isShowVNCPassword:!1,password:"",vncPassword:"",hiddenPassword:"",hiddenVncPassword:"",ip_name:"",ipForm:{id:""},isShowRestoreBackUp:!1,ipId:0,addIpList:[],nowIpList:[],ipListId:0,ipListSelect:[],canStartCardOptions:[],ipSelect:[],isShowSelectWrapper:!1,floatIp:!1,dataType:"",rowInfo:{},isShowDelDialog:!1,diskSelectOptions:[],backUpTitle:"",formLabelWidth:"30%",backForm:{diskId:"",name:"",vncPort:"",vncPassWord:""},canStartCardText:"",type:"",isShowStartCardSelect:!1,isShowBackUp:!1,activeIndex:0,activeName:"task",value:!0,ApicStatus:1,AcpiStatus:1,VncStatus:1,TwoDStatus:1,threeDstatus:1,PaeStatus:1,formData:{bootOrder:"",canStartCard:"",cpuModel:"",clock:""},rules:{xialaxuanze:[{required:!0,message:"请选择下拉选择",trigger:"secend"}]},clockOptions:[{label:"Default",value:0},{label:"UTC",value:1},{label:"Localtime",value:2}],cpuModelOptions:[{label:"host-passthrough",value:1},{label:"host-model",value:2},{label:"custom",value:3}],bootOrderOptions:[{label:"CDROM Only",value:"c"},{label:"Hard Disk Only",value:"d"},{label:"(1) Hard Disk  (2) CDROM",value:"dc"},{label:"(1) CDROM (2) Hard Disk",value:"cd"}],isShowVncPassDialog:!1,startDiskData:"",backupData:[],logData:[],taskData:[],snapData:[],safeGroup:null,safeGroupSelect:[],buttonList:[{},{}],pageInfo:{page:1,per_page:7,total:0,total_page:1},pageTaskInfo:{page:1,per_page:7,total:0,total_page:1},taskId:[],timer:null}},methods:{usernameAndipFormatter:function(t){return t.ip},taskStatusFormatter:function(t){var e=parseInt(t.status);switch(e){case 0:return this.$t("common.notStart")+" "+t.msg;case 1:return this.$t("common.executing")+" "+t.msg;case 2:return this.$t("common.true")+" "+t.msg;case 3:return this.$t("common.execFailure")+" "+t.msg;case 4:return this.$t("common.forcedEnd")+" "+t.msg;case 5:return this.$t("common.cancel")+" "+t.msg;default:return" "+t.msg}},taskRetryFormatter:function(t){var e=t.retry;switch(Boolean(e)){case!0:return this.$t("common.yes");case!1:return this.$t("common.no");default:return""}},currentTaskChange:function(){this.getTaskInfo()},currentChange:function(){this.getCloudLogInfo()},formatterStartTime:function(t){return 0===t.start_time||"0"===t.start_time?"":t.start_time},formatterEndTime:function(t){return 0===t.end_time||"0"===t.end_time?"":t.end_time},rowStyle:function(t){t.row;var e=t.rowIndex,a={height:"43px"};return 8===e?(a.borderBottom=null,a):a},deleteRow:function(t){this.isShowDelDialog=!this.isShowDelDialog,this.rowInfo=t},onSwitchChange:function(t){switch(t){case"apic":break;case"acpi":break;case"vnc":break;default:break}},handleClick:Object(v["b"])((function(t,e){"log"===this.activeName?this.getCloudLogInfo():"task"===this.activeName&&this.getTaskInfo()}),2e3),handleClickMore:function(){0===parseInt(this.activeIndex)?this.$router.push({path:"/system-log",query:{id:this.id,type:["=","60"]}}):1===parseInt(this.activeIndex)&&this.$router.push({path:"/task",query:{id:this.id,type:"nat_gateway"}})},getCloudLogInfo:function(){var t=this;this.loading=!0;var e={orderby:"id",per_page:this.pageInfo.per_page,page:this.pageInfo.page,sort:"desc",search:""};d["a"].getNatLog(this.id,e).then((function(e){t.pageInfo.total=e.meta.total,t.pageInfo.total_page=e.meta.total_page,t.logData=e.data}),(function(e){t.$message.error(e.data.error)})).catch((function(e){e.data&&t.$message.error(e.data.error)})).finally((function(){t.loading=!1}))},getTaskInfoInit:function(){this.activeName="task",this.pageTaskInfo.page=1,this.getTaskInfo()},getTaskInfo:function(){var t=this;this.loading=!0;var e={orderby:"id",per_page:this.pageTaskInfo.per_page,page:this.pageTaskInfo.page,sort:"desc",status:void 0,cloud:this.id,rel_type:"nat_gateway"};this.$api.getTaskList(e).then((function(e){t.pageTaskInfo.total=e.meta.total,t.pageTaskInfo.total_page=e.meta.total_page,t.taskData=e.data;var a=t.taskData.some((function(e){var a=0===e.status||1===e.status;return a&&t.taskId.push(e.id),a}));a&&t.openTask()}),(function(e){t.$notify({title:t.$t("common.fail"),message:e.data.error,type:"error",offset:80})})).catch((function(e){e.data&&t.$notify({title:t.$t("common.fail"),message:e.data.error,type:"error",offset:80})})).finally((function(){t.loading=!1}))},headClassName:function(t){t.row,t.rowIndex;return"success-row"},tableRowClassName:function(t){t.row;var e=t.rowIndex;return 1===e?"warning-row":3===e?"success-row":""},openTask:function(){this.task()},task:function(){var t=this;0!==this.taskId.length&&this.taskId.forEach((function(e){var a={id:e,auto:!0,showMessage:!1,callback:function(){var t=this.taskId.findIndex((function(t){return t===e}));this.taskId.splice(t,1),this.$emit("refreshCloudStatus")},executeCallback:function(t){var e=this.taskData.findIndex((function(e){return e.id===t.id}));this.taskData[e].progress=t.progress,this.taskData[e].status=t.status,this.taskData[e].msg=t.msg,this.taskData[e].start_time=t.start_time,this.taskData[e].end_time=t.end_time?t.end_time:"","migrate"===t.type&&(Object.assign(t.data,t),t.data.taskid=t.id,this.$store.commit("setMigrate",t.data))}};t.$tool.executeTask(t,a)}))}},destroyed:function(){this.timer&&clearInterval(this.timer)},mounted:function(){this.getTaskInfo()}}),I=D,O=(a("0fc1"),Object(y["a"])(I,S,x,!1,null,"b1c72d84",null)),F=O.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-echarts"},[t.title?a("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),a("div",{staticClass:"head"},[a("div",["nodeDisk"==t.type?a("el-select",{attrs:{placeholder:t.$t("common.pleaseChoose")},on:{change:t.changeSelect},model:{value:t.nodeDisk,callback:function(e){t.nodeDisk=e},expression:"nodeDisk"}},t._l(t.nodeData,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1):"nodeNetwork"==t.type||"nodePPS"==t.type||"nodeDosage"==t.type?a("el-select",{attrs:{placeholder:t.$t("common.pleaseChoose")},on:{change:t.changeSelect},model:{value:t.nodeNetwork,callback:function(e){t.nodeNetwork=e},expression:"nodeNetwork"}},t._l(t.nodeData,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1):"serveNetwork"==t.type?a("el-select",{attrs:{placeholder:t.$t("common.pleaseChoose")},model:{value:t.timeType,callback:function(e){t.timeType=e},expression:"timeType"}},[a("el-option",{key:"1",attrs:{label:t.$t("common.hour"),value:1}}),a("el-option",{key:"2",attrs:{label:t.$t("common.sevenDay"),value:2}}),a("el-option",{key:"3",attrs:{label:t.$t("common.month"),value:3}}),a("el-option",{key:"4",attrs:{label:t.$t("common.days30"),value:4}}),a("el-option",{key:"5",attrs:{label:t.$t("common.custom"),value:5}})],1):t._e()],1),"serveNetwork"!=t.type||5==t.timeType?a("el-date-picker",{attrs:{type:"datetimerange","range-separator":t.$t("common.to"),"start-placeholder":t.$t("common.startTime"),"end-placeholder":t.$t("common.endTime"),"value-format":"timestamp","picker-options":t.pickerOptions},on:{change:t.changeDateTime},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}}):t._e()],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"flowEcharts",attrs:{id:t.type}}),"cloudNetwork"===t.type&&t.netDetail.length?a("div",{staticClass:"fix-cont"},[a("el-row",[a("el-col",{attrs:{span:3,offset:7}},[a("div",{staticStyle:{height:"20px"}}),a("div",[t._v(" "+t._s(t.$t("common.allIn")))]),a("div",[t._v(t._s(t.$t("common.outflow")))])]),a("el-col",{attrs:{span:3}},[a("div",[t._v(t._s(t.$t("common.newflow")))]),a("div",[t._v(t._s(t.netDetail.in.last))]),a("div",[t._v(t._s(t.netDetail.out.last))])]),a("el-col",{attrs:{span:3}},[a("div",[t._v(t._s(t.$t("common.avgflow")))]),a("div",[t._v(t._s(t.netDetail.in.average))]),a("div",[t._v(t._s(t.netDetail.out.average))])]),a("el-col",{attrs:{span:3}},[a("div",[t._v(t._s(t.$t("common.maxflow")))]),a("div",[t._v(t._s(t.netDetail.in.max))]),a("div",[t._v(t._s(t.netDetail.out.max))])])],1)],1):t._e(),t.showErrorTips?a("div",{staticClass:"noData"},[t._v(t._s(t.$t("common.noData")))]):t._e()])},N=[],R=(a("d81d"),a("90d7"),a("ac1f"),a("1276"),a("313e")),j=a.n(R),L=a("3de1"),B=null,A={props:{nodeId:{type:Number,default:0},kvm:{type:String,default:""},type:{type:String,require:!0},kvm_ifname:{type:String,default:""},diskInfo:{type:Array,default:function(){return[]}},networkInfo:{type:Array,default:function(){return[]}},nodeData:{type:Array,default:function(){return[]}},toDayDate:{type:String,default:""},title:{type:String,default:""}},data:function(){return{loading:!1,dateTime:[],xData:[],yData:[],yMax:100,dataGreen:[],labelGreen:"",dataBlue:[],labelBlue:"",dataYellow:[],labelYellow:"",unit:"%",diskDev:"",networkKey:0,nodeDisk:"",nodeNetwork:"",echartsId:"",dataGreen2:[],labelGreen2:"",dataBlue2:[],labelBlue2:"",dataGreen3:[],labelGreen3:"",timeType:0,subtext:"",showErrorTips:!1,netDetail:{in:{},out:{}},pickerOptions:{disabledDate:function(t){var e=B.toDayDate;return t.getTime()-new Date(e).getTime()>0}},pending:{}}},computed:{option:function(){var t={title:{subtext:this.subtext,left:"center",textAlign:"left",subtextStyle:{lineHeight:24}},grid:{left:"20",right:"0",top:"10%",bottom:"1%",containLabel:!0},xAxis:{type:"category",data:this.xData,axisTick:!1,boundaryGap:this.dataGreen.length<=3,axisLabel:{textStyle:{color:"#999"},formatter:function(t){for(var e=t.split(""),a="",i=0,s="";i<e.length+1;s=e[i++])a+=s,i%10||(a+="\n");return a}},axisLine:{lineStyle:{type:"dashed",color:"#ddd",width:1}},splitLine:{show:!1}},yAxis:{type:"value",axisTick:!1,max:this.yMax,boundaryGap:!1,axisLine:{lineStyle:{color:"#EBEEF5"}},axisLabel:{formatter:"{value} "+this.unit,textStyle:{color:"#999999"}},splitLine:{lineStyle:{type:"dashed"}}},dataZoom:[{type:"inside",throttle:50}],tooltip:{trigger:"axis",backgroundColor:"#fff",textStyle:{color:"#000"},extraCssText:"box-shadow:0 2px 12px 0 rgba(0, 0, 0, 0.1);"},series:[{name:this.labelGreen,data:this.dataGreen,type:"line",sampling:!0,symbolSize:1,symbol:"none",smooth:!0,showSymbol:!1,lineStyle:{width:2},itemStyle:{normal:{color:"#75db16",borderColor:"#75db16"}}},{name:this.labelBlue,data:this.dataBlue,symbol:"none",type:"line",showSymbol:!1,lineStyle:{width:2,shadowColor:"rgba(92, 102, 255, 0.3)",shadowBlur:10,shadowOffsetY:20},itemStyle:{normal:{color:"#5c66ff",borderColor:"#5c66ff"}}},{name:this.labelYellow,data:this.dataYellow,itemStyle:{color:"#f1672a"},symbol:"none",type:"line",sampling:!0},{name:this.labelGreen2,type:"bar",stack:this.$t("common.gross"),barMaxWidth:"40",itemStyle:{barBorderRadius:[5,5,0,0],color:"#737dff"},roundCap:!0,data:this.dataGreen2},{name:this.labelBlue2,type:"bar",stack:this.$t("common.gross"),itemStyle:{barBorderRadius:[5,5,0,0],color:"#ccc",opacity:.3},roundCap:!0,data:this.dataBlue2},{name:this.labelGreen3,data:this.dataGreen3,itemStyle:{color:"#3fbf70"},symbol:"none",type:"line",sampling:!0}]};return"cloudStorage"!==this.type&&"nodeDisk"!==this.type&&"nodeStorage"!==this.type||(t.series[0].areaStyle={},t.series[1].areaStyle={},t.series[5].areaStyle={}),t}},watch:{type:function(){this.init()},timeType:function(t){var e=(new Date).getTime(),a=new Date(B.toDayDate).getTime(),i=e-2592e6;if(1===t)i=e-864e5;else if(2===t)i=e-6048e5;else if(3===t){var s=new Date;s.setDate(1),i=new Date(new Date(s).toLocaleDateString()).getTime()}else 4===t?i=e-2592e6:5===t&&(i=e-5184e6);var n=i-a>0?i:a;this.dateTime=[n,e],"serveNetwork"===this.type&&this.changeSelect()},toDayDate:function(){this.init()}},created:function(){B=this},mounted:function(){this.echartsId=j.a.init(document.getElementById(this.type)),this.init()},methods:{resize:function(t){this.echartsId=j.a.init(document.getElementById(t)),this.echartsId.resize()},changeSelect:function(){this.getData()},init:function(){var t=(new Date).getTime(),e=0;e=B.toDayDate?new Date(B.toDayDate).getTime()>t-6048e5?new Date(B.toDayDate).getTime():(new Date).getTime()-6048e5:t-6048e5,this.dateTime=[new Date(e),new Date(t)],this.xData=[],this.yData=[],this.dataGreen=[],this.labelGreen="",this.dataBlue=[],this.labelBlue="",this.dataYellow=[],this.labelYellow="",this.dataGreen2=[],this.labelGreen2="",this.dataBlue2=[],this.labelBlue2="",this.dataGreen3=[],this.labelGreen3="",this.diskDev="",this.networkKey="",this.yMax=null,this.nodeDisk="",this.nodeNetwork="",this.timeType=0,this.subtext="",this.netDetail={in:{},out:{}},"serveNetwork"===this.type?this.timeType=new Date(B.toDayDate).getTime()<t-2592e5?2:1:this.getData()},changeDateTime:function(){this.getData()},getLogNum:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>0){var a=parseInt(Math.log2(t)/10)>=1?parseInt(Math.log2(t)/10):e,i=Math.pow(1024,a);return{power:a,divisor:i}}return{power:0,divisor:1}},getMaxNum:function(t,e){return Math.max.apply(Math,t.map((function(t){return t[e]})))},canvasChart:function(){var t=this.echartsId;t.setOption(this.option,!0)},convertUnit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="";return 1===e?0===t?a="bps":1===t?a="Kbps":2===t?a="Mbps":3===t?a="Gbps":4===t&&(a="Tbps"):2===e?0===t?a="B":1===t?a="KB":2===t?a="MB":3===t?a="GB":4===t&&(a="TB"):3===e&&(0===t?a="pps":1===t?a="Kpps":2===t?a="Mpps":3===t?a="Gpps":4===t&&(a="Tpps")),a},getNetDetail:function(t){for(var e in t.traffic_data.in){var a=this.getLogNum(t.traffic_data.in[e],0),i=this.convertUnit(a.power,2);this.netDetail.in[e]=(t.traffic_data.in[e]/a.divisor).toFixed(2)+i}for(var s in t.traffic_data.out){var n=this.getLogNum(t.traffic_data.out[s],0),o=this.convertUnit(n.power,2);this.netDetail.out[s]=(t.traffic_data.out[s]/n.divisor).toFixed(2)+o}},getStatisticsTotal:function(t){var e=this.getLogNum(t.flow_data.all,0),a=this.convertUnit(e.power,2);"serveNetwork"!==this.type&&"nodeDosage"!==this.type||(this.subtext="\n          ".concat(this.$t("common.totalFlow"),": ").concat((t.flow_data.all/e.divisor).toFixed(2)).concat(a,"\n          ").concat(this.$t("common.receivesFlow"),": ").concat((t.flow_data.in/e.divisor).toFixed(2)).concat(a).concat(this.$t("common.sendFlow"),": ").concat((t.flow_data.out/e.divisor).toFixed(2)).concat(a),this.canvasChart())},getYMDHMS:function(t){return L["a"].getDateYYMMDD(t,!0)},getData:function(){var t=this;this.loading=!0;var e={};"cloudCpu"===this.type?(e={node_id:this.nodeId,kvm:this.kvm,type:"kvm_info"},this.labelGreen=this.$t("common.cpuUtilization1"),this.unit="%"):"cloudDisk"===this.type?(e={node_id:this.nodeId,kvm:this.kvm,dev_name:this.diskDev,type:"disk_io"},this.labelBlue=this.$t("common.writingSpeed"),this.labelGreen=this.$t("common.readingSpeed"),this.unit="MB/s"):"cloudStorage"===this.type?(e={node_id:this.nodeId,kvm:this.kvm,type:"kvm_info"},this.labelGreen=this.$t("common.usableMb"),this.labelBlue=this.$t("common.totalMb"),this.unit="MB"):"cloudNetwork"===this.type?(e={type:"traffic"},this.unit="Mbps",this.labelGreen=this.$t("common.enterMb"),this.labelBlue=this.$t("common.outMb")):"cloudPPS"===this.type?e={type:"pps"}:"nodeDisk"===this.type?(e={node_id:this.nodeId,dev_name:this.nodeDisk,type:"main_disk"},this.labelGreen=this.$t("common.totalMb"),this.labelBlue=this.$t("common.usedMb"),this.unit="MB"):"nodeCpu"===this.type?(e={node_id:this.nodeId,type:"main_info"},this.labelGreen=this.$t("common.averageLoad1"),this.labelBlue=this.$t("common.averageLoad5"),this.labelYellow=this.$t("common.averageLoad15"),this.unit=""):"nodeNetwork"===this.type?(e={node_id:this.nodeId,type:"main_net_info",kvm_ifname:this.nodeNetwork},this.labelGreen=this.$t("common.enterMb"),this.labelBlue=this.$t("common.outMb"),this.unit="Mbps"):"nodePPS"===this.type?(e={node_id:this.nodeId,type:"pps",kvm_ifname:this.nodeNetwork},this.labelGreen=this.$t("common.enterMb"),this.labelBlue=this.$t("common.outMb"),this.unit="Mbps"):"nodeDosage"===this.type?(e={node_id:this.nodeId,type:"main_net_info",kvm_ifname:this.nodeNetwork,status:1},this.labelGreen=this.$t("common.enterMb"),this.labelBlue=this.$t("common.outMb"),this.unit="Mbps",this.getStatisticsTotal(e)):"nodeStorage"===this.type?(e={node_id:this.nodeId,type:"main_info",desc:11},this.labelGreen=this.$t("common.totalMb"),this.labelBlue=this.$t("common.usedMb"),this.unit="MB"):"serveNetwork"===this.type&&(e={type:"flow"}),e.start_time=new Date(this.dateTime[0]).getTime(),e.end_time=new Date(this.dateTime[1]).getTime();var a=[],i=[],s=[],n=[],o=[],r=[],c=[];this.pending.cancel&&this.pending.cancel(this.$t("common.cancelRequest")),d["a"].getNatChart(this.nodeId,e).then((function(e){if(t.loading=!1,e&&e.data.length>0){t.showErrorTips=!1;var l={power:0,divisor:1};l=t.setUnit(e.data),e.data.forEach((function(c,p){var u=c.time;a.push(u),c[1]=c[1]||0,c[2]=c[2]||0,c[3]=c[3]||0,c[4]=c[4]||0,c[5]=c[5]||0,"cloudCpu"===t.type?(i.push(c[1].toFixed(2)),t.yMax=100):"cloudDisk"===t.type?(i.push((c[1]/l.divisor).toFixed(2)),s.push((c[2]/l.divisor).toFixed(2))):"cloudStorage"===t.type?(i.push((c[2]/l.divisor).toFixed(2)),s.push((c[3]/l.divisor).toFixed(2))):"cloudNetwork"===t.type?(i.push((c.in/l.divisor).toFixed(2)),s.push((c.out/l.divisor).toFixed(2)),t.getNetDetail(e)):"cloudPPS"===t.type?(i.push((c.in/l.divisor).toFixed(2)),s.push((c.out/l.divisor).toFixed(2))):"nodeDisk"===t.type?(i.push((c[1]/l.divisor).toFixed(2)),s.push((c[3]/l.divisor).toFixed(2))):"nodeCpu"===t.type?(i.push(c[1].toFixed(2)),s.push(c[2].toFixed(2)),n.push(c[3].toFixed(2))):"nodeNetwork"===t.type||"nodePPS"===t.type||"nodeDosage"===t.type?(i.push((c[1]/l.divisor).toFixed(2)),s.push((c[2]/l.divisor).toFixed(2))):"nodeStorage"===t.type?(i.push((c[4]/l.divisor).toFixed(2)),s.push((c[5]/l.divisor).toFixed(2))):"serveNetwork"===t.type&&(o.push((c.in/l.divisor).toFixed(2)),r.push((c.out/l.divisor).toFixed(2)),t.getStatisticsTotal(e))}))}else t.showErrorTips=!0;t.xData=a,t.dataGreen=i,t.dataGreen3=c,t.dataBlue=s,t.dataYellow=n,t.dataGreen2=o,t.dataBlue2=r,t.canvasChart()})).catch((function(){t.loading=!1}))},setUnit:function(t){var e={power:1,divisor:1024};if("cloudDisk"===this.type){var a=this.getMaxNum(t,1),i=this.getMaxNum(t,2),s=a>i?a:i;e=this.getLogNum(s,0);var n=this.convertUnit(e.power,2);this.labelBlue="".concat(this.$t("common.writing"),"(").concat(n,"/s)"),this.labelGreen="".concat(this.$t("common.read"),"(").concat(n,"/s)"),this.unit="".concat(n,"/s")}else if("cloudStorage"===this.type){e=this.getLogNum(this.getMaxNum(t,2));var o=this.convertUnit(e.power,2);this.labelBlue="".concat(this.$t("common.used"),"(").concat(o,")"),this.labelGreen="".concat(this.$t("common.total"),"(").concat(o,")"),this.unit="".concat(o)}else if("cloudPPS"===this.type){var r=this.getMaxNum(t,"in"),c=this.getMaxNum(t,"out"),l=r>c?r:c;e=this.getLogNum(l,0);var p=this.convertUnit(e.power,3);this.labelGreen="".concat(this.$t("common.InfoPacketReceive"),"(").concat(p,")"),this.labelBlue="".concat(this.$t("common.sendingPackets"),"(").concat(p,")"),this.unit="".concat(p)}else if("cloudNetwork"===this.type){var u=this.getMaxNum(t,"in"),d=this.getMaxNum(t,"out"),m=u>d?u:d;e=this.getLogNum(m,0);var h=this.convertUnit(e.power,1);this.labelGreen="".concat(this.$t("common.enter"),"(").concat(h,")"),this.labelBlue="".concat(this.$t("common.out"),"(").concat(h,")"),this.unit="".concat(h)}else if("nodeDisk"===this.type){e=this.getLogNum(this.getMaxNum(t,1));var f=this.convertUnit(e.power,2);this.labelGreen="".concat(this.$t("common.total"),"(").concat(f,")"),this.labelBlue="".concat(this.$t("common.used"),"(").concat(f,")"),this.unit="".concat(f)}else if("nodeCpu"===this.type)this.labelGreen=this.$t("common.averageLoad1"),this.labelBlue=this.$t("common.averageLoad5"),this.labelYellow=this.$t("common.averageLoad15"),this.unit="",this.yMax=(1.5*this.getMaxNum(t,1)).toFixed(0);else if("nodeNetwork"===this.type){var g=this.getMaxNum(t,1),v=this.getMaxNum(t,2),b=g>v?g:v;e=this.getLogNum(b,0);var _=this.convertUnit(e.power,1);this.labelGreen="".concat(this.$t("common.enter"),"(").concat(_,")"),this.labelBlue="".concat(this.$t("common.out"),"(").concat(_,")"),this.unit="".concat(_)}else if("nodePPS"===this.type){var w=this.getMaxNum(t,1),k=this.getMaxNum(t,2),y=w>k?w:k;e=this.getLogNum(y,0);var $=this.convertUnit(e.power,3);this.labelGreen="".concat(this.$t("common.InfoPacketReceive"),"(").concat($,")"),this.labelBlue="".concat(this.$t("common.sendingPackets"),"(").concat($,")"),this.unit="".concat($)}else if("nodeDosage"===this.type){var C=this.getMaxNum(t,1),S=this.getMaxNum(t,2),x=C>S?C:S;e=this.getLogNum(x,0);var D=this.convertUnit(e.power,2);this.labelGreen="".concat(this.$t("common.receive"),"(").concat(D,")"),this.labelBlue="".concat(this.$t("common.send"),"(").concat(D,")"),this.unit="".concat(D)}else if("nodeStorage"===this.type){e=this.getLogNum(this.getMaxNum(t,4));var I=this.convertUnit(e.power,2);this.labelGreen="".concat(this.$t("common.total"),"(").concat(I,")"),this.labelBlue="".concat(this.$t("common.used"),"(").concat(I,")"),this.unit="".concat(I)}else if("serveNetwork"===this.type){var O=this.getMaxNum(t,"in"),F=this.getMaxNum(t,"out"),T=O>F?O:F;e=this.getLogNum(T,0);var N=this.convertUnit(e.power,2);this.labelGreen2="".concat(this.$t("common.receivesFlow"),"(").concat(N,")"),this.labelBlue2="".concat(this.$t("common.useFlow"),"(").concat(N,")"),this.unit="".concat(N)}return e}}},M=A,P=(a("2402"),Object(y["a"])(M,T,N,!1,null,"017aefae",null)),q=P.exports,E=a("fa41"),z=a("ac0d"),V={metaInfo:function(){return{title:this.$t("nat.natDetail")}},provide:function(){return{cloudsDeatil:this.cloudDetailInfo}},mixins:[z["a"]],components:{ComputerInfoMoudle:C,ComputerInfoLogData:F,crumbs:l["default"],flowEcharts:q,ComputerInfoMoudleIp:E["a"]},watch:{newTaskStatus:function(t,e){"task"!==this.newTaskStatus&&(this.loadingStatus=!1,clearTimeout(this.timeOut),clearInterval(this.timeInterval))},vpcIps:{handler:function(t){this.formData.vpc_ips=t},immediate:!0,deep:!0}},computed:{vpcName:function(){var t=this,e=this.vpcNetwork.find((function(e){return e.id===t.formData.vpc}));return e?e.ips:""},vpcIps:function(){if(void 0!==this.vpc_ips.vpc2&&void 0!==this.vpc_ips.vpc3&&void 0!==this.vpc_ips.vpc4){var t=this.vpc_ips.vpc1.value+"."+this.vpc_ips.vpc2+"."+this.vpc_ips.vpc3+"."+this.vpc_ips.vpc4+"/"+this.vpc_ips.vpc6.value;return t}return""}},data:function(){var t=this,e=function(e,a,i){!0===a?i():i(new Error(t.$t("common.please3")))};return{ipList:[],curIpId:[],ipDialogShow:!1,vpcList:[],curVpcId:"",checked:!1,isAgent:JSON.parse(localStorage.getItem("isAgent")),isCursomerVersion:!0,isBandWidthDialogShow:!1,isVpcDialogShow:!1,bandwidth:{id:"",bw:"",in_bw:"",out_bw:""},activeName:"elastic",showGroupList:[],pageInfo:{page:1,per_page:20,total:0},bandwidthRules:{bw:[{required:!0,message:this.$t("common.msg80"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,0,3e4,t.$t("common.bandwidth"))}}],out_bw:[{required:!0,message:this.$t("common.msg80"),trigger:"blur"}]},isLockBalanceShow:!1,showIp:"",delInfo:{dataType:"",isShowDelDialog:!1,custom:""},dialogTitle:"",isEditDialogShow:!1,editInfo:"",balanceData:{},loading:!1,vpc_ips:{vpc1:{tips:this.$t("common.range255"),value:10,select:[10,172,192]},vpc2:0,vpc3:0,vpc3Tips:"",vpc4:0,vpc4Tips:"",vpc6:{value:16,select:[16,17,18,19,20,21,22,23,24,25,26,27,28]},min:0,max:255},upgradeRules:{cpu:[{required:!0,message:this.$t("common.enterCpuCores"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,1,64,t.$t("common.cpuCore"))},trigger:"blur"}],memory:[{required:!0,message:this.$t("common.please44"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope2(e,a,i,.125,512,t.$t("common.ram"))},trigger:"blur"}],agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:e,trigger:"change"}]},isRefresh:!0,dialogDeleteShow:!1,node_id:0,area_id:0,loadingStatus:!0,timeInterval:null,timeOut:null,nodeId:0,isShowReInstall:!1,isShowUpgradeForm:!1,id:0,systemId:0,value:!0,mainbuttonAlt:"",imageGroupOptions:[],imageOptions:[],netTableData:[],diskTableData:[],exceptStatus:null,cloudInfo:{ip:"",kvm:"",cpu:0,memory:0,os_name:"",osuser:"",ip_num:0,status_zh:"",svg:0,network_type:"",nat_name:"",operate_system:""},cloudDetailInfo:{os_name:"",kvmid:"",create_time:"/",osuser:"",username:"",uuid:"",node_name:"",security:"",security_name:"",acpi:1,apic:1,vnc:1,video2d:0,video3d:0,vncport:"",startDisk:"",disk:[],rootpassword:"",cpumodel:"",bootorder:"",clock:"",vncpass:"",node_id:"",area_id:"",network_type:"",mainip:"",ip:"",iso:[],cpu_limit:"",cross_area_migrate:!1},dataRow:{},buttonStatus:3,windowIconStatus:1,buttonList:[{},{}],networkTableEdit:!1,networkTableAdd:!1,diskTableAdd:!1,diskTableEdit:!1,mainIpSelectOptions:[],driveSelectOptions:[{name:"Virtio",type:3},{name:"Realtek 8139",type:1},{name:"Intel PRO/1000",type:2}],networkSelectOptions:[{name:this.$t("common.internalNetwork"),type:0},{name:this.$t("common.Extranet"),type:1}],diskStoreSelectOptions:[],diskDriverSelectOptions:[{name:"ide"},{name:"virtio"}],diskCacheSelectOptions:[{name:"none"},{name:"writethrough"},{name:"writeback"},{name:"directsync"}],diskIoSelectOptions:[{name:"native"},{name:"threads"}],networkForm:{id:"",mac:"",bridge:"",ipaddress:"",niccard_name:"",in_bw:null,out_bw:null,mainip:null,agree:!1,bind_mac:1},system_disk:!1,reInstallForm:{os:"",gid:"",osGroupSvg:"",randomPassWord:"",port:null,system_disk_size:0},reInstallFormRules:{gid:{required:!0,message:this.$t("common.operatingSystemMust"),trigger:"blur"},os:{required:!0,message:this.$t("common.operatingSystemMust"),trigger:"blur"},randomPassWord:[{required:!0,message:this.$t("login.checkPassword"),trigger:"blur"},{validator:function(e,a,i){var s=/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_]+$)(?![a-z0-9]+$)(?![a-z\W_]+$)(?![0-9\W_]+$)[a-zA-Z0-9\W_]{6,}$/;s.test(a)?i():i(new Error(t.$t("common.msg81")))},trigger:"blur"}],port:[{required:!0,message:this.$t("common.enterPost"),trigger:"blur"},{validator:this.$validate.validatePort,trigger:"blur"}]},fastPhotoData:[],newTaskStatus:"init",upgradeForm:{cpu:"",memory:"",agree:!1},addNetWorkForm:{id:void 0,mac:"",niccard:1,vlan:0,ip:void 0,subnet_mask:void 0},isAddNetwork:!0,addNetWorkRule:{subnet_mask:[{required:!0,message:this.$t("common.pleaseEnterTheSubnetMask"),trigger:"blur"},{validator:this.$validate.validateMask,trigger:"blur"}],ip:[{required:!0,message:this.$t("common.pleaseEnterTheIntranetIp"),trigger:"blur"},{validator:this.$validate.validateIp,trigger:"blur"}],network_type:[{required:!0,message:this.$t("common.pleaseSelectTheNetworkType"),trigger:"change"}],niccard:[{required:!0,message:this.$t("common.pleaseSelectANetworkDriver"),trigger:"change"}],in_bw:[{required:!0,message:this.$t("common.feedLimit"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,0,9999999,t.$t("common.bandwidth"))}}],out_bw:[{required:!0,message:this.$t("common.bandwidthLimit"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,0,9999999,t.$t("common.bandwidth"))}}]},diskForm:{id:"",size:"",driver:"",cache:"",io:"",read_bytes_sec:"",write_bytes_sec:"",read_iops_sec:"",write_iops_sec:"",read_bytes_sec_max:"",write_bytes_sec_max:"",read_iops_sec_max:"",write_iops_sec_max:"",agree:!1},addDiskForm:{id:"",size:"",store:""},ipRule:{mac:[{required:!0,message:this.$t("common.enterMacAddress"),trigger:"blur"}],agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:e,trigger:"change"}],in_bw:[{required:!0,message:this.$t("common.feedLimit"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,0,9999999,t.$t("common.bandwidth"))}}],out_bw:[{required:!0,message:this.$t("common.bandwidthLimit"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,0,9999999,t.$t("common.bandwidth"))}}]},dialog:{tiltle:"",type:"",show:!1},formData:{cpu:1,memory:1,ip_num:1,system_disk_size:0,create_data_disk:0,port:null,data_disk_config:[],name:"",vpc:0,agree:!1,vpc_ips:"",remark:"",type:0},formDataRule:{cpu:[{required:!0,message:this.$t("common.pleaseEnterTheSizeOfTheCpu"),trigger:"blur"}],memory:[{required:!0,message:this.$t("common.pleaseEnterTheMemorySize"),trigger:"blur"}],ip_num:[{required:!0,message:this.$t("common.numberOfIP"),trigger:"blur"}],system_disk_size:[{required:!0,message:this.$t("common.EnterDiskSize"),trigger:"blur"}],name:[{required:!0,message:this.$t("common.please2"),trigger:"blur"}],vpc:[{required:!0,message:this.$t("common.please4"),trigger:"blur"}],vpc_ips:{required:!0,message:this.$t("cloud.enterInternalIpSegment"),trigger:"blur"},agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:e,trigger:"change"}]},vpcNetwork:[],diskFormRule:{agree:[{required:!0,message:this.$t("common.checkAgreeForced"),trigger:"change"},{validator:e,trigger:"change"}]},addDiskFormRules:{store:[{required:!0,message:this.$t("common.please7"),trigger:"blur"}],size:[{required:!0,message:this.$t("common.please6"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,1,2048,t.$t("common.disk"))}}]},natData:[],deleteRowInfo:void 0,formLabelWidth:"30%",ipshow:!1,diskSizeShow:!1,addIpshowDom:!1,isOnClound:!1,hostname:this.$route.params.hostname?"-"+this.$route.params.hostname:"",activeEchartsName:"cloudNetwork",flowStatistics:[{type:this.$t("common.toDay"),accept:"0B",send:"0B",total:"0B",percent:"0%"},{type:this.$t("common.sevenDay1"),accept:"0B",send:"0B",total:"0B",percent:"0%"},{type:this.$t("common.thisMonth"),accept:"0B",send:"0B",total:"0B",percent:"0%"},{type:this.$t("common.days30"),accept:"0B",send:"0B",total:"0B",percent:"0%"}],flowInfo:{tmp_traffic:0,traffic_type:1,traffic_quota:0},flowInfoModel:{show:!1,title:this.$t("common.reviseLimit"),type:"limit",tmp_traffic:0,traffic_quota:0,traffic_type:1,reset_flow_day:1},flowInfoModelRule:{traffic_quota:{required:!0,message:this.$t("common.cannotEmpty"),trigger:"blur"},tmp_traffic:{required:!0,message:this.$t("common.cannotEmpty1"),trigger:"blur"}},elasticDialogVisible:!1,rescue:0,elasticList:[],exportRescue:!1,taskStatus:0}},methods:(i={addIp:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].addNatIp(t.id,{ip_id:Object(r["a"])(t.curIpId)});case 3:t.$message.success(t.$t("common.addSuccess")),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),t.$message.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},addtabsInfo:function(){this.ipDialogShow=!0,this.curIpId=[],this.getFreeIp()},getFreeIp:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={node:t.balanceData.node,uid:t.balanceData.uid},e.next=4,d["a"].getIpFreeList(a);case 4:i=e.sent,s=[],i.forEach((function(t){s=Object(r["a"])(t.ip)})),t.ipList=s,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.$message.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},onCopy:Object(v["b"])((function(){this.$message({message:this.$t("common.copyIpSuccess"),type:"success"})})),onError:Object(v["b"])((function(){this.$message({message:this.$t("common.copyIpFailed"),type:"error"})})),openDialog:function(t){this.elasticDialogVisible=!0,this.elasticList=t.ip},handleUpdateBw:function(){this.isBandWidthDialogShow=!0,this.bandwidth.bw=this.balanceData.bw},submitAddBandwidth:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].updateBw(t.id,{bw:t.bandwidth.bw});case 3:return t.$message.success(t.$t("common.updateSuccess")),e.next=6,t.getNatDetail();case 6:t.getElastic(),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:t.isBandWidthDialogShow=!1;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},getVpcList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={node:t.balanceData.node,user:t.balanceData.uid,list_type:"all"},e.next=4,m["a"].vpcNetworksReq(a);case 4:i=e.sent,t.curVpcId=t.balanceData.vpc,t.vpcList=i.data,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()},changeVpc:function(){this.isVpcDialogShow=!0,this.getVpcList()},editVpc:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={callback:function(){this.getNatDetail()},showMessage:!0},e.next=4,d["a"].changeVpc(t.id,{vpc:t.curVpcId});case 4:i=e.sent,a.id=i.taskid,t.$tool.executeTask(t,a),t.$refs.ComputerInfoLogData.getTaskInfo(),t.isVpcDialogShow=!1,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),t.$message.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},editOpen:function(t){this.isBandWidthDialogShow=!0,this.bandwidth.out_bw=t.out_bw},computedUnit:function(t){if(0===t)return"0 B";var e=1024,a=["B","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return i>3&&(i=3),(t/Math.pow(e,i)).toFixed(2)+" "+a[i]},getStatistics:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].getNatChartTotal(t.id);case 3:if(a=e.sent,a){for(i in a.data)for(s in a.data[i])"percent"!==s&&(a.data[i][s]=t.computedUnit(a.data[i][s]));t.flowStatistics=[{type:t.$t("common.toDay"),accept:a.data.today.in,send:a.data.today.out,total:a.data.today.all,percent:a.data.today.percent.toFixed(2)+"%"},{type:t.$t("common.sevenDay1"),accept:a.data["7_day"].in,send:a.data["7_day"].out,total:a.data["7_day"].all,percent:a.data["7_day"].percent.toFixed(2)+"%"},{type:t.$t("common.thisMonth"),accept:a.data.month.in,send:a.data.month.out,total:a.data.month.all,percent:a.data.month.percent.toFixed(2)+"%"},{type:t.$t("common.days30"),accept:a.data["30_day"].in,send:a.data["30_day"].out,total:a.data["30_day"].all,percent:a.data["30_day"].percent.toFixed(2)+"%"}]}t.flowInfo=a.meta,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},handleClickDialogShow:function(t,e){this.isEditDialogShow=!0,this.dialogTitle=t,this.editInfo=this.balanceData.remark},editRemark:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].updateNatMark(t.id,{remark:t.editInfo});case 3:t.$message.success(t.$t("common.updateSuccess")),t.getNatDetail(),t.isEditDialogShow=!1,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},lockNat:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.balanceData.lock){e.next=8;break}return e.next=4,d["a"].unlockNat(t.id);case 4:t.$message.success(t.$t("nat.unlockSuc")),t.getNatDetail(),e.next=9;break;case 8:t.$confirm(t.$t("nat.sureLock"),t.$t("common.tips"),{confirmButtonText:t.$t("common.sure"),cancelButtonText:t.$t("common.cancel"),type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].lockNat(t.id);case 2:t.$message.success(t.$t("nat.lockSuc")),t.getNatDetail();case 4:case"end":return e.stop()}}),e)})))).catch((function(){}));case 9:e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})))()},stopBalance:Object(v["b"])(Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loadingStatus=!0,t.prev=1,!this.balanceData.enable){t.next=9;break}return t.next=5,u["a"].disableBalance({id:this.id});case 5:e=t.sent,a=this.$t("common.msg85"),t.next=13;break;case 9:return t.next=11,u["a"].enableBalance({id:this.id});case 11:e=t.sent,a=this.$t("common.msg86");case 13:t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](1),this.loadingStatus=!1;case 18:i={id:e.taskid,callback:function(){this.$message.success(a),this.loadingStatus=!1},showMessage:!1},this.$tool.executeTask(this,i),this.$refs.ComputerInfoLogData.getTaskInfo();case 21:case"end":return t.stop()}}),t,this,[[1,15]])})))),handleClickMainbutton:function(){this.loadingStatus=!0},delNat:function(){if(this.balanceData.lock)return this.$message.info(this.$t("nat.delTip"));this.delInfo.custom=this.$t("nat.sure")+"NAT"+this.$t("common.gateway")+this.balanceData.name+this.$t("common.msg41"),this.delInfo.isShowDelDialog=!0},submitDeleteRow:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.checked?1:0,e.next=4,d["a"].deleteNat(t.id,{force:a});case 4:t.$message.success(t.$t("area.successfullyDeleted")),t.$router.back(),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},getNatDetail:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].getNatDetail(t.id);case 3:a=e.sent,a.ip.length?t.showIp=a.ip[0].ip:t.showIp=a.ipaddress,t.natData=[{ipaddress:a.ipaddress,nat_mac:a.mac,nat_name:a.name,in_bw:a.in_bw,out_bw:a.out_bw,mac:a.mac,bw:a.bw}],t.balanceData=a,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:t.$refs.ComputerInfoLogData.getTaskInfo();case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},getElastic:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].getNatIpList(t.id,t.pageInfo);case 2:a=e.sent,t.showGroupList=[{ip:a.data,bw:t.balanceData.bw}];case 4:case"end":return e.stop()}}),e)})))()},changeVpc3:function(){switch(this.vpc_ips.vpc6.value){case 16:this.vpc_ips.vpc3=0;break;case 17:this.vpc_ips.vpc3=this.near([0,128],this.vpc_ips.vpc3);break;case 18:this.vpc_ips.vpc3=this.near([0,64,128,192],this.vpc_ips.vpc3);break;case 19:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(32,224))),this.vpc_ips.vpc3);break;case 20:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(16,240))),this.vpc_ips.vpc3);break;case 21:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(8,248))),this.vpc_ips.vpc3);break;case 22:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(4,252))),this.vpc_ips.vpc3);break;case 23:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(2,254))),this.vpc_ips.vpc3);break}},handleClickSystem:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i={str:"open"===t?e.$t("common.open"):e.$t("common.close"),callback:function(){this.getNatDetail()},showMessage:!0},"open"===t?e.$swal.fire({title:e.$t("common.open1"),icon:"warning",showCancelButton:!0,confirmButtonText:e.$t("common.sure"),cancelButtonText:e.$t("common.cancel")}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value){t.next=10;break}return e.$swal.fire("",e.$t("common.beOpen"),"success"),t.next=4,u["a"].openBalance({id:e.id});case 4:s=t.sent,e.loadingStatus=!0,e.exceptStatus="on",i.id=s.taskid,e.$tool.executeTask(e,i),e.$refs.ComputerInfoLogData.getTaskInfo();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):"close"===t&&e.$swal.fire({title:e.$t("common.close1"),icon:"warning",showCancelButton:!0,confirmButtonText:e.$t("common.sure"),cancelButtonText:e.$t("common.cancel")}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value){t.next=10;break}return e.$swal.fire("",e.$t("common.closeUp"),"success"),t.next=4,u["a"].closeBalance({id:e.id});case 4:s=t.sent,e.loadingStatus=!0,e.exceptStatus="off",i.id=s.taskid,e.$tool.executeTask(e,i),e.$refs.ComputerInfoLogData.getTaskInfo();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)})))()},getBalanceStatus:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.newTaskStatus="init",a.next=3,u["a"].BalanceStatus({id:e.id});case 3:i=a.sent,i&&("task"===i.status?(e.mainbuttonAlt=i.task_name,setTimeout((function(){e.getBalanceStatus()}),3e3)):"on"===i.status?e.mainbuttonAlt=e.$t("common.open"):"off"===i.status?e.mainbuttonAlt=e.$t("common.close"):"suspend"===i.status?e.mainbuttonAlt=e.$t("common.deactivate"):e.mainbuttonAlt=e.$t("common.unknown"),e.newTaskStatus=i.status,"handle"===t&&i.status&&(e.loadingStatus=!1));case 5:case"end":return a.stop()}}),a)})))()},changeVpc4:function(){switch(this.vpc_ips.vpc6.value){case 25:this.vpc_ips.vpc4=this.near([0,128],this.vpc_ips.vpc4);break;case 26:this.vpc_ips.vpc4=this.near([0,64,128,192],this.vpc_ips.vpc4);break;case 27:this.vpc_ips.vpc4=this.near([0].concat(Object(r["a"])(this.productArr(32,224))),this.vpc_ips.vpc4);break;case 28:this.vpc_ips.vpc4=this.near([0].concat(Object(r["a"])(this.productArr(16,240))),this.vpc_ips.vpc4);break}},productArr:function(t,e){for(var a=[],i=t;i<e+1;i+=t)a.push(i);return a},near:function(t,e){return t.sort((function(t,a){return Math.abs(t-e)-Math.abs(a-e)})),t[0]},changeVpcMask:function(t){switch(t){case 16:this.vpc_ips.vpc3=0,this.vpc_ips.vpc4=0;break;case 17:this.vpc_ips.vpc3=this.near([0,128],this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range2"),this.vpc_ips.vpc4=0;break;case 18:this.vpc_ips.vpc3=this.near([0,64,128,192],this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range3"),this.vpc_ips.vpc4=0;break;case 19:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(32,224))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range4"),this.vpc_ips.vpc4=0;break;case 20:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(16,240))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range5"),this.vpc_ips.vpc4=0;break;case 21:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(8,248))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range6"),this.vpc_ips.vpc4=0;break;case 22:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(4,252))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range7"),this.vpc_ips.vpc4=0;break;case 23:this.vpc_ips.vpc3=this.near([0].concat(Object(r["a"])(this.productArr(2,254))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range8"),this.vpc_ips.vpc4=0;break;case 24:this.vpc_ips.vpc3Tips=this.$t("cloud.range9"),this.vpc_ips.vpc4=0;break;case 25:this.vpc_ips.vpc4=this.near([0,128],this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range2"),this.vpc_ips.vpc3Tips=this.$t("cloud.range1");break;case 26:this.vpc_ips.vpc4=this.near([0,64,128,192],this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range3"),this.vpc_ips.vpc3Tips=this.$t("cloud.range1");break;case 27:this.vpc_ips.vpc4=this.near([0].concat(Object(r["a"])(this.productArr(32,224))),this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range4"),this.vpc_ips.vpc3Tips=this.$t("cloud.range1");break;case 28:this.vpc_ips.vpc4=this.near([0].concat(Object(r["a"])(this.productArr(16,240))),this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range5"),this.vpc_ips.vpc3Tips=this.$t("cloud.range1");break}},changeVpcIp:function(){switch(this.vpc_ips.vpc1.value){case 10:this.vpc_ips.vpc1.tips=this.$t("cloud.range1"),this.vpc_ips.min=0,this.vpc_ips.max=255;break;case 172:this.vpc_ips.vpc1.tips=this.$t("cloud.range10"),(this.vpc_ips.vpc2<16||this.vpc_ips.vpc2>31)&&(this.vpc_ips.vpc2=16),this.vpc_ips.min=16,this.vpc_ips.max=31;break;case 192:this.vpc_ips.vpc1.tips=this.$t("cloud.range11"),this.vpc_ips.vpc2=168,this.vpc_ips.min=168,this.vpc_ips.max=168;break}},callPolice:function(t){var e=t.row,a=(t.column,t.rowIndex,t.columnIndex);if(4===a&&parseFloat(e.percent)>100)return"callPolice"},refreshCloudStatus:function(t){this.getNatDetail(),this.refreshStatus(),this.exceptStatus="on"},resetAddDiskForm:function(){var t=this;this.addDiskForm={id:null,size:null,store:null},setTimeout((function(){t.$refs.addDiskForm.clearValidate()}),0)},resetForm:function(){var t=this;setTimeout((function(){t.$refs.upgradeForm.resetFields()}),0)},isSuspend:function(){return"suspend"===this.newTaskStatus&&(this.$message({message:this.$t("common.msg16"),type:"error"}),!0)},handleClickVnc:function(){var t=this;if(!this.isSuspend()){var e={id:this.id};this.$api.mainframeVnc(e).then((function(e){t.isCursomerVersion?window.open(e.url):window.open("".concat(p["a"],"/novnc?token=").concat(e.token,"&vnc_token=").concat(e.vnc_pass,"&host_token=").concat(e.password))})).catch((function(e){e.data.error=e.data.error===t.$t("common.vncIsNotEnabled")?t.$t("common.notEnableConsole"):e.data.error,t.$message.error(e.data.error)}))}},clickComputeropeaButton:function(){},deleteNetwork:function(t){this.deleteRowInfo=t,this.isSuspend()||(this.dialogDeleteShow=!0)},deleteIntranetNetWork:function(){var t=this,e={id:this.deleteRowInfo.id};this.$api.deleteIntranetNetWork(e).then((function(e){setTimeout((function(){t.refreshNetwork(),t.$message({message:t.$t("common.deleteSuccess"),type:"success"})}),2e3)})).catch((function(e){t.$message.error(e.data.error)}))},bwFormatter:function(t){return"".concat(this.cloudDetailInfo.default_bw_group.in_bw," / ").concat(this.cloudDetailInfo.default_bw_group.out_bw,"Mbps")},reviseNetwork:function(t){var e=this;this.isSuspend()||(this.dataRow=t,t.bridge===this.$t("common.internalNetwork")?(this.isAddNetwork=!1,this.addNetWorkForm.mac=t.mac,this.addNetWorkForm.id=t.id,this.addNetWorkForm.niccard=t.niccard,this.addNetWorkForm.vlan=t.vlan,this.addNetWorkForm.ip=t.ipaddress,this.addNetWorkForm.subnet_mask=t.subnet_mask,this.networkTableAdd=!0):(this.networkForm.id=t.id,this.networkTableEdit=!0,this.ipshow=t.bridge===this.$t("common.internalNetwork"),this.networkForm.mac=t.mac,this.networkForm.ipaddress=t.ipaddress,this.networkForm.niccard_name=t.niccard_name,this.networkForm.in_bw=this.cloudDetailInfo.default_bw_group.in_bw,this.networkForm.out_bw=this.cloudDetailInfo.default_bw_group.out_bw,this.networkForm.mainip=this.cloudDetailInfo.mainip,this.networkForm.bind_mac=t.bind_mac,this.cloudDetailInfo.ip.forEach((function(t){t.ipaddress===e.cloudDetailInfo.mainip&&(e.networkForm.mainip=t.id)}))))},editDisk:function(t){this.isSuspend()||(t.type===this.$t("common.systemDisk")?this.diskSizeShow=!1:this.diskSizeShow=!0,this.diskTableEdit=!0,this.diskForm.id=t.id,this.diskForm.size=t.size,this.dataRow=t,this.diskForm.driver=t.driver,this.diskForm.cache=t.cache,this.diskForm.io=t.io,this.diskForm.read_bytes_sec=t.read_bytes_sec,this.diskForm.write_bytes_sec=t.write_bytes_sec,this.diskForm.read_iops_sec=t.read_iops_sec,this.diskForm.write_iops_sec=t.write_iops_sec,this.diskForm.read_bytes_sec_max=t.read_bytes_sec_max,this.diskForm.write_bytes_sec_max=t.write_bytes_sec_max,this.diskForm.read_iops_sec_max=t.read_iops_sec_max,this.diskForm.write_iops_sec_max=t.write_iops_sec_max)}},Object(o["a"])(i,"onCopy",Object(v["b"])((function(){this.$message({message:this.$t("common.copyIpSuccess"),type:"success"})}))),Object(o["a"])(i,"onError",Object(v["b"])((function(){this.$message({message:this.$t("common.copyIpFailed"),type:"error"})}))),Object(o["a"])(i,"storeFormatter",(function(t){return"local"===t.store_type?"".concat(t.store_name," - ").concat(this.$t("common.local")):"".concat(t.store_name," - ").concat(t.store_type)})),Object(o["a"])(i,"rowStyle",(function(t){t.row,t.rowIndex;var e={height:"43px"};return e})),Object(o["a"])(i,"refreshStatus",(function(){var t=this;!(arguments.length>0&&void 0!==arguments[0])||arguments[0];clearTimeout(this.timeOut),clearInterval(this.timeInterval),this.timeOut=setTimeout((function(){clearInterval(t.timeInterval)}),12e4)})),Object(o["a"])(i,"resetFloatGroupForm",(function(){var t=this;this.networkForm={id:null,mac:null,bridge:null,ipaddress:"",niccard_name:"",in_bw:null,out_bw:null,mainip:null,bind_mac:1},setTimeout((function(){t.$refs.networkForm.clearValidate()}),0)})),Object(o["a"])(i,"resize",(function(){var t=this;setTimeout((function(){t.$refs.flowEcharts.resize(t.activeEchartsName)}),200)})),Object(o["a"])(i,"clearFlow",(function(t){var e=this;this.flowInfoModel.type=t,"clear"===t?this.$swal.fire({title:this.$t("common.msg38"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then((function(t){t.isConfirmed&&(e.flowInfoModel.type="clear",e.updateCloud())})):"limit"===t&&(this.flowInfoModel.tmp_traffic=this.flowInfo.tmp_traffic,this.flowInfoModel.traffic_quota=this.flowInfo.traffic_quota,this.flowInfoModel.traffic_type=this.flowInfo.traffic_type,this.flowInfoModel.reset_flow_day=this.flowInfo.reset_flow_day,this.flowInfoModel.show=!0,this.flowInfoModel.title=this.$t("common.billingSettings"))})),Object(o["a"])(i,"updateCloud",(function(){var t=this;this.$refs.flowInfoModelRef.validate((function(e){if(e){var a={id:t.id};"clear"===t.flowInfoModel.type?a.tmp_traffic=0:"limit"===t.flowInfoModel.type&&(a.tmp_traffic=t.flowInfoModel.tmp_traffic,a.traffic_type=t.flowInfoModel.traffic_type,a.traffic_quota=t.flowInfoModel.traffic_quota,a.reset_flow_day=t.flowInfoModel.reset_flow_day),t.flowInfoModel.show=!1,u["a"].editBalance(a).then((function(e){"clear"===t.flowInfoModel.type?t.$message.success(t.$t("common.clearSuccess")):"limit"===t.flowInfoModel.type&&(t.$message.success(t.$t("common.updateSuccess")),t.cloudDetailInfo.reset_flow_day=a.reset_flow_day,t.getStatistics())}))}}))})),i),created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$route.query.id&&(t.id=parseInt(t.$route.query.id)),e.next=3,t.getNatDetail();case 3:t.getStatistics(),t.getElastic(),window.addEventListener("resize",t.resize);case 6:case"end":return e.stop()}}),e)})))()},destroyed:function(){window.removeEventListener("resize",this.resize),clearTimeout(this.timeOut),clearInterval(this.timeInterval)}},G=V,U=(a("d151"),Object(y["a"])(G,s,n,!1,null,"977b3b3a",null));e["default"]=U.exports},"6cd3":function(t,e,a){"use strict";var i=a("a27e");e["a"]={getElasticIpList:function(t){return Object(i["b"])("/elastic_ip",t)},createElasticIp:function(t){return Object(i["c"])("/elastic_ip",t)},attachElasticIp:function(t,e){return Object(i["c"])("/elastic_ip/".concat(t,"/attach"),e)},detachElasticIp:function(t){return Object(i["c"])("/elastic_ip/".concat(t.id,"/detach"))},deleteElasticIp:function(t){return Object(i["a"])("/elastic_ip/".concat(t))},getCloudList:function(t){return Object(i["b"])("/clouds",t)},getLoaBalanceList:function(t){return Object(i["b"])("/load_balance",t)},getFunctionSwitch:function(){return Object(i["b"])("/config/function_switch")}}},"768b":function(t,e,a){},"7f88":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-card",[a("div",{staticClass:"crumbs-wrapper"},[a("div",{staticClass:"nat-tit"},[t._v(t._s("NAT"+t.$t("common.gateway")+t.$t("common.recycleBin")))])]),a("metalTable",{ref:"tableRef",attrs:{tableLoading:t.tableLoading,tableData:t.tableData,total:t.total,orderby:t.orderby,sorting:t.sorting,page:t.page,pageSize:t.pageSize,search:t.search},on:{getTableData:t.getTableData,"selection-change":t.selectionChange,"update:orderby":function(e){t.orderby=e},"update:sorting":function(e){t.sorting=e},"update:page":function(e){t.page=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:search":function(e){t.search=e}},scopedSlots:t._u([{key:"button",fn:function(){return[a("cl-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.openDialog(e)}}},[t._v(t._s(t.$t("common.Setting"))+" ")])]},proxy:!0},{key:"table",fn:function(){return[a("el-table-column",{attrs:{"class-name":"selection",type:"selection",width:"20",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}),a("el-table-column",{attrs:{prop:"user",label:t.$t("common.user"),"min-width":"160","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("router-link",{attrs:{to:{name:"NatDetails",query:{id:i.id}}}},[a("el-link",{staticClass:"text-ellipsis",attrs:{type:"primary"}},[t._v(t._s(i.name))])],1)]}}])}),a("el-table-column",{attrs:{prop:"mainip",label:"IP","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[i.ip.length>0?a("p",{staticClass:"nat-ip",on:{click:function(e){return t.showIp(i)}}},[t._v(t._s(i.ip[0].ip)+" "),i.ip.length>1?a("span",{staticClass:"nat-num"},[t._v("("+t._s(i.ip.length)+")")]):t._e()]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"bw",label:t.$t("common.bandwidth"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.bw)+"Mbps ")]}}])}),a("el-table-column",{attrs:{prop:"vpc",label:"VPC","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.vpc_name+"("+a.vpc_ips+")")+" ")]}}])}),a("el-table-column",{attrs:{prop:"user.username",label:t.$t("common.user"),"min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.username)+" ")]}}])}),a("el-table-column",{attrs:{prop:"recycle_time",label:t.$t("common.recycleStationTime"),width:"180"}}),a("el-table-column",{attrs:{prop:"delete_time",label:t.$t("common.deleteTime"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tooltip",{attrs:{content:i.delete_time}},[a("div",{staticClass:"cursor"},[t._v(t._s(t.$tool.getDateDiff(i.delete_time)))])])]}}])}),a("el-table-column",{attrs:{label:t.$t("common.manage"),width:"158",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{type:"restore"},on:{click:function(e){return t.removeRow(i)}}}),a("cl-button",{attrs:{type:"delete"},on:{click:function(e){return t.deleteRow(i)}}})],1)]}}])})]},proxy:!0},{key:"batch",fn:function(){return[a("el-dropdown",{attrs:{szie:"small"}},[a("span",{staticClass:"el-dropdown-link delete-btn",staticStyle:{outline:"none",display:"inline-block","min-width":"70px"}},[t._v(" "+t._s(t.$t("common.batch"))+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{on:{click:function(e){t.massOperation("restore",t.$t("common.restore"))}}},[t._v(t._s(t.$t("common.restore"))+" ")])]),a("el-dropdown-item",[a("div",{on:{click:function(e){t.massOperation("delete",t.$t("common.delete"))}}},[t._v(" "+t._s(t.$t("common.removeCompletely"))+" ")])])],1)],1)]},proxy:!0}])}),a("el-dialog",{attrs:{title:t.$t("common.stationDeleteTime"),visible:t.isShowDialog,width:"500px"},on:{"update:visible":function(e){t.isShowDialog=e},closed:t.closeDialog}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.formRule,size:"medium","label-width":"140px","label-position":t.$globalConfig.labelPosition}},[a("el-form-item",{attrs:{label:t.$t("common.stationDeleteTime"),prop:"nat_gateway_recycle_bin"}},[a("el-input-number",{staticClass:"fl mr-20",staticStyle:{width:"200px"},attrs:{controls:!1,precision:0,min:0,max:100},model:{value:t.formData.nat_gateway_recycle_bin,callback:function(e){t.$set(t.formData,"nat_gateway_recycle_bin",e)},expression:"formData.nat_gateway_recycle_bin"}}),a("div",{staticClass:"slider_box_unit fl"},[t._v(t._s(t.$t("common.Day"))+" ")])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowDialog=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$t("common.sure")))])],1)],1)],1)],1)},s=[],n=(a("4160"),a("d81d"),a("b0c0"),a("dca8"),a("ac1f"),a("841c"),a("159b"),a("96cf"),a("1da1")),o=(a("d9e2"),a("d75a")),r=a("4873"),c=a("8491"),l={metaInfo:function(){return{title:this.$t("common.recycleBin")}},mixins:[o["a"]],components:{},data:function(){return{tableData:[],total:0,isAgent:JSON.parse(localStorage.getItem("isAgent")),tableLoading:!1,orderby:"id",checkRow:[],formData:{nat_gateway_recycle_bin:1},formRule:{nat_gateway_recycle_bin:{required:!0,message:this.$t("common.recycleStationTime"),trigger:"blur"}},isShowDialog:!1}},computed:{},watch:{},mounted:function(){var t=this.$searchAlive.urlGetData();t.search&&(this.search=t.search,this.$refs.tableRef.metalSearch=t.search,this.$refs.tableRef.getTableData())},created:function(){this.getConfigReq()},methods:{getConfigReq:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].getConfigReq();case 3:a=e.sent,t.formData.nat_gateway_recycle_bin=a.nat_gateway_recycle_bin,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},openDialog:function(){this.isShowDialog=!0},submitForm:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].setConfigReq({nat_gateway_recycle_bin:t.formData.nat_gateway_recycle_bin});case 2:t.isShowDialog=!1,t.$message.success(t.$t("common.setSuccess")),t.getConfigReq();case 5:case"end":return e.stop()}}),e)})))()},getTableData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$searchAlive.urlUpdate({search:t.search},location.href,t.$route.query),e.prev=1,t.tableLoading=!0,a={orderby:t.orderby,sort:t.sorting,per_page:t.pageSize,search:t.search,page:t.page,status:"recycle"},e.next=6,r["a"].getNatList(a);case 6:i=e.sent,i||(t.tableData=[],t.page=1,t.total=0),t.tableData=Object.freeze(i.data),t.total=i.meta.total,e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](1);case 14:return e.prev=14,t.tableLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,12,14,17]])})))()},deleteRow:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$swal.fire({title:this.$t("common.msg45")+t.name+this.$t("common.why")+"？",icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i.isConfirmed){a.next=5;break}return a.next=3,r["a"].deleteNat(t.id,{force:1});case 3:e.$message.success(e.$t("common.deleteSuccess")),e.getTableData();case 5:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())},massDeleteRow:function(){var t=this;this.$swal.fire({title:this.$t("nat.deleteNat"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.isConfirmed&&(t.checkRow.forEach(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].deleteNat(a,{force:1});case 2:t.getTableData();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.$message.success(t.$t("common.deleteSuccess")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},removeRow:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",i="single"===a?this.$t("common.determineRecovery")+t.name+this.$t("common.why")+"？":this.$t("nat.backNat"),s="single"===a?[t.id]:this.checkRow;this.$swal.fire({title:i,icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.isConfirmed){t.next=5;break}return t.next=3,r["a"].backNat({id:s});case 3:e.$message.success(e.$t("common.recoverySuccess")),e.getTableData();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},optionRecyle:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].setConfigReq(t.formData);case 2:t.form.formDialogVisable=!1,t.$message.success(t.$t("common.setSuccess")),t.$store.commit("setRecycleBin",t.formData.recycle_bin);case 5:case"end":return e.stop()}}),e)})))()},selectionChange:function(t){this.checkRow=t.map((function(t){return t.id}))},massOperation:function(t){if(0===this.checkRow.length)return this.$message.warning(this.$t("databaseBackup.chooseFirst")),!1;switch(t){case"restore":this.removeRow(null,"multiline");break;case"delete":this.massDeleteRow();break}}}},p=l,u=(a("5241"),a("2877")),d=Object(u["a"])(p,i,s,!1,null,"ab51f5ec",null);e["default"]=d.exports},"8fa4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nat"},[a("el-card",{staticClass:"box-card"},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{staticClass:"areaList",attrs:{name:"natList"}},[a("crumbs"),a("div",{staticClass:"node-management-row"},[a("div",{staticClass:"management-left"},[a("searchInput",{attrs:{placeholder:t.$t("common.ipAddress")+"/"+t.$t("common.name")+"/vpc"},on:{callback:t.searchCallback},model:{value:t.pageInfo.search,callback:function(e){t.$set(t.pageInfo,"search",e)},expression:"pageInfo.search"}})],1),a("div",{staticClass:"button-wrapper"},[a("addButton",{attrs:{text:t.$t("common.establish")},nativeOn:{click:function(e){return t.createNat(e)}}}),a("router-link",{staticClass:"ml-5",attrs:{to:{name:"NatRecycle"}}},[a("el-button",{attrs:{type:"success",size:"small"}},[t._v(t._s(t.$t("common.recycleBin"))+" ")])],1)],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":t.$t("common.loading"),data:t.areaData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"150"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:t.$t("common.name")},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var i=e.row;return[a("router-link",{staticClass:"text-ellipsis",attrs:{to:{name:"NatDetails",query:{id:i.id}}}},[a("el-link",{staticClass:"text-ellipsis",attrs:{type:"primary"}},[t._v(t._s(i.name))])],1)]}}])}),a("el-table-column",{attrs:{prop:"ip",label:t.$t("common.ipAddress")},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var i=e.row;return[i.ip.length>0?a("p",{staticClass:"nat-ip",on:{click:function(e){return t.showIp(i)}}},[t._v(t._s(i.ip[0].ip)+" "),i.ip.length>1?a("span",{staticClass:"nat-num"},[t._v("("+t._s(i.ip.length)+")")]):t._e()]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"bw",label:t.$t("common.bandwidth")},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.bw+"MBps")+" ")]}}])}),a("el-table-column",{attrs:{prop:"vpc",label:"VPC",width:"350"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}},{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.vpc_name+"("+a.vpc_ips+")")+" ")]}}])}),a("el-table-column",{attrs:{prop:"username",label:t.$t("common.user")},scopedSlots:t._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property},on:{callbackChangeOrder:t.handleCallbackChangeOrder}})]}}])}),a("el-table-column",{attrs:{prop:"remark",label:t.$t("common.remark"),width:"115","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.remark)+" ")]}}])}),a("el-table-column",{attrs:{label:t.$t("common.manage"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{type:"update"},on:{click:function(e){return t.handleModify(i)}}}),a("cl-button",{attrs:{type:"delete"},on:{click:function(e){return t.deleteRow(i)}}})],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.pageInfo.page,"page-sizes":[10,20,50,100],"page-size":t.pageInfo.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.pageInfo.total},on:{"size-change":t.getData,"current-change":t.getData,"update:currentPage":function(e){return t.$set(t.pageInfo,"page",e)},"update:current-page":function(e){return t.$set(t.pageInfo,"page",e)},"update:pageSize":function(e){return t.$set(t.pageInfo,"per_page",e)},"update:page-size":function(e){return t.$set(t.pageInfo,"per_page",e)}}})],1)],1)],1)],1),a("el-dialog",{attrs:{title:t.$t("systemLog.ipAddress"),visible:t.isShowIpDialog,width:"400px"},on:{"update:visible":function(e){t.isShowIpDialog=e}}},t._l(t.ipList,(function(e){return a("p",{key:e.id},[t._v(" "+t._s(e.ip)+" "),a("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.ip,expression:"item.ip"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document-copy"})])})),0),a("el-dialog",{attrs:{title:t.$t("nat.updateBw"),visible:t.isShowBwDialog,width:"500px"},on:{"update:visible":function(e){t.isShowBwDialog=e}}},[a("el-form",{ref:"bwForm",attrs:{model:t.bwForm,rules:t.rules}},[a("el-form-item",{attrs:{label:t.$t("common.bandwidth"),"label-width":t.formLabelWidth,prop:"bw"}},[a("el-input",{staticStyle:{width:"79%"},attrs:{autocomplete:"off"},model:{value:t.bwForm.bw,callback:function(e){t.$set(t.bwForm,"bw",e)},expression:"bwForm.bw"}}),a("span",{staticClass:"bit"},[t._v("Mbps")])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowBwDialog=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.subminReviseForm}},[t._v(t._s(t.$t("common.sure"))+" ")])],1)],1),a("deleteDialog",{staticClass:"deleteDialog",attrs:{keyword:"name",isShowDelDialog:t.isShowDelDialog,custom:t.custom},on:{submitDeleteRow:t.submitDeleteRow,"update:isShowDelDialog":function(e){t.isShowDelDialog=e},"update:is-show-del-dialog":function(e){t.isShowDelDialog=e}},scopedSlots:t._u([{key:"radio",fn:function(){return[a("div",{staticClass:"mt-20 mb-20"},[a("el-checkbox",{model:{value:t.forceChecked,callback:function(e){t.forceChecked=e},expression:"forceChecked"}},[t._v(t._s(t.$t("common.forcedDelete"))+" "),a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:t.$t("nat.forcedDelete")}},[a("i",{staticClass:"el-icon-question",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1)],1)]},proxy:!0}])})],1)},s=[],n=(a("b0c0"),a("ac1f"),a("841c"),a("830e")),o=a("6773"),r=a("4873"),c=a("dc57"),l={metaInfo:function(){return{title:"NAT"+this.$t("common.gateway")}},components:{crumbs:n["default"],addButton:o["default"]},data:function(){var t=this;return{loading:!1,isAdvance:!1,charged:0,AdvanceInfo:{},rowInfo:"",checked:!1,isShowDelDialog:!1,isShowIpDialog:!1,isShowBwDialog:!1,areaData:[],ipList:[],bwForm:{bw:""},activeName:"natList",dialogTableRevise:!1,formLabelWidth:"100px",custom:"",pageInfo:{page:1,per_page:20,total:0,search:"",orderby:"id",sort:"desc"},forceChecked:!1,rules:{bw:[{required:!0,message:this.$t("config.create.require")+this.$t("cloud.bandwidth"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope(e,a,i,0,3e4,t.$t("common.bandwidth"))}}]}}},methods:{onCopy:Object(c["b"])((function(){this.$message({message:this.$t("common.copyIpSuccess"),type:"success"})})),onError:Object(c["b"])((function(){this.$message({message:this.$t("common.copyIpFailed"),type:"error"})})),createNat:function(){return 0===this.$store.state.config.edition?this.$message(this.$t("common.msg8")):2===this.$store.state.config.edition?this.$message(this.$t("common.msg228")):1!==this.$store.state.functionSwitch.fs_nat_gateway?this.$message(this.$t("nat.tip")):void this.$router.push("/add-nat")},getData:function(){var t=this;this.$searchAlive.urlUpdate({search:this.pageInfo.search},location.href,this.$route.query),this.loading=!0,r["a"].getNatList(this.pageInfo).then((function(e){t.loading=!1,t.areaData=e.data,t.pageInfo.total=e.meta.total,t.pageInfo.total_page=e.meta.total_page})).catch((function(){t.loading=!1}))},searchCallback:function(){this.pageInfo.page=1,this.getData()},deleteRow:function(t){this.rowInfo=t,this.isShowDelDialog=!this.isShowDelDialog,this.custom=this.$t("nat.sure")+"NAT"+this.$t("common.gateway")+t.name+this.$t("common.msg41")},submitDeleteRow:function(){var t=this,e=this.rowInfo,a=this.checked?1:0;r["a"].deleteNat(e.id,{force:a}).then((function(e){t.$message({message:t.$t("area.successfullyDeleted"),type:"success"}),t.getData()}),(function(e){t.$message.error(e.data.error)})).catch((function(e){t.$message.error(e.data.error)}))},handleCallbackChangeOrder:function(t){this.pageInfo.orderby=t.orderby,this.pageInfo.sort=!0===t.sort?"asc":"desc",this.getData()},handleModify:function(t){return 0===this.$store.state.config.edition?this.$message(this.$t("common.msg8")):2===this.$store.state.config.edition?this.$message(this.$t("common.msg228")):1!==this.$store.state.functionSwitch.fs_nat_gateway?this.$message(this.$t("elastic.tip")):(this.rowInfo=t,this.isShowBwDialog=!0,void(this.bwForm.bw=t.bw))},showIp:function(t){this.isShowIpDialog=!0,this.ipList=t.ip},subminReviseForm:function(){var t=this;this.$refs.bwForm.validate((function(e){if(!e)return!1;r["a"].updateBw(t.rowInfo.id,t.bwForm).then((function(e){t.isShowBwDialog=!1,t.getData(),t.$message.success(t.$t("common.updateSuccess"))})).catch((function(e){t.$message.error(e.data.error)}))}))}},created:function(){var t=this.$searchAlive.urlGetData();t&&(this.pageInfo.search=t.search),this.getData()}},p=l,u=(a("9fcf"),a("2877")),d=Object(u["a"])(p,i,s,!1,null,"80453e24",null);e["default"]=d.exports},"922c":function(t,e,a){},"9fcf":function(t,e,a){"use strict";var i=a("0c87"),s=a.n(i);s.a},a50d:function(t,e,a){"use strict";var i=a("e50d"),s=a.n(i);s.a},bdf1:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-card",{staticStyle:{position:"relative"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"font-weight font16",staticStyle:{"margin-bottom":"30px"}},[t._v(" "+t._s(t.$t("common.establish")+t.$t("elastic.elastic_ip")))])]),a("br"),a("el-form",{ref:"addCloudsForm",attrs:{model:t.addCloudsForm,rules:t.addCloudFormRuls,"label-width":"120px","label-position":t.$globalConfig.labelPosition}},[a("el-form-item",{attrs:{label:t.$t("cloud.selectDataCenter"),prop:"area"}},[a("div",{staticClass:"data_center_box maxw-1500 box-test"},[a("div",t._l(t.areaSelectOptions,(function(e,i){return a("div",{key:"area"+i,staticClass:"center_box_item",on:{click:function(a){return t.areaSelectChange(e.id)}}},[a("div",{staticClass:"box_item_country",class:{box_item_country_actvie:e.id===t.activeId}},[a("img",{attrs:{src:t.$globalUrl+"/common/country/"+e.country_code+".png",alt:""}}),a("div",[t._v(t._s(e.name))])]),a("div",{staticClass:"box_item_node"},[a("el-select",{attrs:{placeholder:t.$t("cloud.selectNode"),size:"mini"},on:{change:function(a){return t.nodeSelectChange(a,e.id)}},model:{value:e.selectNode,callback:function(a){t.$set(e,"selectNode",a)},expression:"areaItem.selectNode"}},t._l(e.node,(function(t,e){return a("el-option",{key:"node"+e,attrs:{label:t.name,value:t.id}})})),1)],1)])})),0)])]),a("el-form-item",{attrs:{label:t.$t("cloud.customer"),prop:"client"}},[a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:t.loadMore,expression:"loadMore"}],staticStyle:{width:"250px"},attrs:{filterable:"",clearable:"",loading:t.loadingUser,remote:"","remote-method":t.remoteMethod,placeholder:t.$t("cloud.pleaseSelectTheGuestFirst")},on:{clear:t.clearHandler,change:t.getVpc},model:{value:t.addCloudsForm.client,callback:function(e){t.$set(t.addCloudsForm,"client",e)},expression:"addCloudsForm.client"}},t._l(t.clientSelectOptions,(function(t,e){return a("el-option",{key:"client"+e,attrs:{label:t.username,value:t.id}})})),1),0===t.addCloudsForm.client?a("el-input",{staticClass:"mr-10 ml-20",staticStyle:{width:"250px"},model:{value:t.addCloudsForm.client_name,callback:function(e){t.$set(t.addCloudsForm,"client_name",e)},expression:"addCloudsForm.client_name"}}):t._e()],1),a("el-form-item",{attrs:{prop:t.ip.isIpAddress?"ip_group":"ip_num"}},[a("el-select",{staticClass:"select-title-system",model:{value:t.ip.isIpAddress,callback:function(e){t.$set(t.ip,"isIpAddress",e)},expression:"ip.isIpAddress"}},[a("el-option",{attrs:{label:t.$t("cloud.ipAddress"),value:!0}})],1),a("div",{staticClass:"fboxRow Ystart"},[a("el-select",{staticStyle:{width:"250px"},attrs:{filterable:"",clearable:"",placeholder:"IP分组"+t.$t("cloud.ipGroup")},on:{change:t.changeIpGroup},model:{value:t.addCloudsForm.ip_group,callback:function(e){t.$set(t.addCloudsForm,"ip_group",e)},expression:"addCloudsForm.ip_group"}},t._l(t.ip.grouplist,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t.ip.isIpAddress?a("el-select",{staticClass:"ml-20",staticStyle:{width:"250px"},attrs:{filterable:"",multiple:"","filter-method":t.changeIp,placeholder:t.$t("common.ipAddress"),"popper-class":"tree-select","collapse-tags":"",clearable:"","reserve-keyword":""},on:{change:t.changeIp,clear:t.clearIp,"visible-change":t.hideSelect},model:{value:t.addCloudsForm.ipaddress,callback:function(e){t.$set(t.addCloudsForm,"ipaddress",e)},expression:"addCloudsForm.ipaddress"}},[a("el-option",{staticStyle:{height:"auto"},attrs:{value:t.selectValue}},[a("el-tree",{ref:"tree",attrs:{data:t.ip.list,"show-checkbox":"","node-key":"id",lazy:"",load:t.loadNode,props:t.defaultProps,"filter-node-method":t.filterNode},on:{check:t.handlerCheckChange}})],1)],1):a("el-input",{staticClass:"ml-10",staticStyle:{width:"250px"},on:{change:function(e){return t.changeIsWidthBandShow()}},model:{value:t.addCloudsForm.ip_num,callback:function(e){t.$set(t.addCloudsForm,"ip_num",e)},expression:"addCloudsForm.ip_num"}})],1)],1),a("el-form-item",{attrs:{size:"large"}},[a("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.submitForm}},[t._v(" "+t._s(t.$t("common.establish")))])],1)],1)],1)],1)},s=[],n=(a("99af"),a("a623"),a("4de4"),a("7db0"),a("4160"),a("a630"),a("caad"),a("c975"),a("d81d"),a("13d5"),a("45fc"),a("d3b7"),a("ac1f"),a("25f0"),a("6062"),a("2532"),a("3ca3"),a("841c"),a("159b"),a("ddb0"),a("53ca")),o=a("2909"),r=(a("96cf"),a("1da1")),c=a("3995"),l=a("8491"),p=(a("18c9"),a("6cd3")),u=a("dc57"),d={metaInfo:function(){return{title:this.$t("elastic.elastic_ip")}},data:function(){var t=this;return{isWidthBandShow:!0,loading:!1,activeId:0,tempMemory:0,bandwidth:0,systemDisk:50,isAdvance:!1,node:{nat_acl:1,nat_web:1},vpc_ips:{vpc1:{tips:this.$t("cloud.range1"),value:10,select:[10,172,192]},vpc2:0,vpc3:0,vpc3Tips:"",vpc4:0,vpc4Tips:"",vpc6:{value:16,select:[16,17,18,19,20,21,22,23,24,25,26,27,28]},min:0,max:255},addCloudsForm:{name:"",system_disk_size:void 0,area:"",node:"",cpu:1,memory:1,gid:void 0,osGroupSvg:void 0,os:void 0,in_bw:0,out_bw:1,network_type:"vpc",vpc:void 0,vpc_name:void 0,store:void 0,client:void 0,client_name:"",hostname:"",rootpass:"",port:null,ip_num:1,ipSelectOptions:[],data_disk_size:0,ipType:"",ip:void 0,num:1,link_clone:0,max_connect:2e3,ipaddress:[],ip_group:void 0,template:void 0,backup_num:3,snap_num:3,nat_acl_limit:-1,nat_web_limit:-1,security_group:0,security_group_name:"",other_data_disk:[],cpu_limit:this.$store.state.config.cpu_limit_percent,vpc_ips:""},cpu_limit:this.$store.state.config.cpu_limit_switch,template:{isTemplate:!1,client:0,list:[],clientSelectOptions:[]},ip:{isIpAddress:!0,groupId:null,grouplist:[],list:[]},natAcl:!1,natWeb:!1,backup:!0,safeGroup:!1,snap:!0,dataDisk:!1,addCloudFormRuls:{backup_num:{required:!0,message:this.$t("cloud.pleaseEnterBackup"),trigger:"blur"},template:{required:!0,message:this.$t("cloud.selectATemplate"),trigger:"blur"},snap_num:{required:!0,message:this.$t("cloud.pleaseEnterASnapshot"),trigger:"blur"},nat_acl_limit:{required:!0,message:this.$t("cloud.pleaseEnterNatForwarding"),trigger:"blur"},nat_web_limit:{required:!0,message:this.$t("cloud.enterNatStation"),trigger:"blur"},vpc_name:[{required:!0,message:this.$t("cloud.NetworkName"),trigger:"blur"},{validator:this.$validate.validateVpcName,trigger:"blur"}],vpc:[{required:!0,message:this.$t("cloud.pleaseSelectANetwork"),trigger:"change"}],os:[{required:!0,message:this.$t("cloud.selectSystem"),trigger:"change"}],network_type:[{required:!0,message:this.$t("cloud.pleaseSelectANetwork"),trigger:"change"}],ip_num:[{required:!0,message:this.$t("common.enterIpSegment"),trigger:"blur"}],port:[{required:!0,message:this.$t("common.enterPost"),trigger:"blur"},{validator:this.$validate.validatePort,trigger:"blur"}],hostname:[{required:!0,message:this.$t("cloud.pleaseEnterTheHostName"),trigger:"blur"},{pattern:/^\S*(?=\S{8,})(?=\S*\d)(?=\S*[A-Za-z])(?!\S*[。=+!@#$%^&*()])\S*$/,message:this.$t("common.pleaseEnterTheCorrectHostName")}],rootpass:[{required:!0,message:this.$t("common.pleaseEnterYourPassword"),trigger:"blur"},{pattern:/^[a-zA-Z0-9\u4e00-\u9fa5]{6,}$/,message:this.$t("common.pleaseEnterTheCorrectPassword")}],vpc_ips:{required:!0,message:this.$t("common.enterInternalIpSegment"),trigger:"blur"},max_connect:[{required:!0,message:this.$t("common.input")+this.$t("common.Maximum"),trigger:"blur"},{validator:function(e,a,i){t.$validate.validateScope2(e,a,i,100,5e5)},trigger:"change"}]},memoryUnit:"GB",bandwidthUnit:"Mbps",areaSelectOptions:[],imageGroupOptions:[],imageOptions:[],clientSelectOptions:[],networkSelectOptions:[],storeSelectOptions:[],safeSelectOptions:[],noMemory:!1,ipTypeSelect:[{name:this.$t("common.ipQuantity"),id:"ipNum"}],userParams:{search:"",page:1,per_page:20,sort:"asc"},isLoading:!1,userTotal:0,searchTotal:0,loadingUser:!1,selectValue:[],defaultProps:{children:"ip",label:"ip_name",isLeaf:"leaf"},curCheck:[]}},watch:{isAdvance:function(t,e){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=a.$refs.addCloudsForm.fields,e.map((function(t){var e=[["ip_num","ipaddress","backup_num","snap_num","nat_acl_limit","nat_web_limit","store","data_disk_size"]];if(e.includes(t.prop))return t.resetField(),!1})),a.dataDisk=!1,a.addCloudsForm.ip_num=1,a.ip.isIpAddress=!1,a.addCloudsForm.ip_group=void 0;case 6:case"end":return t.stop()}}),t)})))()},"addCloudsForm.nat_web_limit":function(t){t>=0&&(this.addCloudsForm.network_type="vpc")},"addCloudsForm.nat_acl_limit":function(t){t>=0&&(this.addCloudsForm.network_type="vpc")},"template.client":{handler:function(t){this.getTemplateList(t)}},minSystemDisk:function(t){this.template.isTemplate&&this.systemDisk<t?this.systemDisk=t:this.template.isTemplate||(this.systemDisk=50)},storeCeph:function(t){t||(this.addCloudsForm.store=void 0)},"addCloudsForm.gid":function(t){this.systemDisk=1===t?this.$store.state.config.system_disk_size_for_windows:this.$store.state.config.system_disk_size_for_other},vpcIps:{handler:function(t){this.addCloudsForm.vpc_ips=t},immediate:!0,deep:!0}},computed:{vpcName:function(){var t=this,e=this.networkSelectOptions.find((function(e){return e.id===t.addCloudsForm.vpc}));return e?e.ips:""},vpcIps:function(){if(void 0!==this.vpc_ips.vpc2&&void 0!==this.vpc_ips.vpc3&&void 0!==this.vpc_ips.vpc4){var t=this.vpc_ips.vpc1.value+"."+this.vpc_ips.vpc2+"."+this.vpc_ips.vpc3+"."+this.vpc_ips.vpc4+"/"+this.vpc_ips.vpc6.value;return t}return""}},methods:{changeIsWidthBandShow:function(){"0"===this.addCloudsForm.ip_num?this.isWidthBandShow=!1:this.isWidthBandShow=!0},changeVpc3:function(){switch(this.vpc_ips.vpc6.value){case 16:this.vpc_ips.vpc3=0;break;case 17:this.vpc_ips.vpc3=this.near([0,128],this.vpc_ips.vpc3);break;case 18:this.vpc_ips.vpc3=this.near([0,64,128,192],this.vpc_ips.vpc3);break;case 19:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(32,224))),this.vpc_ips.vpc3);break;case 20:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(16,240))),this.vpc_ips.vpc3);break;case 21:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(8,248))),this.vpc_ips.vpc3);break;case 22:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(4,252))),this.vpc_ips.vpc3);break;case 23:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(2,254))),this.vpc_ips.vpc3);break}},changeVpc4:function(){switch(this.vpc_ips.vpc6.value){case 25:this.vpc_ips.vpc4=this.near([0,128],this.vpc_ips.vpc4);break;case 26:this.vpc_ips.vpc4=this.near([0,64,128,192],this.vpc_ips.vpc4);break;case 27:this.vpc_ips.vpc4=this.near([0].concat(Object(o["a"])(this.productArr(32,224))),this.vpc_ips.vpc4);break;case 28:this.vpc_ips.vpc4=this.near([0].concat(Object(o["a"])(this.productArr(16,240))),this.vpc_ips.vpc4);break}},productArr:function(t,e,a){for(var i=[],s=t;s<e+1;s+=t)i.push(s);return i},near:function(t,e){return t.sort((function(t,a){return Math.abs(t-e)-Math.abs(a-e)})),t[0]},changeVpcMask:function(t){switch(t){case 16:this.vpc_ips.vpc3=0,this.vpc_ips.vpc4=0;break;case 17:this.vpc_ips.vpc3=this.near([0,128],this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range2"),this.vpc_ips.vpc4=0;break;case 18:this.vpc_ips.vpc3=this.near([0,64,128,192],this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range3"),this.vpc_ips.vpc4=0;break;case 19:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(32,224))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range4"),this.vpc_ips.vpc4=0;break;case 20:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(16,240))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range5"),this.vpc_ips.vpc4=0;break;case 21:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(8,248))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range6"),this.vpc_ips.vpc4=0;break;case 22:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(4,252))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range7"),this.vpc_ips.vpc4=0;break;case 23:this.vpc_ips.vpc3=this.near([0].concat(Object(o["a"])(this.productArr(2,254))),this.vpc_ips.vpc3),this.vpc_ips.vpc3Tips=this.$t("cloud.range8"),this.vpc_ips.vpc4=0;break;case 24:this.vpc_ips.vpc3Tips=this.$t("cloud.range9"),this.vpc_ips.vpc4=0;break;case 25:this.vpc_ips.vpc4=this.near([0,128],this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range2"),this.vpc_ips.vpc3Tips=this.$t("cloud.range9");break;case 26:this.vpc_ips.vpc4=this.near([0,64,128,192],this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range3"),this.vpc_ips.vpc3Tips=this.$t("cloud.range9");break;case 27:this.vpc_ips.vpc4=this.near([0].concat(Object(o["a"])(this.productArr(32,224))),this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range4"),this.vpc_ips.vpc3Tips=this.$t("cloud.range9");break;case 28:this.vpc_ips.vpc4=this.near([0].concat(Object(o["a"])(this.productArr(16,240))),this.vpc_ips.vpc4),this.vpc_ips.vpc4Tips=this.$t("cloud.range5"),this.vpc_ips.vpc3Tips=this.$t("cloud.range9");break}},changeVPC:function(t){0===t&&(this.addCloudsForm.vpc_name="VPC-"+Math.random().toString(36).substr(2,8))},changeVpcIp:function(){switch(this.vpc_ips.vpc1.value){case 10:this.vpc_ips.vpc1.tips=this.$t("cloud.range9"),this.vpc_ips.min=0,this.vpc_ips.max=255;break;case 172:this.vpc_ips.vpc1.tips=this.$t("cloud.range10"),(this.vpc_ips.vpc2<16||this.vpc_ips.vpc2>31)&&(this.vpc_ips.vpc2=16),this.vpc_ips.min=16,this.vpc_ips.max=31;break;case 192:this.vpc_ips.vpc1.tips=this.$t("cloud.range11"),this.vpc_ips.vpc2=168,this.vpc_ips.min=168,this.vpc_ips.max=168;break}},changeIpProp:function(){this.$refs.tree&&this.$refs.tree.filter(""),this.$refs.tree&&this.$refs.tree.setCheckedKeys([]),this.selectValue=[],this.addCloudsForm.ipaddress=[],this.curCheck=[],this.ip.isIpAddress?this.isWidthBandShow=!0:this.changeIsWidthBandShow();var t=this.$refs.addCloudsForm.fields;t.map((function(t){if("ip_num"===t.prop||"ipaddress"===t.prop)return t.resetField(),!1}))},getIpCreated:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].getIpGroupsReq({list_type:"all",area:t.addCloudsForm.area,node:t.addCloudsForm.node});case 2:a=e.sent,i=a.data,i&&i.unshift({id:void 0,name:t.$t("common.automatic")}),t.ip.grouplist=i;case 6:case"end":return e.stop()}}),e)})))()},changeIpGroup:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.addCloudsForm.ipaddress="",t.ip.list=[],e.next=4,c["a"].getIpFreeReq({ip_group:t.addCloudsForm.ip_group,node:t.addCloudsForm.node,area:t.addCloudsForm.area,uid:0});case 4:a=e.sent,a.forEach((function(e){e.ip_name="".concat(e.ip_name,"（").concat(t.$t("area.ipQuantity"),":").concat(e.ip.length,"）"),e.ip=e.ip.map((function(t){return t.ip_name=t.ip,t.leaf=!0,delete t.ip,t}))})),t.ip.list=a;case 7:case"end":return e.stop()}}),e)})))()},changeIp:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.addCloudsForm.ipaddress.length>0?(e.isWidthBandShow=!0,e.addCloudsForm.num=1):e.isWidthBandShow=!1,"object"===Object(n["a"])(t)?(i=e.ip.list.reduce((function(e,a){return e.push.apply(e,Object(o["a"])(a.ip.reduce((function(e,a){return t.includes(a.ip_name)&&e.push(a.id),e}),[]))),e}),[]),e.$nextTick((function(){var a=[];e.ip.list.forEach((function(t){var e=t.ip.reduce((function(t,e){return t.push(e.id),t}),[]);e.every((function(t){return i.includes(t)}))?i.push(t.id):e.some((function(t){return i.includes(t)}))&&a.push(t.id)})),e.$refs.tree.setCheckedKeys(i),a.forEach((function(t){var a=e.$refs.tree.getNode(t);a&&(a.indeterminate=!0)})),e.curCheck=e.curCheck.filter((function(e){return t.includes(e.ip_name)}))}))):t&&e.$refs.tree.filter(t);case 2:case"end":return a.stop()}}),a)})))()},hideSelect:function(){this.$refs.tree.filter("")},clearIp:function(){this.curCheck=[],this.arrLable=[],this.selectValue=[],this.$refs.tree.setCheckedKeys([])},loadNode:function(t,e){var a=this.ip.list.reduce((function(t,e){return t.push({id:e.id,ip_name:e.ip_name}),t}),[]);if(0===t.level)return e(a);var i,s=null===(i=this.ip.list.filter((function(e){return e.id===t.data.id}))[0])||void 0===i?void 0:i.ip;return e(s)},filterNode:function(t,e){return-1!==e.ip_name.indexOf(t)},handlerCheckChange:function(t){var e=this.$refs.tree.getCheckedNodes().indexOf(t)>-1;if(t.leaf)e?this.curCheck.push(t):this.curCheck=this.curCheck.filter((function(e){return e.id!==t.id}));else if(e){var a;(a=this.curCheck).push.apply(a,Object(o["a"])(this.ip.list.filter((function(e){return e.id===t.id}))[0].ip))}else{var i=this.ip.list.filter((function(e){return e.id===t.id}))[0].ip.reduce((function(t,e){return t.push(e.id),t}),[]);this.curCheck=this.curCheck.filter((function(t){return!i.includes(t.id)}))}var s=[],n=[];this.curCheck.forEach((function(t){n.push(t.ip_name),s.push(t.id)})),this.addCloudsForm.ipaddress=Array.from(new Set(n)),this.selectValue=Array.from(new Set(s))},getArea:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getCloudsCreatePage().then((function(e){(e.data||[]).forEach((function(e,a){e.selectNode=0===a?0:void 0,e.node.unshift({id:0,name:t.$t("common.automatic"),store:[]})})),t.areaSelectOptions=e.data,e.data.length&&(t.activeId=e.data[0].id,t.addCloudsForm.area=e.data[0].id,t.getVpc(),e.data[0].store.length?(t.storeSelectOptions=e.data[0].store,t.addCloudsForm.store=void 0,t.noMemory=!1):t.noMemory=!0)}),(function(e){t.$message.error(e.data.error)}));case 2:t.changeIpGroup(),t.getIpCreated();case 4:case"end":return e.stop()}}),e)})))()},areaSelectChange:function(t){var e=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.activeId!==t&&(this.activeId=t,(this.areaSelectOptions||[]).forEach((function(i){t!==i.id?(i.selectNode=void 0,e.addCloudsForm.node=void 0):(e.addCloudsForm.area=i.id,a&&(i.selectNode=0),i.store.length?(e.storeSelectOptions=i.store,e.noMemory=!1):(e.noMemory=!0,e.storeSelectOptions=[],e.addCloudsForm.store=void 0))})),a&&this.getVpc())},nodeSelectChange:function(t,e,a){var i=this;this.areaSelectChange(e,!1),this.addCloudsForm.node=t,this.getVpc(),this.getIpCreated(),this.ip.isIpAddress&&this.changeIpGroup(),this.getTemplateList(),(this.areaSelectOptions||[]).forEach((function(e){(e.node||[]).forEach((function(a){t===a.id&&(a.store.length?(i.storeSelectOptions=a.store,i.noMemory=!1,i.node=a):(i.noMemory=!0,i.addCloudsForm.store=void 0,i.storeSelectOptions=e.store,i.node={nat_web:1,nat_acl:1}))}))}))},remoteMethod:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""===t){a.next=13;break}return e.loadingUser=!0,e.userTotal=0,e.userParams.search=t,e.userParams.page=1,a.next=7,e.$api.loadUserPage(e.userParams);case 7:i=a.sent,e.clientSelectOptions=i.data,e.searchTotal=i.meta.total,e.loadingUser=!1,a.next=19;break;case 13:return e.userParams.page=1,e.userParams.search="",a.next=17,e.$api.loadUserPage(e.userParams);case 17:s=a.sent,e.clientSelectOptions=s.data;case 19:case"end":return a.stop()}}),a)})))()},clearHandler:function(){this.userParams.search="",this.userParams.page=1,this.getUserList()},loadMore:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.clientSelectOptions.length<t.userTotal&&!t.isLoading||t.clientSelectOptions.length<t.searchTotal&&!t.isLoading)){e.next=8;break}return t.userParams.page+=1,t.isLoading=!0,e.next=5,t.$api.loadUserPage(t.userParams);case 5:a=e.sent,t.isLoading=!1,a.data.forEach((function(e){t.clientSelectOptions.push(e)}));case 8:case"end":return e.stop()}}),e)})))()},getUserList:function(){var t=this;this.$api.loadUserPage(this.userParams).then((function(e){t.template.clientSelectOptions=JSON.parse(JSON.stringify(e.data)),t.userTotal=e.meta.total,t.template.clientSelectOptions.unshift({id:0,username:t.$t("cloud.allCustomers")}),e.data.unshift({id:0,username:t.$t("cloud.createNewCustomers")}),t.clientSelectOptions=e.data,t.addCloudsForm.client=1,t.getVpc()}),(function(e){t.$message.error(e.data.error)}))},getVpc:function(){var t=this,e={area:this.addCloudsForm.area,user:this.addCloudsForm.client,enable:1};this.$api.getVpcNetworks(e).then((function(e){e&&e.data.length?(t.addCloudsForm.vpc=0===t.addCloudsForm.client?0:e.data[0].id,t.networkSelectOptions=e.data):(t.networkSelectOptions=[],t.addCloudsForm.vpc="")}),(function(e){t.$message.error(e.data.error)})),this.$api.getSafeGroupRes({list_type:"all",user:this.addCloudsForm.client}).then((function(e){e&&e.data.length?(t.addCloudsForm.security_group=0===t.addCloudsForm.client?0:e.data[0].id,t.safeSelectOptions=e.data):(t.networkSelectOptions=[],t.addCloudsForm.security_group=0),t.safeSelectOptions.unshift({id:0,name:t.$t("cloud.createASecurityGroup")})}))},getIpAdressList:function(){this.addCloudsForm.ipType=this.ipTypeSelect[0].id},getTemplateList:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.template.list=[],e.addCloudsForm.template=void 0,i={user:t,list_type:"all",status:1,area:e.addCloudsForm.area,node:0===e.addCloudsForm.node?void 0:e.addCloudsForm.node},a.next=5,l["a"].modelListReq(i);case 5:if(s=a.sent,n=s.data,n){a.next=9;break}return a.abrupt("return",!1);case 9:e.template.list=n,e.template.list&&e.template.list.length>0&&(e.$route.query.template&&0===e.template.client?(e.template.isTemplate=!0,e.addCloudsForm.template=parseInt(e.$route.query.template)):e.addCloudsForm.template=e.template.list[0].id);case 11:case"end":return a.stop()}}),a)})))()},submitForm:Object(u["b"])((function(){var t=this,e={};this.$refs.tree&&(e.ipaddress=this.$refs.tree.getCheckedKeys(!0)),e.node=this.addCloudsForm.node,e.area=this.addCloudsForm.area,e.uid=this.addCloudsForm.client,e.ip_group=this.addCloudsForm.ip_group,e.ip_id=e.ipaddress,this.$refs.addCloudsForm.validate(function(){var a=Object(r["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i){a.next=2;break}return a.abrupt("return",!1);case 2:return t.loading=!0,a.prev=3,a.next=6,p["a"].createElasticIp(e);case 6:t.$message.success(t.$t("cloud.createSuccess")),t.$router.push("/elastic_ip"),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3),t.$message.error(a.t0.data.error);case 13:return a.prev=13,t.loading=!1,a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[3,10,13,16]])})));return function(t){return a.apply(this,arguments)}}())}),1e3)},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:document.onkeydown=function(e){var a=e;13===a.keyCode&&t.submitForm()},t.getArea(),t.getUserList();case 3:case"end":return e.stop()}}),e)})))()}},m=d,h=(a("f6a8"),a("1363"),a("2877")),f=Object(h["a"])(m,i,s,!1,null,"68f769fd",null);e["default"]=f.exports},bec4:function(t,e,a){},d151:function(t,e,a){"use strict";var i=a("3df1"),s=a.n(i);s.a},e50d:function(t,e,a){},eb21:function(t,e,a){},ec41:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("el-card",[a("div",{staticClass:"crumbs-wrapper"},[a("div",{staticClass:"disk-tit"},[t._v(t._s(t.$t("common.disk")+t.$t("common.recycleBin")))])]),a("metalTable",{ref:"tableRef",attrs:{tableLoading:t.tableLoading,tableData:t.tableData,total:t.total,orderby:t.orderby,sorting:t.sorting,page:t.page,pageSize:t.pageSize,search:t.search},on:{getTableData:t.getTableData,"selection-change":t.selectionChange,"update:orderby":function(e){t.orderby=e},"update:sorting":function(e){t.sorting=e},"update:page":function(e){t.page=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:search":function(e){t.search=e}},scopedSlots:t._u([{key:"button",fn:function(){return[a("cl-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.openDialog(e)}}},[t._v(t._s(t.$t("common.Setting"))+" ")])]},proxy:!0},{key:"table",fn:function(){return[a("el-table-column",{attrs:{"class-name":"selection",type:"selection",width:"20",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),a("el-table-column",{attrs:{label:t.$t("image.name"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(" "+t._s(i.name)+" "),i.link_file?a("el-tooltip",{attrs:{content:t.$t("admin.linkToTheMaster")+i.link_file,placement:"top-start"}},[a("i",{staticClass:"el-icon-paperclip ",staticStyle:{color:"#409eff"}})]):t._e(),i.remarks?a("div",{staticStyle:{color:"#ccc","font-size":"12px","line-height":"1"}},[t._v(" "+t._s(i.remarks))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"store_name",label:t.$t("image.store")},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.store_name)+" ")]}}])}),a("el-table-column",{attrs:{prop:"size",label:t.$t("common.diskSize33"),"min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.size)+" ")]}}])}),a("el-table-column",{attrs:{prop:"user.username",label:t.$t("common.user"),"min-width":"120","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.username)+" ")]}}])}),a("el-table-column",{attrs:{prop:"recycle_time",label:t.$t("common.recycleStationTime"),width:"180"}}),a("el-table-column",{attrs:{prop:"delete_time",label:t.$t("common.deleteTime"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-tooltip",{attrs:{content:i.delete_time}},[a("div",{staticClass:"cursor"},[t._v(t._s(t.$tool.getDateDiff(i.delete_time)))])])]}}])}),a("el-table-column",{attrs:{label:t.$t("common.manage"),width:"158"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{type:"restore"},on:{click:function(e){return t.removeRow(i)}}}),a("cl-button",{attrs:{type:"delete"},on:{click:function(e){return t.deleteRow(i)}}})],1)]}}])})]},proxy:!0},{key:"batch",fn:function(){return[a("el-dropdown",{attrs:{szie:"small"}},[a("span",{staticClass:"el-dropdown-link delete-btn",staticStyle:{outline:"none",display:"inline-block","min-width":"70px"}},[t._v(" "+t._s(t.$t("common.batch"))+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{on:{click:function(e){t.massOperation("restore",t.$t("common.restore"))}}},[t._v(t._s(t.$t("common.restore"))+" ")])]),a("el-dropdown-item",[a("div",{on:{click:function(e){t.massOperation("delete",t.$t("common.delete"))}}},[t._v(" "+t._s(t.$t("common.removeCompletely"))+" ")])])],1)],1)]},proxy:!0}])}),a("el-dialog",{attrs:{title:t.$t("common.stationDeleteTime"),visible:t.isShowDialog,width:"500px"},on:{"update:visible":function(e){t.isShowDialog=e},closed:t.closeDialog}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.formRule,size:"medium","label-width":"140px","label-position":t.$globalConfig.labelPosition}},[a("el-form-item",{attrs:{label:t.$t("common.stationDeleteTime"),prop:"disk_recycle_bin"}},[a("el-input-number",{staticClass:"fl mr-20",staticStyle:{width:"200px"},attrs:{controls:!1,precision:0,min:0,max:100},model:{value:t.formData.disk_recycle_bin,callback:function(e){t.$set(t.formData,"disk_recycle_bin",e)},expression:"formData.disk_recycle_bin"}}),a("div",{staticClass:"slider_box_unit fl"},[t._v(t._s(t.$t("common.Day"))+" ")])],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.isShowDialog=!1}}},[t._v(t._s(t.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v(t._s(t.$t("common.sure")))])],1)],1)],1)],1)},s=[],n=(a("4160"),a("d81d"),a("b0c0"),a("dca8"),a("ac1f"),a("841c"),a("159b"),a("96cf"),a("1da1")),o=a("d75a"),r=a("21c5"),c=a("8491"),l={metaInfo:function(){return{title:this.$t("common.recycleBin")}},mixins:[o["a"]],components:{},data:function(){return{tableData:[],total:0,isAgent:JSON.parse(localStorage.getItem("isAgent")),tableLoading:!1,orderby:"id",checkRow:[],formData:{disk_recycle_bin:1},formRule:{disk_recycle_bin:{required:!0,message:this.$t("common.recycleStationTime"),trigger:"blur"}},isShowDialog:!1}},computed:{},watch:{},mounted:function(){var t=this.$searchAlive.urlGetData();t.search&&(this.search=t.search,this.$refs.tableRef.metalSearch=t.search,this.$refs.tableRef.getTableData())},created:function(){this.getConfigReq()},methods:{getConfigReq:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].getConfigReq();case 3:a=e.sent,t.formData.disk_recycle_bin=a.disk_recycle_bin,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},openDialog:function(){this.isShowDialog=!0},submitForm:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].setConfigReq({disk_recycle_bin:t.formData.disk_recycle_bin});case 2:t.isShowDialog=!1,t.$message.success(t.$t("common.setSuccess")),t.getConfigReq();case 5:case"end":return e.stop()}}),e)})))()},getTableData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$searchAlive.urlUpdate({search:t.search},location.href,t.$route.query),e.prev=1,t.tableLoading=!0,a={orderby:t.orderby,sort:t.sorting,per_page:t.pageSize,search:t.search,page:t.page,status:5},e.next=6,r["a"].getDiskRecycle(a);case 6:i=e.sent,i||(t.tableData=[],t.page=1,t.total=0),t.tableData=Object.freeze(i.data),t.total=i.meta.total,e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](1);case 14:return e.prev=14,t.tableLoading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,12,14,17]])})))()},deleteRow:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$swal.fire({title:this.$t("common.msg45")+t.name+this.$t("common.why")+"？",icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!i.isConfirmed){a.next=5;break}return a.next=3,r["a"].deleteDisk({id:t.id,force:1});case 3:e.$message.success(e.$t("common.deleteSuccess")),e.getTableData();case 5:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())},massDeleteRow:function(){var t=this;this.$swal.fire({title:this.$t("disk.deleteDisk"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.isConfirmed&&(t.checkRow.forEach(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["a"].deleteDisk({id:a,force:1});case 2:t.getTableData();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.$message.success(t.$t("common.deleteSuccess")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},removeRow:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",i="single"===a?this.$t("common.determineRecovery")+t.name+this.$t("common.why")+"？":this.$t("disk.backDisk"),s="single"===a?[t.id]:this.checkRow;this.$swal.fire({title:i,icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.isConfirmed){t.next=5;break}return t.next=3,r["a"].backDiskRecycle({id:s});case 3:e.$message.success(e.$t("common.recoverySuccess")),e.getTableData();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},selectionChange:function(t){this.checkRow=t.map((function(t){return t.id}))},massOperation:function(t){if(0===this.checkRow.length)return this.$message.warning(this.$t("databaseBackup.chooseFirst")),!1;switch(t){case"restore":this.removeRow(null,"multiline");break;case"delete":this.massDeleteRow();break}}}},p=l,u=(a("20b7"),a("2877")),d=Object(u["a"])(p,i,s,!1,null,"957fee74",null);e["default"]=d.exports},f6a8:function(t,e,a){"use strict";var i=a("1348"),s=a.n(i);s.a}}]);
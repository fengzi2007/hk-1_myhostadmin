(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Node"],{"149c":function(e,t,a){},"229c":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"blacklist"},[a("el-card",[a("div",{staticClass:"font16 font-weight"},[e._v(e._s(e.$t("cloud.ipGroup")))]),a("metalTable",{ref:"tableRef",attrs:{tableLoading:e.tableLoading,tableData:e.tableData,total:e.total,orderby:e.orderby,sorting:e.sorting,page:e.page,pageSize:e.pageSize,search:e.search},on:{getTableData:e.getTableData,"update:orderby":function(t){e.orderby=t},"update:sorting":function(t){e.sorting=t},"update:page":function(t){e.page=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:search":function(t){e.search=t}},scopedSlots:e._u([{key:"button",fn:function(){return[a("addButton",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.openDialog()}}})]},proxy:!0},{key:"table",fn:function(){return[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:e.$t("adminGroup.groupName"),width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"description",label:e.$t("systemLog.des"),"min-width":"160","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"total",label:e.$t("common.gross"),width:"180"},scopedSlots:e._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property}})]}},{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.total))])]}}])}),a("el-table-column",{attrs:{prop:"used",label:e.$t("common.used")},scopedSlots:e._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property}})]}},{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.used))])]}}])}),a("el-table-column",{attrs:{prop:"lock",label:e.$t("common.locking")},scopedSlots:e._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property}})]}},{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.lock))])]}}])}),a("el-table-column",{attrs:{prop:"free",label:e.$t("common.idle")},scopedSlots:e._u([{key:"header",fn:function(e){return[a("sortOrder",{attrs:{label:e.column.label,property:e.column.property}})]}},{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.free))])]}}])}),a("el-table-column",{attrs:{prop:"description",label:"IP",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-popover",{attrs:{placement:"top",width:"500",trigger:"hover",disabled:o.ip_segment.length<=2,"popper-class":"ip-scroll-box"}},[e._l(o.ip_segment,(function(t,o){return a("router-link",{key:o,attrs:{to:{name:"IpDetail",query:{id:t.id}}}},[a("el-tag",{staticClass:"mr-10",attrs:{size:"mini",type:"success"}},[e._v(e._s(t.name))])],1)})),a("div",{attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"ip-scrol"},e._l(o.ip_segment,(function(t,o){return a("router-link",{key:o,attrs:{to:{name:"IpDetail",query:{id:t.id}}}},[a("el-tag",{staticClass:"mr-10",attrs:{size:"mini",type:"success"}},[e._v(e._s(t.name))])],1)})),1)])],2)]}}])}),a("el-table-column",{attrs:{prop:"create_time",label:e.$t("userList.createTime"),width:"160"}}),a("el-table-column",{attrs:{label:e.$t("common.manage"),width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{type:"update"},on:{click:function(t){return e.updateRow(o,e.updateCallback)}}}),a("cl-button",{attrs:{type:"delete"},on:{click:function(t){return e.deleteRow(o)}}})],1)]}}])})]},proxy:!0}])}),a("el-dialog",{attrs:{title:e.form.title,visible:e.form.formDialogVisable,width:"500px"},on:{"update:visible":function(t){return e.$set(e.form,"formDialogVisable",t)},closed:e.closeDialog}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.formRule,size:"medium","label-width":"140px","label-position":e.$globalConfig.labelPosition}},[a("el-form-item",{attrs:{label:e.$t("imageGroup.groupName"),prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:e.$t("image.namePlaceholder")},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:e.$t("common.description"),prop:"description"}},[a("el-input",{attrs:{type:"text",placeholder:e.$t("common.enterDescription")},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),a("el-form-item",{attrs:{label:e.$t("common.ipSegment"),prop:"ip_segment"}},[a("el-select",{staticClass:"wt100",attrs:{placeholder:e.$t("common.selectTheIpSegment"),multiple:""},model:{value:e.formData.ip_segment,callback:function(t){e.$set(e.formData,"ip_segment",t)},expression:"formData.ip_segment"}},e._l(e.ipSegment,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.ip_name}})})),1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.form.formDialogVisable=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.$t("common.sure")))])],1)],1)],1)],1)},s=[],n=(a("d81d"),a("dca8"),a("ac1f"),a("841c"),a("96cf"),a("1da1")),r=a("d75a"),i=a("3995"),l={metaInfo:function(){return{title:this.$t("cloud.ipGroup")}},mixins:[r["a"]],data:function(){return{tableData:[],total:0,tableLoading:!1,ipSegment:[],formData:{id:null,name:null,description:null,ip_segment:[]},formRule:{name:[{required:!0,message:this.$t("common.namePlaceholder"),trigger:"blur"}]}}},computed:{},watch:{"form.formDialogVisable":function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e||0!==t.ipSegment.length){a.next=5;break}return a.next=3,i["a"].getIpSegmentReq({per_page:9999999});case 3:o=a.sent,t.ipSegment=o.data;case 5:case"end":return a.stop()}}),a)})))()}},methods:{updateCallback:function(e){this.formData.ip_segment=e.ip_segment.map((function(e){return e.id}))},getTableData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$searchAlive.urlUpdate({search:e.search},location.href,e.$route.query),t.prev=1,e.tableLoading=!0,a={orderby:e.orderby,sort:e.sorting,per_page:e.pageSize,search:e.search,page:e.page},t.next=6,i["a"].getIpGroupsReq(a);case 6:o=t.sent,e.tableData=Object.freeze(o.data),e.total=o.meta.total,t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](1);case 13:return t.prev=13,e.tableLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,11,13,16]])})))()},create:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].createIpGroupsReq(e.formData);case 2:e.form.formDialogVisable=!1,e.$message.success(e.$t("common.addSuccess")),e.getTableData();case 5:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].updateIpGroupsReq(e.formData);case 2:e.form.formDialogVisable=!1,e.$message.success(e.$t("common.updateSuccess")),e.getTableData();case 5:case"end":return t.stop()}}),t)})))()},deleteRow:function(e){var t=this;this.$swal.fire({title:this.$t("common.confirmDelete"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o.isConfirmed){a.next=5;break}return a.next=3,i["a"].deleteIpGroupsReq(e.id);case 3:t.$message.success(t.$t("common.deleteSuccess")),t.getTableData();case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},mounted:function(){var e=this.$searchAlive.urlGetData();e.search&&(this.search=e.search,this.$refs.tableRef.metalSearch=e.search,this.$refs.tableRef.getTableData())}},c=l,d=(a("f764"),a("dcc9"),a("2877")),m=Object(d["a"])(c,o,s,!1,null,"cd7db55a",null);t["default"]=m.exports},"22b8":function(e,t,a){"use strict";var o=a("d297"),s=a.n(o);s.a},"2c6a":function(e,t,a){},3273:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"node"},[o("div",{staticClass:"crumbs-wrapper"},[o("crumbs",{attrs:{id:e.nodeId,name:e.nodeDetails.ip}})],1),o("div",{staticClass:"node-info node-card mt-10"},[o("div",{staticClass:"node-info-top"},[o("div",{staticClass:"status"},[o("el-tooltip",{attrs:{content:e.tips,disabled:-1==e.nodeDetails.status}},[o("div",{staticClass:"status-icon",on:{click:e.getNodeStatus}},[0==e.nodeDetails.status?o("div",{staticClass:"icon error"},[o("i",{staticClass:"el-icon-close"})]):1==e.nodeDetails.status?o("div",{staticClass:"icon"},[o("i",{staticClass:"el-icon-check"})]):-1==e.nodeDetails.status?o("div",{staticClass:"icon"},[o("i",{staticClass:"el-icon-loading"})]):e._e()])])],1),o("el-row",{staticClass:"title",attrs:{type:"flex"}},[o("el-col",{staticClass:"mr-10 title-ip"},[o("span",[e._v(" "+e._s(e.nodeDetails.ip))]),o("el-tooltip",{attrs:{effect:"dark",content:e.nodeDetails.remark,placement:"top",disabled:e.nodeDetails.remark.length<6}},[o("span",{staticClass:"remark",on:{click:function(t){return e.openDialog("changeRemark")}}},[o("span",{staticClass:"remark1"},[e.nodeDetails.remark||e.nodeDetails.remark.length?o("span",[e._v(e._s(e.nodeDetails.remark.substr(0,5))+" "),e.nodeDetails.remark.length>5?o("span",[e._v("...")]):e._e()]):o("span",[e._v(e._s(e.$t("common.remarkInformation")))])]),o("i",{staticClass:"el-icon-edit"})])])],1),o("el-col",{staticStyle:{width:"17px","line-height":"80px"}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Trunk",placement:"top"}},[e.nodeDetails.trunk?o("img",{staticStyle:{"margin-bottom":"2px"},attrs:{src:a("61b0")}}):e._e()])],1)],1),"hyperv"!==e.nodeDetails.type?o("div",{staticClass:"button console mr-10",on:{click:e.consoleHandler}},[e._v(" "+e._s(e.$t("common.Console"))+" ")]):e._e(),"hyperv"!==e.nodeDetails.type?o("div",{staticClass:"button migrate mr-10",on:{click:function(t){return e.openDialog("migrate")}}},[e._v(" "+e._s(e.$t("common.migrate")))]):e._e(),o("div",{staticClass:"button",on:{click:e.reviseNode}},[e._v(e._s(e.$t("admin.modify")))])],1),o("div",{staticClass:"node-info-bottom"},[o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("common.name")))]),o("div",[e._v(e._s(e.nodeDetails.name))])]),o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("common.nodeType")))]),o("div",["host"===e.nodeDetails.type?o("img",{staticStyle:{width:"40px"},attrs:{src:a("3e3e")}}):"lightHost"===e.nodeDetails.type?o("img",{staticStyle:{width:"40px"},attrs:{src:a("2835")}}):"hyperv"===e.nodeDetails.type?o("img",{staticStyle:{width:"40px"},attrs:{src:a("06a6")}}):"adsl"===e.nodeDetails.type?o("img",{staticStyle:{width:"40px"},attrs:{src:a("fea0")}}):e._e()])]),o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("common.version")))]),o("div",[e._v(e._s(e.version))])]),o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("common.group")))]),o("div",[e._v(e._s(e.nodeDetails.group_name))])]),o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("common.area")))]),o("div",{staticClass:"fboxRow Ycenter"},[e.nodeDetails.area.country?o("img",{staticStyle:{height:"18px","margin-right":"10px"},attrs:{src:e.$globalUrl+"/common/country/"+e.nodeDetails.area.country.code+".png",alt:""}}):e._e(),e._v(" "+e._s(e.nodeDetails.area.name)+" ")])]),o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("common.exampleTai")))]),o("div",[e._v(e._s(e.nodeDetails.count.host))])]),o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("common.quantityUsedTotal")))]),o("div",[e._v(e._s(e.nodeDetails.count.ip_used)+"/"+e._s(e.nodeDetails.count.ip_total))])]),"hyperv"!==e.nodeDetails.type&&"adsl"!==e.nodeDetails.type?o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("common.forwardingWebsite"))+" ")]),o("div",{on:{click:e.getSingleNATStatus}},[o("el-tooltip",{staticClass:"nat-status",attrs:{effect:"dark",disabled:-1===e.nodeDetails.nat_status,content:e.natType[e.nodeDetails.nat_status],placement:"right"}},[-1===e.nodeDetails.nat_status?o("i",{staticClass:"el-icon-loading"}):0===e.nodeDetails.nat_status?o("i",{staticClass:"el-icon-success",staticStyle:{color:"#cfcfcf"},on:{click:function(t){return e.openDialog("nat")}}}):1===e.nodeDetails.nat_status?o("i",{staticClass:"el-icon-success",staticStyle:{color:"#46bf8b"}}):2===e.nodeDetails.nat_status?o("i",{staticClass:"el-icon-error",staticStyle:{color:"#F56C6C"}}):3===e.nodeDetails.nat_status?o("i",{staticClass:"el-icon-success",staticStyle:{color:"#E6A23C"}}):4===e.nodeDetails.nat_status?o("i",{staticClass:"el-icon-success",staticStyle:{color:"#46bf8b"}}):e._e()])],1)]):e._e(),o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("common.automaticStart")))]),o("div",[o("el-switch",{attrs:{"active-color":"#2f54ea",size:"small","active-value":1,"inactive-value":0},on:{change:e.changeAuto},model:{value:e.nodeDetails.auto_boot_host,callback:function(t){e.$set(e.nodeDetails,"auto_boot_host",t)},expression:"nodeDetails.auto_boot_host"}})],1)]),o("div",{staticClass:"node-info-box"},[o("p",[e._v(e._s(e.$t("cloudBackup.enable")))]),o("div",[o("el-switch",{attrs:{"active-color":"#2f54ea",size:"small","active-value":1,"inactive-value":0},on:{change:e.changeEnable},model:{value:e.nodeDetails.enable,callback:function(t){e.$set(e.nodeDetails,"enable",t)},expression:"nodeDetails.enable"}})],1)])])]),o("div",{staticClass:"node-example node-card"},[o("div",[o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},["hyperv"!==e.nodeDetails.type?o("el-tab-pane",{attrs:{label:e.$t("common.chart"),name:"echarts"}},[e.nodeServe.uptime?o("div",{staticClass:"node-content "},[[o("el-row",{attrs:{gutter:30}},[o("el-col",{attrs:{sm:24,md:12}},[o("div",{staticClass:"node-content-left"},[o("div",{staticClass:"node-content-item"},[o("span",{staticClass:"title"},[e._v("CPU(S)")]),o("span",{staticClass:"color-blue"},[e._v(e._s(e.nodeServe.cpu_info.cpus)+" x "+e._s(e.nodeServe.cpu_info.model_name)+"("+e._s(e.nodeServe.cpu_info.sockets)+e._s(e.$t("common.jack"))+")")])]),o("div",{staticClass:"node-content-item"},[o("span",{staticClass:"title"},[e._v(e._s(e.$t("common.kernelVersion")))]),o("span",{staticClass:"color-blue"},[e._v(e._s(e.nodeServe.kernel_version))])]),o("div",{staticClass:"node-content-item"},[o("span",{staticClass:"title"},[e._v(e._s(e.$t("common.qemuVersion")))]),o("span",{staticClass:"color-blue"},[e._v(e._s(e.nodeServe.qemu_version))])]),o("div",{staticClass:"node-content-item"},[o("span",{staticClass:"title"},[e._v(e._s(e.$t("common.operationHours"))+"/"+e._s(e.$t("common.newHours")))]),o("span",{staticClass:"color-blue"},[e._v(e._s(e.nodeServe.uptime)+"/"+e._s(e.nodeServe.time))])]),o("div",{staticClass:"node-content-item"},[o("span",{staticClass:"title"},[e._v(e._s(e.$t("common.actualUseAllocatedMemory")))]),o("span",{staticClass:"color-blue"},[e.nodeServe.memory?o("span",[e._v(e._s(e.nodeServe.memory.use_memory))]):e._e(),e.nodeDetails.assign_memory?o("span",[e._v("/"+e._s(e.nodeDetails.assign_memory))]):e._e()])]),o("div",{staticClass:"node-content-item"},[o("span",{staticClass:"title"},[e._v(e._s(e.$t("common.allocatedCpuCores")))]),o("span",{staticClass:"color-blue"},[e._v(e._s(e.nodeDetails.assign_cpu))])])])]),o("el-col",{attrs:{sm:24,md:12}},[o("div",{staticClass:"node-content-right"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{xs:24,sm:12}},[o("div",{staticClass:"item2_content"},[o("div",{staticClass:"item2_swap"},[o("div",{staticClass:"item2_swap_text"},[o("img",{attrs:{src:a("b685")}}),e._v(e._s(e.$t("common.cpuUtilization"))+" ")]),o("div",{staticClass:"item2_swap_text"},[e._v(e._s(e.nodeServe.cpu_use_percent)+"% of "+e._s(e.nodeServe.cpu_info.cpus)+" CPU(s) ")])]),o("el-progress",{attrs:{"show-text":!1,color:"#5d74f5","stroke-width":10,percentage:parseFloat(e.nodeServe.cpu_use_percent)}})],1),o("div",{staticClass:"item2_content"},[o("div",{staticClass:"item2_swap"},[o("div",{staticClass:"item2_swap_text"},[o("img",{attrs:{src:a("52c4")}}),e._v(e._s(e.$t("common.averageLoad"))+" ")]),o("div",{staticClass:"item2_swap_text"},[e._v(" "+e._s(e.nodeServe.cpu_load["1min"])+","+e._s(e.nodeServe.cpu_load["5min"])+","+e._s(e.nodeServe.cpu_load["15min"])+" ")])])]),o("div",{staticClass:"item2_content"},[o("div",{staticClass:"item2_swap"},[o("div",{staticClass:"item2_swap_text"},[o("img",{attrs:{src:a("7b31")}}),e._v(e._s(e.$t("common.memoryUsage"))+" ")]),o("div",{staticClass:"item2_swap_text"},[e._v(" "+e._s(e.nodeServe.memory.use_percent)+"%("+e._s(e.nodeServe.memory.use_memory)+" of "+e._s(e.nodeServe.memory.total_memory)+")")])]),o("el-progress",{attrs:{"show-text":!1,color:"#f1672a","stroke-width":10,percentage:e.nodeServe.memory.use_percent}})],1)]),o("el-col",{attrs:{xs:24,sm:12}},[o("div",{staticClass:"item2_content"},[o("div",{staticClass:"item2_swap"},[o("div",{staticClass:"item2_swap_text"},[o("img",{attrs:{src:a("5ee6")}}),e._v(e._s(e.$t("common.swapUsage"))+" ")]),o("div",{staticClass:"item2_swap_text"},[e._v(" "+e._s(e.nodeServe.swap.swap_use_percent)+"%("+e._s(e.nodeServe.swap.use_swap)+" of "+e._s(e.nodeServe.swap.total_swap)+")")])]),o("el-progress",{attrs:{"show-text":!1,color:"#5d74f5","stroke-width":10,percentage:parseFloat(e.nodeServe.swap.swap_use_percent)}})],1),o("div",{staticClass:"item2_content"},[o("div",{staticClass:"item2_swap"},[o("div",{staticClass:"item2_swap_text"},[e._v(e._s(e.$t("common.ksmSharing")))]),o("div",{staticClass:"item2_swap_text"},[e._v(e._s(e.nodeServe.memory.ksm_share_memory)+" ")])])]),o("div",{staticClass:"item2_content"},[o("div",{staticClass:"item2_swap "},[o("div",{staticClass:"item2_swap_text"},[o("img",{attrs:{src:a("c210")}}),e._v(e._s(e.$t("common.ioDelay"))+" ")]),o("div",{staticClass:"item2_swap_text"},[e._v(e._s(e.ioWait)+"%")])]),o("el-progress",{attrs:{"show-text":!1,color:"#f1672a","stroke-width":10,percentage:parseFloat(e.ioWait)}})],1)]),e._l(e.nodeServe.disk,(function(t,s){return o("el-col",{key:s,attrs:{xs:24,sm:12}},[o("div",{staticClass:"item2_content"},[o("div",{staticClass:"item2_swap"},[o("div",{staticClass:"item2_swap_text"},[o("img",{attrs:{src:a("6be5")}}),e._v(e._s(e.$t("common.hardDiskSpace"))+"("+e._s(t.mount_point)+") ")]),o("div",{staticClass:"item2_swap_text"},[e._v(e._s(t.disk_percent)+"("+e._s(t.disk_use)+" of "+e._s(t.disk_total)+")")])]),o("el-progress",{attrs:{"show-text":!1,color:"#84ce95","stroke-width":10,percentage:parseFloat(t.disk_percent)}})],1)])}))],2)],1)])],1)]],2):e._e(),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{sm:24,md:12}},[o("flowEcharts",{ref:"cpuEcharts",staticClass:"mb-20",attrs:{title:e.$t("common.cpuAverageLoad"),type:"nodeCpu",nodeId:e.nodeId}})],1),o("el-col",{attrs:{sm:24,md:12}},[o("flowEcharts",{ref:"storageEcharts",staticClass:"mb-20",attrs:{title:e.$t("common.memory666"),type:"nodeStorage",nodeId:e.nodeId}})],1),o("el-col",{attrs:{sm:24,md:12}},[o("flowEcharts",{ref:"diskEcharts",staticClass:"mb-20",attrs:{title:e.$t("common.hardDriveCapacity"),type:"nodeDisk",nodeId:e.nodeId,nodeData:e.nodeStatistics.dev}})],1),o("el-col",{attrs:{sm:24,md:12}},[o("flowEcharts",{ref:"nodeNetwork",staticClass:"mb-20",attrs:{title:e.$t("common.networkCard"),type:"nodeNetwork",nodeId:e.nodeId,nodeData:e.nodeStatistics.net}})],1),o("el-col",{attrs:{sm:24,md:12}},[o("flowEcharts",{ref:"nodePPS",staticClass:"mb-20",attrs:{type:"nodePPS",title:e.$t("common.packetForwardingRate"),nodeId:e.nodeId,nodeData:e.nodeStatistics.net}})],1),o("el-col",{attrs:{sm:24,md:12}},[o("flowEcharts",{ref:"nodeDosage",staticClass:"mb-20",attrs:{type:"nodeDosage",title:e.$t("common.dosage"),nodeId:e.nodeId,nodeData:e.nodeStatistics.net}})],1),o("el-col",{attrs:{sm:24,md:12}},[o("flowEcharts",{ref:"node_disk_io",staticClass:"mb-20",attrs:{title:e.$t("common.disk")+"IO",type:"node_disk_io",nodeId:e.nodeId,nodeData:e.nodeStatistics.disk}})],1)],1)],1):e._e(),o("el-tab-pane",{attrs:{label:e.$t("common.example5"),name:"clouds"}},[o("clouds",{attrs:{type:"node",node:e.nodeId,nodeStatus:e.nodeDetails.status}})],1),"host"===e.nodeDetails.type?o("el-tab-pane",{attrs:{label:e.$t("common.networkCard"),name:"network"}},[o("net-work",{attrs:{nodeId:e.nodeId}})],1):e._e(),o("el-tab-pane",{attrs:{label:e.$t("common.Setting"),name:"setting"}},[o("node-setting",{attrs:{nodeDetails:e.nodeDetails,nodeId:e.nodeId},on:{getNodeDetails:e.getNodeDetails}})],1),"hyperv"!==e.nodeDetails.type?o("el-tab-pane",{attrs:{label:e.$t("common.GraphicsCard"),name:"gpu"}},[o("gpu",{attrs:{nodeId:e.nodeId}})],1):e._e()],1)],1)]),o("el-dialog",{attrs:{title:e.$t("common.modifyNode"),visible:e.nodeTableRevise,width:"500px"},on:{"update:visible":function(t){e.nodeTableRevise=t},close:e.resetForm}},[o("el-row",{attrs:{gutter:15}},[o("el-form",{ref:"nodeForm",attrs:{model:e.nodeForm,rules:e.rules,size:"medium","label-width":"140px","label-position":e.$globalConfig.labelPosition}},[o("el-form-item",{staticStyle:{"margin-bottom":"0"}},[o("div",{staticClass:"fboxRow Xend",staticStyle:{width:"85%"}},[o("el-checkbox",{attrs:{label:e.$t("common.advance")},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1)]),o("el-form-item",{attrs:{label:e.$t("area.regionalChoice"),prop:"area_id"}},[o("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:e.$t("area.pleaseSelectYourHostArea")},model:{value:e.nodeForm.area_id,callback:function(t){e.$set(e.nodeForm,"area_id",t)},expression:"nodeForm.area_id"}},e._l(e.regionSelectOptions,(function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.id,disabled:e.disabled}})})),1)],1),o("el-form-item",{attrs:{label:e.$t("common.name"),prop:"name"}},[o("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1),o("el-form-item",{attrs:{label:"IP/"+e.$t("common.domainName"),prop:"ip"}},[o("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:e.nodeForm.ip,callback:function(t){e.$set(e.nodeForm,"ip",t)},expression:"nodeForm.ip"}})],1),o("el-form-item",{attrs:{label:e.$t("common.nodeType")}},[o("el-select",{staticStyle:{width:"85%"},attrs:{disabled:e.isTypeDisabled},model:{value:e.nodeForm.type,callback:function(t){e.$set(e.nodeForm,"type",t)},expression:"nodeForm.type"}},[o("el-option",{attrs:{label:e.$t("common.fullVersion"),value:"host"}}),o("el-option",{attrs:{label:e.$t("common.lightweightVersion"),value:"lightHost"}}),o("el-option",{attrs:{label:"Hyper-V",value:"hyperv"}}),o("el-option",{attrs:{label:e.$t("common.adsl"),value:"adsl"}})],1)],1),o("el-form-item",{attrs:{label:"hyperv"===this.nodeDetails.type?e.$t("common.RDPPort"):e.$t("common.sshPort"),prop:"port"}},[o("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:e.nodeForm.port,callback:function(t){e.$set(e.nodeForm,"port",t)},expression:"nodeForm.port"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],attrs:{label:"dns1",prop:"dns1"}},[o("template",{slot:"label"},[o("span",[e._v("DNS1")]),o("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:e.$t("common.msg92")}},[o("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),o("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",placeholder:e.$t("common.msg92")},model:{value:e.nodeForm.dns1,callback:function(t){e.$set(e.nodeForm,"dns1","string"===typeof t?t.trim():t)},expression:"nodeForm.dns1"}})],2),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],attrs:{label:"dns2",prop:"dns2"}},[o("template",{slot:"label"},[o("span",[e._v("DNS2")]),o("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:e.$t("common.msg93")}},[o("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),o("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",placeholder:e.$t("common.msg92")},model:{value:e.nodeForm.dns2,callback:function(t){e.$set(e.nodeForm,"dns2","string"===typeof t?t.trim():t)},expression:"nodeForm.dns2"}})],2),o("el-form-item",{attrs:{label:"hyperv"===this.nodeDetails.type?e.$t("common.RDPPassword"):e.$t("common.rootPassword"),prop:"ssh_pass"}},[o("el-input",{staticStyle:{width:"85%"},attrs:{type:"text","show-password":""},model:{value:e.nodeForm.ssh_pass,callback:function(t){e.$set(e.nodeForm,"ssh_pass","string"===typeof t?t.trim():t)},expression:"nodeForm.ssh_pass"}})],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.checked&&"hyperv"!==e.nodeForm.type,expression:"checked && nodeForm.type !== 'hyperv'"}],attrs:{label:e.$t("common.sshKey"),prop:"ssh_key"}},[o("el-input",{staticStyle:{width:"85%"},attrs:{type:"textarea",rows:4,"show-password":""},on:{input:function(t){return e.changeText(t)}},model:{value:e.nodeForm.ssh_key,callback:function(t){e.$set(e.nodeForm,"ssh_key",t)},expression:"nodeForm.ssh_key"}})],1),"hyperv"!==this.nodeDetails.type?o("el-form-item",{attrs:{label:e.$t("common.authenticationAccount"),prop:"username"}},[o("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:e.nodeForm.username,callback:function(t){e.$set(e.nodeForm,"username","string"===typeof t?t.trim():t)},expression:"nodeForm.username"}})],1):e._e(),"hyperv"!==this.nodeDetails.type?o("el-form-item",{attrs:{label:e.$t("common.authenticationPassword"),prop:"password"}},[o("el-input",{staticStyle:{width:"85%"},attrs:{type:"password","show-password":""},model:{value:e.nodeForm.password,callback:function(t){e.$set(e.nodeForm,"password","string"===typeof t?t.trim():t)},expression:"nodeForm.password"}})],1):e._e(),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],attrs:{label:e.$t("common.group"),prop:"group_id"}},[o("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:e.$t("common.selectAGroup"),clearable:"",filterable:""},model:{value:e.nodeForm.group_id,callback:function(t){e.$set(e.nodeForm,"group_id",t)},expression:"nodeForm.group_id"}},e._l(e.nodeGroup,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],attrs:{label:e.$t("common.storage666"),prop:"choose_store_rule"}},[o("template",{slot:"label"},[o("span",[e._v(e._s(e.$t("common.storage666")))]),o("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:e.$t("common.msg94")}},[o("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),o("el-select",{staticStyle:{width:"85%"},model:{value:e.nodeForm.choose_store_rule,callback:function(t){e.$set(e.nodeForm,"choose_store_rule",t)},expression:"nodeForm.choose_store_rule"}},[o("el-option",{attrs:{value:0,label:e.$t("common.remainingCapacity")}}),o("el-option",{attrs:{value:1,label:e.$t("common.countQuantity")}})],1)],2),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],attrs:{label:e.$t("common.natPortRange"),prop:"nat_port_range"}},[o("template",{slot:"label"},[o("span",[e._v(e._s(e.$t("common.natPortRange")))]),o("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:e.$t("common.msg95")}},[o("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),o("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",placeholder:e.$t("common.msg96")},model:{value:e.nodeForm.nat_port_range,callback:function(t){e.$set(e.nodeForm,"nat_port_range","string"===typeof t?t.trim():t)},expression:"nodeForm.nat_port_range"}})],2),o("el-form-item",{attrs:{label:e.$t("common.remark"),prop:"remark"}},[o("el-input",{staticStyle:{width:"85%"},attrs:{type:"textarea",rows:2},on:{input:function(t){return e.changeText(t)}},model:{value:e.nodeForm.remark,callback:function(t){e.$set(e.nodeForm,"remark",t)},expression:"nodeForm.remark"}})],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.nodeTableRevise=!1}}},[e._v(e._s(e.$t("common.cancel")))]),o("el-button",{attrs:{type:"primary"},on:{click:e.subminForm}},[e._v(e._s(e.$t("common.sure")))])],1)],1),o("el-dialog",{attrs:{title:e.dialog.title,width:"600px",visible:e.dialog.show},on:{"update:visible":function(t){return e.$set(e.dialog,"show",t)}}},[o("el-form",{ref:"elForm",attrs:{model:e.formData,rules:e.formRules,size:"medium","label-width":"nat"===e.dialog.type?"40px":"120px","label-position":e.$globalConfig.labelPosition}},["nat"===e.dialog.type?[o("el-form-item",[o("div",{staticClass:"radio-box"},[o("el-radio",{attrs:{label:"ip"},model:{value:e.formData.state,callback:function(t){e.$set(e.formData,"state",t)},expression:"formData.state"}}),o("div",{staticClass:"radio-box-border"},[o("h4",[e._v(e._s(e.$t("common.msg97")))]),o("p",[e._v(e._s(e.$t("common.msg98")))]),o("p",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.$t("common.msg99")))])])],1)]),o("el-form-item",[o("div",{staticClass:"radio-box"},[o("el-radio",{attrs:{label:"nat"},model:{value:e.formData.state,callback:function(t){e.$set(e.formData,"state",t)},expression:"formData.state"}}),o("div",{staticClass:"radio-box-border"},[o("h4",[e._v(e._s(e.$t("common.msg102")))]),o("p",[e._v(e._s(e.$t("common.msg101")))])])],1)])]:e._e(),"migrate"===e.dialog.type?[o("el-form-item",{attrs:{prop:"node",rules:{required:0===e.formData.type,message:e.$t("cloud.selectNode"),trigger:"change"}}},[o("template",{slot:"label"},[o("span",[e._v(e._s(e.$t("common.msg105")))]),1===e.formData.type?o("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:e.$t("common.msg106")}},[o("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})]):e._e()],1),o("el-row",[o("el-col",{staticClass:"mb-10",attrs:{sm:24,md:12}},[o("el-select",{model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[o("el-option",{attrs:{value:0,label:e.$t("common.specifiedNode")}}),o("el-option",{attrs:{value:1,label:e.$t("common.automaticEvacuationBalance"),disabled:0===e.$store.state.config.edition||2===e.$store.state.config.edition}})],1)],1),0===e.formData.type?o("el-col",{attrs:{sm:24,md:12}},[o("el-select",{attrs:{multiple:"",filterable:"",clearable:""},model:{value:e.formData.node,callback:function(t){e.$set(e.formData,"node",t)},expression:"formData.node"}},e._l(e.migrateNode,(function(e){return o("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})),1)],1):e._e()],1)],2),o("el-form-item",{attrs:{label:e.$t("common.reassignIP"),prop:"assign_ip"}},[o("div",{staticClass:"fboxRow Ycenter"},[o("div",{staticClass:"ml-5"},[e._v(e._s(e.$t("common.addressNotAvailable")))])])]),e.$store.state.isCloud&&0==e.nodeDetails.status?o("el-form-item",{attrs:{label:e.$t("common.forcedMigration"),prop:"force"}},[o("template",{slot:"label"},[o("span",[e._v(e._s(e.$t("common.forcedMigration")))]),o("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:e.$t("common.instanceRestarted")}},[o("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),o("div",{staticClass:"fboxRow Ycenter"},[o("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.formData.force,callback:function(t){e.$set(e.formData,"force",t)},expression:"formData.force"}}),o("div",{staticClass:"ml-5"},[e._v(e._s(e.$t("common.oldNodeConnected")))])],1)],2):e._e()]:e._e(),"changeRemark"===e.dialog.type?[o("el-form-item",{attrs:{label:e.$t("common.remark"),prop:"remark"}},[o("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea",rows:1,autosize:!0},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1)]:e._e()],2),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialog.show=!1}}},[e._v(e._s(e.$t("common.cancel")))]),o("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.handelConfirm}},[e._v(e._s(e.$t("common.sure"))+" ")])],1)],1)],1)},s=[],n=(a("99af"),a("4de4"),a("b0c0"),a("b680"),a("5530")),r=(a("96cf"),a("1da1")),i=a("830e"),l=a("297c"),c=a("c8f0"),d=a("f381"),m=a("f61f"),u=a("dc57"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.originalNodeDetails}},[a("el-form-item",{attrs:{label:e.$t("common.storage666"),"label-width":"200px"}},[a("el-select",{model:{value:e.originalNodeDetails.choose_store_rule,callback:function(t){e.$set(e.originalNodeDetails,"choose_store_rule",t)},expression:"originalNodeDetails.choose_store_rule"}},[a("el-option",{attrs:{label:e.$t("common.remainingCapacity"),value:0}}),a("el-option",{attrs:{label:e.$t("common.countQuantity"),value:1}})],1),a("span",{staticClass:"ml-20"},[e._v(e._s(e.$t("area.msg4")))])],1),"hyperv"!==e.nodeDetails.type?a("el-form-item",{attrs:{label:"QEMU"+e.$t("common.qemuDefVersion"),"label-width":"200px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:0===e.$store.state.config.edition?e.$t("common.msg8"):e.$t("common.msg228"),placement:"top-start",disabled:1===e.$store.state.config.edition}},[a("el-select",{attrs:{disabled:0===e.$store.state.config.edition||2===e.$store.state.config.edition,placeholder:e.$t("common.pleaseChoose")+e.$t("common.qemuVersion")},model:{value:e.originalNodeDetails.default_qemu_version,callback:function(t){e.$set(e.originalNodeDetails,"default_qemu_version",t)},expression:"originalNodeDetails.default_qemu_version"}},e._l(e.qumuList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("span",{staticClass:"ml-20"},[e._v(e._s(e.$t("common.qemuTip1"))),a("a",{attrs:{target:"_blank",href:"https://www.idcsmart.com/wiki_list/851.html"}},[e._v(e._s(e.$t("common.qemuTip4")))])])],1):e._e(),"hyperv"!==e.nodeDetails.type&&"adsl"!==e.nodeDetails.type?a("el-form-item",{attrs:{label:e.$t("common.natPortRange"),"label-width":"200px"}},[a("el-tooltip",{staticClass:"nat-status",attrs:{effect:"dark",disabled:0!==e.nodeDetails.nat_status,content:e.$t("area.noNat"),placement:"top"}},[a("span",[a("el-input",{attrs:{placeholder:e.$t("common.pleaseEnterPort"),disabled:0===e.nodeDetails.nat_status},model:{value:e.originalNodeDetails.nat_port_range,callback:function(t){e.$set(e.originalNodeDetails,"nat_port_range",t)},expression:"originalNodeDetails.nat_port_range"}})],1)])],1):e._e(),a("el-form-item",{attrs:{label:e.$t("common.customDiskBackupPath"),"label-width":"200px",prop:"backup_path"}},[a("el-input",{attrs:{placeholder:e.$t("common.defaultAddress")},model:{value:e.originalNodeDetails.backup_path,callback:function(t){e.$set(e.originalNodeDetails,"backup_path",t)},expression:"originalNodeDetails.backup_path"}}),a("span",{staticClass:"ml-20"},[e._v(e._s(e.$t("area.msg5")))])],1),a("el-form-item",{attrs:{label:e.$t("common.allocateMemoryLimit")+"(G)","label-width":"200px"}},[a("el-input",{model:{value:e.originalNodeDetails.max_memory,callback:function(t){e.$set(e.originalNodeDetails,"max_memory",t)},expression:"originalNodeDetails.max_memory"}}),a("span",{staticClass:"ml-20"},[e._v(e._s(e.$t("area.msg6")))])],1),a("el-form-item",{attrs:{label:e.$t("common.allocateCpuLimit"),"label-width":"200px"}},[a("el-input-number",{attrs:{controls:!1,min:0,max:99999999,precision:0},model:{value:e.originalNodeDetails.max_cpu,callback:function(t){e.$set(e.originalNodeDetails,"max_cpu",t)},expression:"originalNodeDetails.max_cpu"}}),a("span",{staticClass:"ml-20"},[e._v(e._s(e.$t("area.msg11")))])],1),"hyperv"!==e.nodeDetails.type?a("el-form-item",{attrs:{label:e.$t("common.customHostName"),"label-width":"200px",prop:"custom_hostname"}},[a("el-input",{attrs:{placeholder:e.$t("common.customHostTip")},model:{value:e.originalNodeDetails.custom_hostname,callback:function(t){e.$set(e.originalNodeDetails,"custom_hostname",t)},expression:"originalNodeDetails.custom_hostname"}}),a("span",{staticClass:"ml-20"},[e._v(e._s(e.$t("common.customHostTip1")))])],1):e._e(),a("el-form-item",[a("template",{slot:"label"},[a("div",{staticStyle:{"font-weight":"700","text-align":"left","margin-left":"60px"}},[e._v(" "+e._s(e.$t("area.memoryRecovery"))+" ")])])],2),a("el-form-item",{attrs:{label:e.$t("area.memoryCollectionStrength"),"label-width":"200px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:0===e.$store.state.config.edition?e.$t("common.msg8"):e.$t("common.msg228"),placement:"top",disabled:1===e.$store.state.config.edition}},[a("span",[a("el-select",{staticClass:"mr-10",attrs:{disabled:0===e.$store.state.config.edition||2===e.$store.state.config.edition},model:{value:e.originalNodeDetails.ksm_recycle_speed,callback:function(t){e.$set(e.originalNodeDetails,"ksm_recycle_speed",t)},expression:"originalNodeDetails.ksm_recycle_speed"}},[a("el-option",{attrs:{value:10,label:e.$t("area.veryFast")}}),a("el-option",{attrs:{value:30,label:e.$t("area.fast")}}),a("el-option",{attrs:{value:60,label:e.$t("area.general")}}),a("el-option",{attrs:{value:90,label:e.$t("area.slow")}}),a("el-option",{attrs:{value:120,label:e.$t("area.verySlow")}})],1),a("span",{staticClass:"ml-20"},[e._v(e._s(e.$t("area.msg1")))])],1)])],1),a("el-form-item",{attrs:{label:e.$t("area.percentageRecovery"),"label-width":"200px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:0===e.$store.state.config.edition?e.$t("common.msg8"):e.$t("common.msg228"),placement:"top",disabled:1===e.$store.state.config.edition}},[a("span",[a("el-input",{attrs:{disabled:0===e.$store.state.config.edition||2===e.$store.state.config.edition},model:{value:e.originalNodeDetails.ksm_recycle_start_percent,callback:function(t){e.$set(e.originalNodeDetails,"ksm_recycle_start_percent",t)},expression:"originalNodeDetails.ksm_recycle_start_percent"}})],1)]),a("span",{staticClass:"mr-10 ml-10"},[e._v("%")]),a("span",[e._v(e._s(e.$t("area.msg2")))])],1),e.nodeDetails.trunk?a("el-form-item",{staticStyle:{"font-weight":"700"},attrs:{label:"VLAN","label-width":"100px"}}):e._e(),e.nodeDetails.trunk?a("el-form-item",{attrs:{label:e.$t("common.usable")+"vlan","label-width":"200px"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:0===e.$store.state.config.edition?e.$t("common.msg8"):e.$t("common.msg228"),placement:"top",disabled:1===e.$store.state.config.edition}},[a("span",[a("el-input",{attrs:{disabled:0===e.$store.state.config.edition||2===e.$store.state.config.edition},model:{value:e.originalNodeDetails.vlan,callback:function(t){e.$set(e.originalNodeDetails,"vlan",t)},expression:"originalNodeDetails.vlan"}})],1)]),a("span",{staticClass:"ml-20"},[e._v(e._s(e.$t("area.msg7")))])],1):e._e()],1),a("br"),a("br"),a("el-row",[a("el-col",{attrs:{offset:2}},[a("el-button",{on:{click:e.restore}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.$t("common.save")))])],1)],1)],1)},f=[],h=(a("4160"),a("c975"),a("a9e3"),a("159b"),{props:{nodeDetails:{type:Object,required:!0},nodeId:{type:Number,required:!0}},data:function(){var e=this,t=function(t,a,o){if(a){var s=/^(?!-)[a-zA-Z0-9.-]*[a-zA-Z0-9.]$/;s.test(a)?o():o(new Error(e.$t("common.customHostTip2")))}else o()};return{qumuList:[],originalNodeDetails:{choose_store_rule:0,default_qemu_version:"",nat_port_range:"",backup_path:"",max_memory:"",max_cpu:"",ksm_recycle_speed:60,ksm_recycle_start_percent:5,ksm_recycle_force:0,vlan:"",custom_hostname:""},rules:{custom_hostname:[{validator:t,trigger:"change"}]}}},created:function(){},mounted:function(){},methods:{submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=16;break}return t.prev=1,o=Object(n["a"])({id:e.nodeId},e.originalNodeDetails),""!==e.originalNodeDetails.default_qemu_version&&(o.default_qemu_version=e.qumuList[e.originalNodeDetails.default_qemu_version+1].label),0!==e.$store.state.config.edition&&2!==e.$store.state.config.edition||delete o.default_qemu_version,t.next=7,e.$api.reviseNodeInfo(o);case 7:e.$emit("getNodeDetails"),e.$message.success(e.$t("common.saveSuccess")),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),e.$message.error(t.t0.data.error);case 14:t.next=17;break;case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}())},restore:function(){this.originalNodeDetails={choose_store_rule:this.nodeDetails.choose_store_rule,default_qemu_version:this.nodeDetails.default_qemu_version,nat_port_range:this.nodeDetails.nat_port_range,backup_path:this.nodeDetails.backup_path,max_memory:this.nodeDetails.max_memory,max_cpu:this.nodeDetails.max_cpu,ksm_recycle_speed:this.nodeDetails.ksm_recycle_speed,ksm_recycle_start_percent:this.nodeDetails.ksm_recycle_start_percent,ksm_recycle_force:this.nodeDetails.ksm_recycle_force,vlan:this.nodeDetails.vlan,custom_hostname:this.nodeDetails.custom_hostname}}},computed:{},watch:{nodeDetails:function(e){var t=this;this.originalNodeDetails={choose_store_rule:e.choose_store_rule,default_qemu_version:-1===e.qemu_version.indexOf(e.default_qemu_version)?"":e.qemu_version.indexOf(e.default_qemu_version),nat_port_range:e.nat_port_range,backup_path:e.backup_path,max_memory:e.max_memory,max_cpu:e.max_cpu,ksm_recycle_speed:e.ksm_recycle_speed,ksm_recycle_start_percent:e.ksm_recycle_start_percent,ksm_recycle_force:e.ksm_recycle_force,vlan:this.nodeDetails.vlan,custom_hostname:e.custom_hostname};var a=e.default_qemu_version_show?e.default_qemu_version_show:this.$t("common.qemuDefVersion");this.qumuList=[{value:"",label:a}],e.qemu_version.forEach((function(e,a){t.qumuList.push({value:a,label:e})}))}}}),g=h,v=(a("8b31"),a("2877")),b=Object(v["a"])(g,p,f,!1,null,"c5083dc2",null),_=b.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.openBridge("add")}}},[e._v(e._s(e.$t("common.establish")))])],1),a("br"),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.networkData}},[a("el-table-column",{attrs:{prop:"name",label:e.$t("config.networkIp.physicalInterface")}}),a("el-table-column",{attrs:{prop:"net_name",label:e.$t("config.networkIp.networkName")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",["phy-ext"!==o.net_name?a("span",[e._v(e._s(o.net_name))]):a("span",[a("span",{staticStyle:{color:"red","margin-left":"-6px"}},[e._v("*")]),e._v(e._s(o.net_name))])])]}}])}),a("el-table-column",{attrs:{prop:"type",label:e.$t("common.typesOf")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",["phy_interface"===o.type?a("span",[e._v(e._s(e.$t("config.networkIp.physicalNetwork")))]):"bridge"===o.type?a("span",[e._v(e._s(1===o.is_add?"bridge"===o.bridge_type?"Bridge":"Open vSwitch":e.$t("config.networkIp.bridge")))]):e._e()])]}}])}),a("el-table-column",{attrs:{prop:"status",label:e.$t("common.status")}}),a("el-table-column",{attrs:{prop:"auto",label:e.$t("config.networkIp.auto")}}),a("el-table-column",{attrs:{prop:"phy_interface",label:e.$t("config.networkIp.relevance")}}),a("el-table-column",{attrs:{prop:"bond",label:"bond"}}),a("el-table-column",{attrs:{prop:"ip",label:"IP/"+e.$t("config.networkIp.mask")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return e._l(o.ip,(function(t){return a("div",{key:t},[e._v(" "+e._s(t)+" ")])}))}}])}),a("el-table-column",{attrs:{prop:"gateway",label:e.$t("config.networkIp.network")}}),a("el-table-column",{attrs:{prop:"net_name",label:e.$t("common.remark")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return["phy-ext"!==o.net_name&&"bridge"===o.type?a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.openBridge("edit",o)}}},[e._v(e._s(e.$t("common.update")))]),o.is_add?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.openBridge("del",o)}}},[e._v(" "+e._s(e.$t("common.delete")))]):e._e()],1):e._e()]}}])})],1),a("el-dialog",{attrs:{title:"add"===e.type?e.$t("config.networkIp.createABridge"):e.$t("config.networkIp.editBridge"),width:"600px",visible:e.isaddNetworkFormShow},on:{"update:visible":function(t){e.isaddNetworkFormShow=t},close:e.closeDialog}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-form",{ref:"addNetworkForm",attrs:{"label-width":"zh-cn"===e.$i18n.locale?"140px":"196px",model:e.addNetworkForm,rules:e.addNetworkFormRules}},[a("el-form-item",{attrs:{label:e.$t("config.networkIp.interfaceName"),prop:"name"}},[a("el-input",{staticStyle:{width:"216px"},model:{value:e.addNetworkForm.name,callback:function(t){e.$set(e.addNetworkForm,"name",t)},expression:"addNetworkForm.name"}})],1),a("el-form-item",{attrs:{label:e.$t("config.networkIp.networkName"),prop:"net_name"}},[e._v(" "+e._s(e.addNetworkForm.net_name)+" ")]),a("el-form-item",{attrs:{label:e.$t("config.networkIp.checkNetwork"),prop:"add"===e.type?"phy_interface":""}},[a("el-select",{attrs:{disabled:"edit"===this.type},model:{value:e.addNetworkForm.phy_interface,callback:function(t){e.$set(e.addNetworkForm,"phy_interface",t)},expression:"addNetworkForm.phy_interface"}},e._l(e.unUsednetworkData,(function(e){return a("el-option",{key:e,attrs:{value:e}})})),1)],1),a("el-form-item",{attrs:{label:e.$t("config.networkIp.bridge_type")}},[a("el-select",{attrs:{disabled:"edit"===this.type},model:{value:e.addNetworkForm.bridge_type,callback:function(t){e.$set(e.addNetworkForm,"bridge_type",t)},expression:"addNetworkForm.bridge_type"}},e._l(e.bridgeArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isaddNetworkFormShow=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitNetwork}},[e._v(e._s(e.$t("common.sure")))])],1)],1),a("deleteDialog",{attrs:{isShowDelDialog:e.isShowDelDialog,dataType:e.delInfo.name||e.delInfo.net_name},on:{submitDeleteRow:e.submitDeleteRow,"update:isShowDelDialog":function(t){e.isShowDelDialog=t},"update:is-show-del-dialog":function(t){e.isShowDelDialog=t}}})],1)},$=[],k=(a("c740"),a("a434"),a("fdad")),y={props:{nodeId:{Type:Number,required:!0}},components:{deleteDialog:k["default"]},data:function(){return{networkData:[],unUsednetworkData:[],type:"add",delInfo:{},isShowDelDialog:!1,addNetworkForm:{name:"",net_name:"",phy_interface:"",bridge_type:"bridge"},bridgeArr:[{value:"bridge",label:"Bridge"},{value:"ovs",label:"Open vSwitch"}],addNetworkFormRules:{name:{required:!0,message:this.$t("common.input")+this.$t("config.networkIp.interfaceName"),trigger:"blur"},net_name:{required:!0,message:this.$t("common.input")+this.$t("config.networkIp.networkName"),trigger:"blur"},phy_interface:{required:!0,message:this.$t("common.input")+this.$t("config.networkIp.checkNetwork"),trigger:"blur"}},isaddNetworkFormShow:!1}},created:function(){this.getNetworkData()},mounted:function(){},methods:{submitDeleteRow:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].delNetwork(e.nodeId,e.delInfo.id);case 3:e.getNetworkData(),e.$message.success(e.$t("common.deleteSuccess")),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},openBridge:function(e,t){this.type=e,"add"===e?(this.getName(),this.isaddNetworkFormShow=!0):"edit"===e?(t&&(this.addNetworkForm=Object(n["a"])({},t)),this.isaddNetworkFormShow=!0):(this.delInfo=t,this.isShowDelDialog=!0)},getName:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].getNetName(e.nodeId);case 3:a=t.sent,e.addNetworkForm.net_name=a.net_name,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},closeDialog:function(){this.addNetworkForm={name:"",net_name:"",phy_interface:"",bridge_type:"bridge"}},submitNetwork:function(){var e=this;this.$refs.addNetworkForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=19;break}if(t.prev=1,"add"!==e.type){t.next=8;break}return t.next=5,c["a"].addNetwork(e.nodeId,e.addNetworkForm);case 5:e.$message.success(e.$t("cloud.createSuccess")),t.next=12;break;case 8:if("edit"!==e.type){t.next=12;break}return t.next=11,c["a"].editNetwork(e.nodeId,{net_id:e.addNetworkForm.id,name:e.addNetworkForm.name});case 11:e.$message.success(e.$t("common.updateSuccess"));case 12:e.getNetworkData(),e.isaddNetworkFormShow=!1,t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),e.$message.error(t.t0.data.error);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}())},getNetworkData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].getNetworkData(e.nodeId);case 3:a=t.sent,a&&(a.data.sort((function(e,t){return e.id-t.id})),o=a.data.findIndex((function(e){return"phy-ext"===e.net_name})),-1!==o&&(a.data.unshift(a.data[o]),a.data.splice(o+1,1)),e.networkData=a.data,e.unUsednetworkData=a.phy_interface_unused),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},computed:{},watch:{}},D=y,x=Object(v["a"])(D,w,$,!1,null,"15179168",null),S=x.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.networkData}},[a("el-table-column",{attrs:{prop:"name",label:"ID"}}),a("el-table-column",{attrs:{prop:"vendor",label:e.$t("common.supplier")}}),a("el-table-column",{attrs:{prop:"product",label:e.$t("common.equType")}}),a("el-table-column",{attrs:{prop:"hostname",label:e.$t("common.example5")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[o.host_id>0?a("router-link",{staticClass:"text-ellipsis",attrs:{to:{name:"CloudsHome",query:{id:o.host_id}}}},[a("el-link",{staticClass:"text-ellipsis",attrs:{type:"primary"}},[e._v(e._s(o.hostname))])],1):e._e()]}}])}),a("el-table-column",{attrs:{prop:"op",label:e.$t("cloudBackup.enable"),width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#2f54ea",disabled:o.host_id>0},on:{change:function(t){return e.changePing(t,o)}},model:{value:o.status,callback:function(t){e.$set(o,"status",t)},expression:"row.status"}})]}}])})],1)],1)},F=[],I={props:{nodeId:{Type:Number,required:!0}},data:function(){return{networkData:[]}},created:function(){this.getNetworkData()},mounted:function(){},methods:{getNetworkData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].getGpuList({id:e.nodeId});case 3:a=t.sent,a&&(e.networkData=a.data),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},changePing:function(e,t){var a=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o={id:t.id,status:t.status},e.next=4,c["a"].changeGpuStatus(o);case 4:a.$message.success(a.$t("common.updateSuccess")),a.getNetworkData(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),a.$message.error(e.t0),a.getNetworkData();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},computed:{},watch:{}},N=I,R=Object(v["a"])(N,C,F,!1,null,"2a9a5b47",null),T=R.exports,O={components:{crumbs:i["default"],clouds:l["default"],nodeSetting:_,netWork:S,gpu:T},data:function(){var e=this;return{nodeId:0,checked:!1,isTypeDisabled:!0,activeName:"echarts",natType:[this.$t("common.notInstalled"),this.$t("common.msg102"),this.$t("common.malfunction"),this.$t("common.creating"),this.$t("common.single22")],regionSelectOptions:[],nodeStatistics:{},evacuation_switch:"1",migrateNode:[],version:"-",nodeDetails:{area:{name:"",country:{code:0}},count:{host:0,ip:0},remark:"",nat_status:0},tips:"",nodeServe:{cpu_info:{},cpu_load:{},disk:[],memory:{},swap:{}},rules:{name:[{required:!0,message:this.$t("admin.usernamePlaceholder"),trigger:"blur"}],port:[{required:!0,message:this.$t("common.enterThePortNumber"),trigger:"blur"},{validator:function(t,a,o){e.$validate.validatepost(t,a,o,7e4)},trigger:"blur"}],ip:[{required:!0,message:this.$t("common.pleaseEnterTheIpDomainName"),trigger:"blur"}],area_id:[{required:!0,message:this.$t("common.selectARegion"),trigger:"change"}],dns1:[{validator:function(t,a,o){a||o(),e.$validate.validateIp(t,a,o,7e4)},trigger:"blur"}],dns2:[{validator:function(t,a,o){a||o(),e.$validate.validateIp(t,a,o,7e4)},trigger:"blur"}],nat_port_range:[{pattern:/^((([1-9][0-9]*|[1-9][0-9]*-[1-9][0-9]*),)*([1-9][0-9]*|[1-9][0-9]*-[1-9][0-9]*))*$/,message:this.$t("common.msg103"),trigger:"blur"}]},nodeTableRevise:!1,nodeForm:{id:"",name:"",ip:"",port:"",dns1:"",dns2:"",ssh_pass:"",area_id:"",username:"",group_id:null,password:"",nat_port_range:""},nodeGroup:[],formData:{type:0,info:null,state:"nat",node:[],assign_ip:1,force:0,remark:""},formRules:{data:{required:!0,message:this.$t("common.msg104"),trigger:"blur"},remark:{validator:function(t,a,o){return e.$validate.validateLength(t,a,o,0,255)},trigger:"change"}},dialog:{show:!1,title:"",type:"nat"},btnLoading:!1}},computed:{ioWait:function(){var e=this.nodeServe.io_wait?this.nodeServe.io_wait:0;return parseFloat(e).toFixed(2)}},watch:{nodeTableRevise:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e||0!==t.nodeGroup.length){a.next=5;break}return a.next=3,c["a"].getNodeGroupsReq({list_type:"all"});case 3:o=a.sent,t.nodeGroup=o.data;case 5:case"end":return a.stop()}}),a)})))()}},methods:{getNodeStatus:function(){var e=this;this.nodeDetails.status=-1,this.$api.getNodeStatus({id:this.nodeId}).then((function(t){e.nodeDetails.status=t.status,e.version=t.version,e.tips=t.msg})).catch((function(){e.nodeDetails.status=0,e.tips=e.$t("common.connectionTimedOut")}))},getSingleNATStatus:function(){var e=this;this.nodeDetails.nat_status=-1,this.$api.getNatStatus({id:this.nodeId}).then((function(t){e.nodeDetails.nat_status=t.status,2===t.status&&(e.natType[2]=t.msg)}))},getNodeDetails:function(){var e=this;this.$api.getNodeDetails({id:this.nodeId}).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var o,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.nodeDetails=a,"hyperv"===e.nodeDetails.type&&(e.activeName="clouds"),e.getNodeStatus(),t.next=5,m["a"].getEvacuateNodeReq({area_id:e.nodeDetails.area_id});case 5:return o=t.sent,s=o.data,e.migrateNode=s.filter((function(t){return t.id!==e.nodeDetails.id})),t.next=10,d["a"].getEvacuation();case 10:n=t.sent,e.evacuation_switch=n.evacuation_switch;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.$api.getNodeTime({id:this.nodeId}).then((function(t){e.nodeServe=t})),this.$api.getNodeStatistics({id:this.nodeId}).then((function(t){e.nodeStatistics=t,e.$nextTick((function(){e.$refs.diskEcharts.init(),e.$refs.cpuEcharts.init(),e.$refs.nodeNetwork.init(),e.$refs.nodePPS.init(),e.$refs.storageEcharts.init(),e.$refs.nodeDosage.init(),e.$refs.node_disk_io.init()}))}))},resize:Object(u["b"])((function(){this.$refs.diskEcharts&&this.$refs.diskEcharts.resize("nodeDisk"),this.$refs.cpuEcharts&&this.$refs.cpuEcharts.resize("nodeCpu"),this.$refs.nodePPS&&this.$refs.nodePPS.resize("nodePPS"),this.$refs.nodePPS&&this.$refs.nodePPS.resize("nodeDosage"),this.$refs.nodeNetwork&&this.$refs.nodeNetwork.resize("nodeNetwork"),this.$refs.storageEcharts&&this.$refs.storageEcharts.resize("nodeStorage"),this.$refs.node_disk_io&&this.$refs.node_disk_io.resize("node_disk_io")}),1e3),reviseNode:function(){this.nodeTableRevise=!0,this.nodeForm.id=this.nodeDetails.id,this.nodeForm.name=this.nodeDetails.name,this.nodeForm.ip=this.nodeDetails.ip,this.nodeForm.type=this.nodeDetails.type,this.nodeForm.port=this.nodeDetails.port,this.nodeForm.ssh_pass=this.nodeDetails.ssh_pass,this.nodeForm.ssh_key=this.nodeDetails.ssh_key,this.nodeForm.area_id=this.nodeDetails.area_id,this.nodeForm.username=this.nodeDetails.username,this.nodeForm.password=this.nodeDetails.password,this.nodeForm.dns1=this.nodeDetails.dns1,this.nodeForm.dns2=this.nodeDetails.dns2,this.nodeForm.remark=this.nodeDetails.remark,this.nodeForm.group_id=0===this.nodeDetails.group_id?null:this.nodeDetails.group_id,this.nodeForm.choose_store_rule=this.nodeDetails.choose_store_rule,this.nodeForm.nat_port_range=this.nodeDetails.nat_port_range},resetForm:function(){var e=this;this.nodeForm={id:"",name:"",ip:"",type:"",port:"",dns1:"",dns2:"",ssh_pass:"",ssh_key:"",area_id:"",username:"",group_id:null,password:"",nat_port_range:"",remark:""},setTimeout((function(){e.$refs.nodeForm.clearValidate()}),0)},changeText:function(){this.$forceUpdate()},subminForm:function(){var e=this;this.$refs.nodeForm.validate((function(t){t&&e.$api.reviseNodeInfo(e.nodeForm).then((function(t){e.nodeTableRevise=!1,e.getNodeDetails(),e.$message({message:e.$t("common.updateSuccess"),type:"success"})})).catch((function(t){e.$message.error(t.data.error)}))}))},openDialog:function(e){var t=this;"changeRemark"===e?(this.dialog.type="changeRemark",this.dialog.show=!0,this.formData.remark=this.nodeDetails.remark,this.dialog.title=this.$t("common.modifyRemarks")):(this.formData.state="nat",this.dialog.type=e,this.dialog.show=!0,this.btnLoading=!1,this.dialog.title="nat"===e?this.$t("common.forwardingWebsite"):this.$t("common.migrate"),this.$nextTick((function(){t.$refs.elForm.resetFields()})))},consoleHandler:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.$store.state.authorize_info.edition){t.next=2;break}return t.abrupt("return",e.$message(e.$t("common.msg8")));case 2:if(2!==e.$store.state.authorize_info.edition){t.next=4;break}return t.abrupt("return",e.$message(e.$t("common.msg228")));case 4:return t.prev=4,t.next=7,d["a"].getWebShell(e.nodeId);case 7:a=t.sent,window.open(a.url),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),e.$message.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))()},handelConfirm:function(){var e=this;this.$refs.elForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&("migrate"===e.dialog.type?e.migrateNodeNat():"changeRemark"===e.dialog.type?e.changeRemark():"nat"===e.formData.state?e.installNat():"ip"===e.formData.state&&e.changeSingleIpNat());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},changeRemark:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={remark:e.formData.remark},t.prev=1,t.next=4,e.$api.reviseNodeInfo(Object(n["a"])({id:e.nodeDetails.id},a));case 4:e.dialog.show=!1,e.$message.success(e.$t("common.updateSuccess")),e.getNodeDetails(),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](1);case 11:e.$refs.elForm.resetFields();case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},migrateNodeNat:function(){var e=this;this.$swal.fire({title:this.$t("common.msg109"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value){t.next=17;break}return t.prev=1,e.btnLoading=!0,o={id:e.nodeDetails.id,type:e.formData.type,assign_ip:e.formData.assign_ip,force:e.formData.force},0===e.formData.type&&(o.node=e.formData.node),t.next=7,c["a"].openEvacuationReq(o);case 7:e.btnLoading=!1,e.dialog.show=!1,e.$message.success(e.$t("common.initiatedSuccessfully")),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),e.btnLoading=!1;case 15:t.next=18;break;case 17:e.btnLoading=!1;case 18:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}())},installNat:function(){var e=this;this.$confirm("<div>".concat(this.$t("common.template1"),"</div>\n          <div>").concat(this.$t("common.template2"),"</div>"),this.$t("common.tips"),{dangerouslyUseHTMLString:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then((function(){e.btnLoading=!0;var t={node:e.nodeDetails.id,is_nat_host:1};e.$api.createCloud(t).then((function(){e.$message.success(e.$t("cloud.createSuccess")),e.getSingleNATStatus(),e.btnLoading=!1,e.dialog.show=!1}),(function(t){e.$message.error(t.data.error),e.btnLoading=!1,e.dialog.show=!1}))}))},changeSingleIpNat:function(){var e=this;this.$confirm('<div style="color:#F56C6C;">'.concat(this.$t("common.template4"),"</div>"),this.$t("common.tips"),{dangerouslyUseHTMLString:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var o,s,r,i,l,d,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("confirm"!==a){t.next=14;break}return e.btnLoading=!0,t.prev=2,o=Object(n["a"])({},e.nodeDetails),t.next=6,c["a"].openSingleINatReq(e.nodeDetails.id);case 6:e.getSingleNATStatus(o),e.dialog.show=!1,"127.0.0.1"===e.nodeDetails.ip&&(s=location.hostname,r=location.pathname,i="https://".concat(s,":8443").concat(r,"#login"),location.href=i),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),"127.0.0.1"===e.nodeDetails.ip&&(l=location.hostname,d=location.pathname,m="https://".concat(l,":8443").concat(d,"#login"),location.href=m);case 14:e.btnLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}())},changeEnable:function(){var e=this;this.$api.reviseNodeInfo({id:this.nodeDetails.id,enable:this.nodeDetails.enable}).then((function(){var t=1===e.nodeDetails.enable?e.$t("common.open"):e.$t("common.deactivate");e.$message.success(t+e.$t("common.success"))})).catch((function(t){1===e.nodeDetails.enable?e.nodeDetails.enable=0:e.nodeDetails.enable=1,e.$message.error(t.data.error)}))},changeAuto:function(){var e=this;this.$api.reviseNodeInfo({id:this.nodeDetails.id,auto_boot_host:this.nodeDetails.auto_boot_host}).then((function(){var t=1===e.nodeDetails.auto_boot_host?e.$t("common.open"):e.$t("common.close");e.$message.success(t+e.$t("common.automaticStart"))})).catch((function(t){1===e.nodeDetails.auto_boot_host?e.nodeDetails.auto_boot_host=0:e.nodeDetails.auto_boot_host=1,e.$message.error(t.data.error)}))}},created:function(){var e=this;this.nodeId=parseInt(this.$route.query.id),this.getNodeDetails(),this.$api.areas(this.list_type).then((function(t){e.regionSelectOptions=t.data}))},mounted:function(){var e=this;window.addEventListener("resize",this.resize),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",e.resize)}))}},q=O,A=(a("7261"),Object(v["a"])(q,o,s,!1,null,"15e80e2e",null));t["default"]=A.exports},"3d6a":function(e,t,a){},"3e91":function(e,t,a){"use strict";var o=a("149c"),s=a.n(o);s.a},"3f90":function(e,t,a){},"4df4":function(e,t,a){"use strict";var o=a("0366"),s=a("7b0b"),n=a("9bdd"),r=a("e95a"),i=a("50c4"),l=a("8418"),c=a("35a1");e.exports=function(e){var t,a,d,m,u,p,f=s(e),h="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,b=void 0!==v,_=c(f),w=0;if(b&&(v=o(v,g>2?arguments[2]:void 0,2)),void 0==_||h==Array&&r(_))for(t=i(f.length),a=new h(t);t>w;w++)p=b?v(f[w],w):f[w],l(a,w,p);else for(m=_.call(f),u=m.next,a=new h;!(d=u.call(m)).done;w++)p=b?n(m,v,[d.value,w],!0):d.value,l(a,w,p);return a.length=w,a}},"52c4":function(e,t,a){e.exports=a.p+"img/load.d2f84316.svg"},"5ee6":function(e,t,a){e.exports=a.p+"img/swap.928aae56.svg"},6062:function(e,t,a){"use strict";var o=a("6d61"),s=a("6566");e.exports=o("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},"63ee":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"blacklist"},[a("el-card",[a("div",{staticClass:"font16 font-weight"},[e._v(e._s(e.$t("common.nodeGroup")))]),a("metalTable",{ref:"tableRef",attrs:{tableLoading:e.tableLoading,tableData:e.tableData,total:e.total,orderby:e.orderby,sorting:e.sorting,page:e.page,pageSize:e.pageSize,search:e.search},on:{getTableData:e.getTableData,"update:orderby":function(t){e.orderby=t},"update:sorting":function(t){e.sorting=t},"update:page":function(t){e.page=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:search":function(t){e.search=t}},scopedSlots:e._u([{key:"button",fn:function(){return[a("addButton",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.openDialog()}}})]},proxy:!0},{key:"table",fn:function(){return[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:e.$t("adminGroup.groupName"),width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"description",label:e.$t("systemLog.des"),"min-width":"160","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"node",label:e.$t("common.useNode"),"min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return e._l(o.node,(function(t,o){return a("router-link",{key:o,attrs:{to:{name:"NodeDetails",query:{id:t.id}}}},[a("el-tag",{staticClass:"mr-10",attrs:{size:"mini",type:"success"}},[e._v(e._s(t.name))])],1)}))}}])}),a("el-table-column",{attrs:{prop:"create_time",label:e.$t("common.createdTime"),width:"160"}}),a("el-table-column",{attrs:{label:e.$t("common.manage"),width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{type:"update"},on:{click:function(t){return e.updateRow(o,e.updateCallback)}}}),a("cl-button",{attrs:{type:"delete"},on:{click:function(t){return e.deleteRow(o)}}})],1)]}}])})]},proxy:!0}])}),a("el-dialog",{attrs:{title:e.form.title,visible:e.form.formDialogVisable,width:"500px"},on:{"update:visible":function(t){return e.$set(e.form,"formDialogVisable",t)},closed:e.closeDialog}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.formRule,size:"medium","label-width":"140px","label-position":e.$globalConfig.labelPosition}},[a("el-form-item",{attrs:{label:e.$t("adminGroup.groupName"),prop:"name"}},[a("el-input",{attrs:{type:"text",placeholder:e.$t("image.namePlaceholder")},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:e.$t("common.description"),prop:"description"}},[a("el-input",{attrs:{type:"text",placeholder:e.$t("common.enterDescription")},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),a("el-form-item",{attrs:{label:e.$t("common.node"),prop:"node"}},[a("el-select",{staticClass:"wt100",attrs:{placeholder:e.$t("cloud.selectNode"),multiple:""},model:{value:e.formData.node,callback:function(t){e.$set(e.formData,"node",t)},expression:"formData.node"}},e._l(e.node,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.name}})})),1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.form.formDialogVisable=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.$t("common.sure")))])],1)],1)],1)],1)},s=[],n=(a("d81d"),a("dca8"),a("ac1f"),a("841c"),a("96cf"),a("1da1")),r=a("d75a"),i=a("c8f0"),l={metaInfo:function(){return{title:this.$t("common.nodeGroup")}},mixins:[r["a"]],data:function(){return{tableData:[],total:0,tableLoading:!1,node:[],formData:{id:null,name:null,description:null,node:[]},formRule:{name:[{required:!0,message:this.$t("common.enterTheName"),trigger:"blur"}]}}},computed:{},watch:{"form.formDialogVisable":function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e||0!==t.node.length){a.next=5;break}return a.next=3,i["a"].getNodeReq({list_type:"all"});case 3:o=a.sent,t.node=o.data;case 5:case"end":return a.stop()}}),a)})))()}},methods:{updateCallback:function(e){this.formData.node=e.node.map((function(e){return e.id}))},getTableData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$searchAlive.urlUpdate({search:e.search},location.href,e.$route.query),t.prev=1,e.tableLoading=!0,a={orderby:e.orderby,sort:e.sorting,per_page:e.pageSize,search:e.search,page:e.page},t.next=6,i["a"].getNodeGroupsReq(a);case 6:o=t.sent,e.tableData=Object.freeze(o.data),e.total=o.meta.total,t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](1);case 13:return t.prev=13,e.tableLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,11,13,16]])})))()},create:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].createNodeGroupsReq(e.formData);case 2:e.form.formDialogVisable=!1,e.$message.success(e.$t("common.addSuccess")),e.getTableData();case 5:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].updateNodeGroupsReq(e.formData);case 2:e.form.formDialogVisable=!1,e.$message.success(e.$t("common.updateSuccess")),e.getTableData();case 5:case"end":return t.stop()}}),t)})))()},deleteRow:function(e){var t=this;this.$swal.fire({title:this.$t("common.confirmDelete"),icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!o.isConfirmed){a.next=5;break}return a.next=3,i["a"].deleteNodeGroupsReq(e.id);case 3:t.$message.success(t.$t("common.deleteSuccess")),t.getTableData();case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},mounted:function(){var e=this.$searchAlive.urlGetData();e.search&&(this.search=e.search,this.$refs.tableRef.metalSearch=e.search,this.$refs.tableRef.getTableData())}},c=l,d=(a("3e91"),a("2877")),m=Object(d["a"])(c,o,s,!1,null,"b5cfa4b8",null);t["default"]=m.exports},6566:function(e,t,a){"use strict";var o=a("9bf2").f,s=a("7c73"),n=a("e2cc"),r=a("0366"),i=a("19aa"),l=a("2266"),c=a("7dd0"),d=a("2626"),m=a("83ab"),u=a("f183").fastKey,p=a("69f3"),f=p.set,h=p.getterFor;e.exports={getConstructor:function(e,t,a,c){var d=e((function(e,o){i(e,d,t),f(e,{type:t,index:s(null),first:void 0,last:void 0,size:0}),m||(e.size=0),void 0!=o&&l(o,e[c],e,a)})),p=h(t),g=function(e,t,a){var o,s,n=p(e),r=v(e,t);return r?r.value=a:(n.last=r={index:s=u(t,!0),key:t,value:a,previous:o=n.last,next:void 0,removed:!1},n.first||(n.first=r),o&&(o.next=r),m?n.size++:e.size++,"F"!==s&&(n.index[s]=r)),e},v=function(e,t){var a,o=p(e),s=u(t);if("F"!==s)return o.index[s];for(a=o.first;a;a=a.next)if(a.key==t)return a};return n(d.prototype,{clear:function(){var e=this,t=p(e),a=t.index,o=t.first;while(o)o.removed=!0,o.previous&&(o.previous=o.previous.next=void 0),delete a[o.index],o=o.next;t.first=t.last=void 0,m?t.size=0:e.size=0},delete:function(e){var t=this,a=p(t),o=v(t,e);if(o){var s=o.next,n=o.previous;delete a.index[o.index],o.removed=!0,n&&(n.next=s),s&&(s.previous=n),a.first==o&&(a.first=s),a.last==o&&(a.last=n),m?a.size--:t.size--}return!!o},forEach:function(e){var t,a=p(this),o=r(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:a.first){o(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!v(this,e)}}),n(d.prototype,a?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),m&&o(d.prototype,"size",{get:function(){return p(this).size}}),d},setStrong:function(e,t,a){var o=t+" Iterator",s=h(t),n=h(o);c(e,t,(function(e,t){f(this,{type:o,target:e,state:s(e),kind:t,last:void 0})}),(function(){var e=n(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),d(t)}}},"6be5":function(e,t,a){e.exports=a.p+"img/hardDisk.fd3695f4.svg"},"6d61":function(e,t,a){"use strict";var o=a("23e7"),s=a("da84"),n=a("94ca"),r=a("6eeb"),i=a("f183"),l=a("2266"),c=a("19aa"),d=a("861d"),m=a("d039"),u=a("1c7e"),p=a("d44e"),f=a("7156");e.exports=function(e,t,a){var h=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),v=h?"set":"add",b=s[e],_=b&&b.prototype,w=b,$={},k=function(e){var t=_[e];r(_,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!d(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!d(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!d(e))&&t.call(this,0===e?0:e)}:function(e,a){return t.call(this,0===e?0:e,a),this})};if(n(e,"function"!=typeof b||!(g||_.forEach&&!m((function(){(new b).entries().next()})))))w=a.getConstructor(t,e,h,v),i.REQUIRED=!0;else if(n(e,!0)){var y=new w,D=y[v](g?{}:-0,1)!=y,x=m((function(){y.has(1)})),S=u((function(e){new b(e)})),C=!g&&m((function(){var e=new b,t=5;while(t--)e[v](t,t);return!e.has(-0)}));S||(w=t((function(t,a){c(t,w,e);var o=f(new b,t,w);return void 0!=a&&l(a,o[v],o,h),o})),w.prototype=_,_.constructor=w),(x||C)&&(k("delete"),k("has"),h&&k("get")),(C||D)&&k(v),g&&_.clear&&delete _.clear}return $[e]=w,o({global:!0,forced:w!=b},$),p(w,e),g||a.setStrong(w,e,h),w}},7261:function(e,t,a){"use strict";var o=a("3d6a"),s=a.n(o);s.a},"75f8":function(e,t,a){"use strict";var o=a("3f90"),s=a.n(o);s.a},"7b31":function(e,t,a){e.exports=a.p+"img/memory.efe6b189.svg"},"7f98":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-row",{staticStyle:{"margin-top":"80px"},attrs:{type:"flex",justify:"center"}},[a("div",[a("el-row",{staticStyle:{"text-align":"center"}},[a("h2",[e._v(e._s(e.$t("config.ip.install.disaster")))]),a("br"),a("p",[e._v(e._s(e.$t("config.ip.install.msg1")))]),a("br"),a("p",{staticStyle:{"text-align":"left"}},[e._v(e._s(e.$t("config.ip.install.msg2")))]),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",[a("el-upload",{ref:"upload",attrs:{action:e.base+"/upload_sql","show-file-list":!e.isOutShow,"http-request":e.handleChange}},[a("el-button",{on:{click:function(t){e.isOutShow=!1}}},[e._v(e._s(e.$t("config.ip.install.upload")))])],1)],1),a("el-col",[a("el-button",{on:{click:function(t){e.isOutShow=!0}}},[e._v(e._s(e.$t("config.ip.install.oss")))])],1)],1)],1),a("br"),a("br"),a("br"),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.isOutShow,expression:"isOutShow"}],ref:"databaseForm",staticStyle:{width:"700px"},attrs:{model:e.databaseForm,rules:e.databaseFormRule,"label-width":"180px"}},[a("el-form-item",{attrs:{label:e.$t("config.ip.install.databasePath"),prop:"hostname"}},[a("el-input",{model:{value:e.databaseForm.hostname,callback:function(t){e.$set(e.databaseForm,"hostname",t)},expression:"databaseForm.hostname"}})],1),a("el-form-item",{attrs:{label:e.$t("config.ip.install.databasePort"),prop:"hostport"}},[a("el-input",{model:{value:e.databaseForm.hostport,callback:function(t){e.$set(e.databaseForm,"hostport",t)},expression:"databaseForm.hostport"}})],1),a("el-form-item",{attrs:{label:e.$t("config.ip.install.databaseUser"),prop:"username"}},[a("el-input",{model:{value:e.databaseForm.username,callback:function(t){e.$set(e.databaseForm,"username",t)},expression:"databaseForm.username"}})],1),a("el-form-item",{attrs:{label:e.$t("config.ip.install.databasePassWord"),prop:"password"}},[a("el-input",{model:{value:e.databaseForm.password,callback:function(t){e.$set(e.databaseForm,"password",t)},expression:"databaseForm.password"}})],1),a("el-form-item",{attrs:{label:e.$t("config.ip.install.databaseName"),prop:"database"}},[a("el-input",{model:{value:e.databaseForm.database,callback:function(t){e.$set(e.databaseForm,"database",t)},expression:"databaseForm.database"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("common.sure")))])],1)],1)],1)])],1)},s=[],n=(a("ac1f"),a("1276"),a("5530")),r=(a("96cf"),a("1da1")),i=a("b5d2"),l=a("3995"),c={data:function(){return{databaseForm:{hostname:"",hostport:"",username:"",password:"",database:""},databaseFormRule:{hostname:{required:!0,message:this.$t("common.pleaseEnterContent"),trigger:"blur"},hostport:{required:!0,message:this.$t("common.pleaseEnterContent"),trigger:"blur"},username:{required:!0,message:this.$t("common.pleaseEnterContent"),trigger:"blur"},password:{required:!0,message:this.$t("common.pleaseEnterContent"),trigger:"blur"},database:{required:!0,message:this.$t("common.pleaseEnterContent"),trigger:"blur"}},isOutShow:!1,base:i["a"]}},created:function(){},mounted:function(){},methods:{handleChange:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("file",e.file),o=location.href.split("/install"),s="",o[1]&&(s=o[1]),t.prev=5,t.next=8,l["a"].uploadDB1(a,s);case 8:n=t.sent,location.href=n.url,t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](5);case 14:case"end":return t.stop()}}),t,null,[[5,12]])})))()},onSubmit:function(){var e=this;this.$refs.databaseForm.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var o,s,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=14;break}return t.prev=1,o=Object(n["a"])({},e.databaseForm),s=location.href.split("/install"),r="",s[1]&&(r=s[1]),t.next=8,l["a"].uploadDB(o,r);case 8:i=t.sent,location.href=i.url,t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](1);case 14:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}())}},computed:{},watch:{}},d=c,m=(a("9333"),a("2877")),u=Object(m["a"])(d,o,s,!1,null,"37091e0a",null);t["default"]=u.exports},"8b31":function(e,t,a){"use strict";var o=a("b649"),s=a.n(o);s.a},9168:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ip"},[a("el-card",{staticClass:"box-card"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"ipList",attrs:{name:"ipList"}},[a("div",{staticClass:"font16 font-weight"},[e._v(e._s(e.$t("common.ipDetails")))]),a("div",{staticStyle:{"font-size":"12px","font-weight":"400","margin-top":"8px",color:"#aaa"}},[e._v(" "+e._s(e.$t("common.msg163")))]),a("div",{staticClass:"node-management-row"},[a("div",{staticClass:"management-left"},[a("el-row",{attrs:{type:"flex"}},[a("el-select",{staticClass:"mr-10",attrs:{size:"small"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},[a("el-option",{attrs:{label:e.$t("common.all1"),value:0}}),a("el-option",{attrs:{label:e.$t("common.status"),value:1}})],1),e.searchType?a("el-select",{staticClass:"mr-10",staticStyle:{width:"100px"},attrs:{size:"small",clearable:""},model:{value:e.lock,callback:function(t){e.lock=t},expression:"lock"}},[a("el-option",{attrs:{label:e.$t("common.unlocked"),value:0}}),a("el-option",{attrs:{label:e.$t("common.locking"),value:1}})],1):a("el-input",{staticClass:"mr-10",attrs:{size:"small",placeholder:e.$t("common.findItAccordingToIp")},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.searchCallback}},[e._v(" "+e._s(e.$t("common.search")))])],1)],1),e.isAgent?e._e():a("div",{staticClass:"button-wrapper",on:{click:e.addIp}},[a("addButton")],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":e.$t("common.loading"),data:e.ipData,border:""},on:{"selection-change":e.selectionChange,"sort-change":e.sortChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",sortable:""}}),a("el-table-column",{attrs:{prop:"ip",label:e.$t("common.ipAddress"),width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-tooltip",{attrs:{content:e.$t("common.ipIsLocked"),disabled:1!==o.lock}},[a("div",[a("span",[e._v(e._s(o.ip))]),1===o.lock?a("i",{staticClass:"el-icon-lock"}):e._e()])])]}}])}),a("el-table-column",{attrs:{prop:"hostname",label:e.$t("common.hostName"),"min-width":"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("router-link",{attrs:{to:"cloud"===o.type?{name:"CloudsHome",query:{id:o.hostid}}:{name:"balanceHome",query:{id:o.hostid}}}},[a("el-link",{attrs:{type:"primary"}},[e._v(e._s(o.hostname))])],1)]}}])}),a("el-table-column",{attrs:{prop:"mac",label:"MAC","min-width":"90","show-overflow-tooltip":"",formatter:function(e){return e.ip_mac||e.mac}}}),a("el-table-column",{attrs:{prop:"username",label:e.$t("common.user"),"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",[o.parent?a("span",[e._v(e._s(e.$t("common.agents"))+e._s(o.username)+"("+e._s(o.parent_name)+")")]):a("span",[e._v(e._s(o.username))])])]}}])}),a("el-table-column",{attrs:{prop:"resource_package",label:e.$t("common.resourceAllot"),"show-overflow-tooltip":""}}),e.isAgent?e._e():a("el-table-column",{attrs:{prop:"area_name",label:e.$t("common.regionNode"),"min-width":"120",formatter:e.formatterAreaNode}}),e.isAgent?e._e():a("el-table-column",{attrs:{prop:"vlanid",label:"VLAN",width:"100"}}),e.isAgent?e._e():a("el-table-column",{attrs:{prop:"remark",label:e.$t("userList.remark"),"min-width":"200","show-overflow-tooltip":""}}),e.isAgent?e._e():a("el-table-column",{attrs:{label:e.$t("common.manage"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("cl-button",{attrs:{type:"update"},on:{click:function(t){return e.handleModify(o)}}}),o.hostid>0?e._e():a("cl-button",{attrs:{type:"delete"},on:{click:function(t){return e.deleteIp(o)}}})]}}],null,!1,646547576)})],1),a("div",{staticClass:"pagination"},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("div",{staticStyle:{display:"flex"}},[e.isAgent?e._e():a("el-dropdown",{attrs:{szie:"small"}},[a("span",{staticClass:"el-dropdown-link delete-btn",staticStyle:{outline:"none",display:"inline-block"}},[e._v(" "+e._s(e.$t("image.batch"))),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"delete-btn",on:{click:function(t){return e.massOperation("deleteCheck")}}},[e._v(" "+e._s(e.$t("databaseBackup.batchRemove"))+" ")])]),a("el-dropdown-item",[a("div",{staticClass:"delete-btn",on:{click:function(t){return e.massOperation("updateCheck")}}},[e._v(" "+e._s(e.$t("image.batchModify")))])])],1)],1)],1),a("el-pagination",{attrs:{"current-page":e.pageInfo.page,"page-sizes":[10,20,50,100],"page-size":e.pageInfo.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange,"update:currentPage":function(t){return e.$set(e.pageInfo,"page",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.pageInfo,"per_page",t)},"update:page-size":function(t){return e.$set(e.pageInfo,"per_page",t)}}}),a("div")],1)],1)],1)],1),a("el-dialog",{attrs:{title:e.$t("common.addIp"),visible:e.ipTableAdd,width:"500px"},on:{"update:visible":function(t){e.ipTableAdd=t},close:e.resetForm}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"addIpForm",attrs:{rules:e.rules,model:e.addIpForm,size:"medium","label-width":"140px","label-position":e.$globalConfig.labelPosition}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"}},[a("el-row",{staticClass:"mr-10",staticStyle:{width:"285px"},attrs:{type:"flex",justify:"end"}},[a("el-checkbox",{model:{value:e.addIpForm.senior,callback:function(t){e.$set(e.addIpForm,"senior",t)},expression:"addIpForm.senior"}}),a("span",{staticClass:"ml-5"},[e._v(" "+e._s(e.$t("common.advance")))])],1)],1),a("el-form-item",{attrs:{label:e.$t("common.startIp"),prop:"first_ip"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:e.addIpForm.first_ip,callback:function(t){e.$set(e.addIpForm,"first_ip",t)},expression:"addIpForm.first_ip"}})],1),a("el-form-item",{attrs:{label:e.$t("common.endIp"),prop:"end_ip"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:e.addIpForm.end_ip,callback:function(t){e.$set(e.addIpForm,"end_ip",t)},expression:"addIpForm.end_ip"}})],1),e.addIpForm.senior?[a("el-form-item",{attrs:{prop:"vlanid"}},[a("template",{slot:"label"},[a("div",[a("span",[e._v("VLAN")]),a("el-popover",{attrs:{placement:"top-start",width:"180",trigger:"hover",content:e.$t("common.msg182")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:e.addIpForm.vlanid,callback:function(t){e.$set(e.addIpForm,"vlanid",e._n(t))},expression:"addIpForm.vlanid"}})],2),a("el-form-item",{attrs:{prop:"mac","label-width":e.formLabelWidth}},[a("template",{slot:"label"},[a("span",[e._v(e._s(e.$t("common.macAddress")))]),a("el-popover",{attrs:{placement:"top-start",width:"220",trigger:"hover",content:e.$t("common.msg56")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text"},model:{value:e.addIpForm.mac,callback:function(t){e.$set(e.addIpForm,"mac",t)},expression:"addIpForm.mac"}})],2)]:e._e(),a("el-form-item",{attrs:{label:e.$t("userList.remark"),prop:"remark"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},maxlength:30,"show-word-limit":!0},model:{value:e.addIpForm.remark,callback:function(t){e.$set(e.addIpForm,"remark",t)},expression:"addIpForm.remark"}})],1)],2)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.ipTableAdd=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitAddIp}},[e._v(e._s(e.$t("common.sure")))])],1)],1),a("el-dialog",{attrs:{title:e.$t("common.modifyIp"),visible:e.ipTableSevise,width:"500px"},on:{"update:visible":function(t){e.ipTableSevise=t},close:e.resetSeviseForm}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"seviseForm",attrs:{rules:e.rules,model:e.seviseForm,size:"medium","label-width":"140px","label-position":e.$globalConfig.labelPosition}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"}},[a("el-row",{staticClass:"mr-10",staticStyle:{width:"285px"},attrs:{type:"flex",justify:"end"}},[a("el-checkbox",{model:{value:e.seviseForm.senior,callback:function(t){e.$set(e.seviseForm,"senior",t)},expression:"seviseForm.senior"}}),a("span",{staticClass:"ml-5"},[e._v(" "+e._s(e.$t("common.advance")))])],1)],1),"single"===e.dialogType?a("el-form-item",{attrs:{label:"IP",prop:"ip","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",autocomplete:"off",disabled:!0},model:{value:e.seviseForm.ip,callback:function(t){e.$set(e.seviseForm,"ip",t)},expression:"seviseForm.ip"}})],1):e._e(),e.seviseForm.senior?[a("el-form-item",{attrs:{prop:"vlanid"}},[a("template",{slot:"label"},[a("div",[a("span",[e._v("VLAN")]),a("el-popover",{attrs:{placement:"top-start",width:"180",trigger:"hover",content:e.$t("common.msg182")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",disabled:!!e.rowInfo.hostid},model:{value:e.seviseForm.vlanid,callback:function(t){e.$set(e.seviseForm,"vlanid",e._n(t))},expression:"seviseForm.vlanid"}})],2),a("el-form-item",{attrs:{prop:"mac","label-width":e.formLabelWidth}},[a("template",{slot:"label"},[a("span",[e._v(e._s(e.$t("common.macAddress")))]),a("el-popover",{attrs:{placement:"top-start",width:"220",trigger:"hover",content:e.$t("common.msg57")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",disabled:!!e.rowInfo.hostid},model:{value:e.seviseForm.mac,callback:function(t){e.$set(e.seviseForm,"mac",t)},expression:"seviseForm.mac"}})],2)]:e._e(),a("el-form-item",{attrs:{"label-width":e.formLabelWidth}},[a("template",{slot:"label"},[a("span",[e._v(e._s(e.$t("common.ipLock")))]),a("el-popover",{attrs:{placement:"top-start",width:"220",trigger:"hover",content:e.$t("common.msg58")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1),a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.seviseForm.lock,callback:function(t){e.$set(e.seviseForm,"lock",t)},expression:"seviseForm.lock"}})],2),a("el-form-item",{attrs:{label:e.$t("userList.remark"),prop:"remark"}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},maxlength:30,"show-word-limit":!0},model:{value:e.seviseForm.remark,callback:function(t){e.$set(e.seviseForm,"remark",t)},expression:"seviseForm.remark"}})],1)],2)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.ipTableSevise=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitSeviseIp}},[e._v(e._s(e.$t("common.sure")))])],1)],1),a("deleteDialog",{staticClass:"deleteDialog",attrs:{keyword:"ip",isShowDelDialog:e.isShowDelDialog,dataType:"ip",rowInfo:e.rowInfo},on:{submitDeleteRow:e.submitDeleteRow,"update:isShowDelDialog":function(t){e.isShowDelDialog=t},"update:is-show-del-dialog":function(t){e.isShowDelDialog=t}}})],1)],1)},s=[],n=(a("99af"),a("c740"),a("4160"),a("ac1f"),a("841c"),a("159b"),a("96cf"),a("1da1")),r=a("830e"),i=a("6773"),l=a("fdad"),c=a("3995"),d=a("dc57"),m=a("ac0d"),u={metaInfo:function(){return{title:this.$t("common.ipDetails")+this.ip_name}},mixins:[m["a"]],components:{crumbs:r["default"],addButton:i["default"],deleteDialog:l["default"]},data:function(){var e=this,t=function(t,a,o){!0===a?o():o(new Error(e.$t("common.checkAgreeForced")))};return{rowInfo:{},isAgent:JSON.parse(localStorage.getItem("isAgent")),isShowDelDialog:!1,ipName:null,loading:!1,ipSegmentId:"",ipData:[],activeName:"ipList",pageInfo:{page:1,per_page:50,total:0},search:"",lock:0,searchType:0,orderby:"ip_int",sort:"ASC",deleteArrId:[],arrInfo:[],addIpForm:{vlanid:0,first_ip:"",end_ip:"",mac:"",remark:"",senior:!1},seviseForm:{id:"",vlanid:"",ip:"",remark:"",mac:"",lock:0,senior:!1},rules:{first_ip:[{required:!0,message:this.$t("common.enterTheStartIp"),trigger:"blur"},{validator:this.$validate.validateIp,trigger:"blur"}],end_ip:[{required:!0,message:this.$t("common.enterTheEndIp"),trigger:"blur"},{validator:this.$validate.validateIp,trigger:"blur"}],ip:[{required:!0,message:this.$t("common.enterIp"),trigger:"blur"},{validator:this.$validate.validateIp,trigger:"blur"}],mac:{pattern:/^[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}:[0-9a-fA-F]{2}$/,message:this.$t("common.msg60"),trigger:"blur"},agree:[{required:!0,message:this.$t("common.please3"),trigger:"change"},{validator:t,trigger:"change"}]},dialogType:"single",ipTableAdd:!1,ipTableSevise:!1,formLabelWidth:"30%",ip_name:this.$route.query.ip_name?"-"+this.$route.query.ip_name:""}},methods:{formatterAreaNode:function(e){if(e.area_name&&void 0!==e.area_name)return e.node_name&&void 0!==e.node_name||(e.node_name=""),"".concat(e.area_name,"(").concat(e.node_name,")")},handleModify:function(e){this.ipTableSevise=!0,this.seviseForm.id=e.id,this.seviseForm.ip=e.ip,this.seviseForm.vlanid=e.vlanid,this.seviseForm.remark=e.remark,this.seviseForm.lock=e.lock,this.seviseForm.mac=e.ip_mac,this.dialogType="single",this.rowInfo=e},deleteIp:function(e){this.isShowDelDialog=!0,this.rowInfo=e},submitDeleteRow:function(){var e=this,t=this.rowInfo,a=this.deleteArrId.length>0?this.deleteArrId:[t.id];this.$api.ipDelete({id:a}).then((function(t){e.getData(),e.$message({message:t.msg,type:"success"})})).catch((function(t){e.$message.error(t.data.error)}))},getData:function(){var e=this;this.$searchAlive.urlUpdate({search:this.search,searchType:this.searchType,lock:this.lock},location.href,this.$route.query),this.loading=!0;var t={ip_segment_id:this.ipSegmentId,page:this.pageInfo.page,per_page:this.pageInfo.per_page,orderby:this.orderby,sort:this.sort};this.searchType?t.lock=this.lock:t.ip=this.search,this.$api.ip(t).then((function(t){e.loading=!1,e.ipData=t.data,e.pageInfo.total=t.meta.total})).catch((function(t){e.loading=!1,e.$message.error(t.data.error)}))},sortChange:function(e,t,a){this.orderby="ip"===e.prop?"ip_int":e.prop,"ascending"===e.order?this.sort="ASC":this.sort="DESC",this.getData()},sizeChange:function(e){this.pageInfo.per_page=e,this.getData()},currentChange:function(e){this.getData()},searchCallback:function(){this.pageInfo.page=1,this.getData()},addIp:function(){this.ipTableAdd=!0},resetForm:function(){this.addIpForm={vlanid:0,first_ip:"",end_ip:"",mac:"",remark:"",senior:!1},this.$refs.addIpForm.clearValidate()},resetSeviseForm:function(){Object.assign(this.seviseForm,this.$options.data.call(this).seviseForm),this.rowInfo={},this.$refs.seviseForm.clearValidate()},submitAddIp:Object(d["b"])((function(){var e=this;this.$refs.addIpForm.validate((function(t){if(t){""!==e.addIpForm.vlanid&&void 0!==e.addIpForm.vlanid||(e.addIpForm.vlanid=0);var a={first_ip:e.addIpForm.first_ip,end_ip:e.addIpForm.end_ip,ip_segment_id:e.ipSegmentId,vlanid:e.addIpForm.vlanid,status:1,mac:e.addIpForm.mac,remark:e.addIpForm.remark};e.$api.ipAdd(a).then((function(t){e.ipTableAdd=!1,e.$message({message:e.$t("common.addSuccess"),type:"success"}),e.getData()})).catch((function(t){e.$message.error(t.data.error)}))}}))}),1e3),submitSeviseIp:function(){var e=this;this.$refs.seviseForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&e.submitReq();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},submitReq:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("single"!==e.dialogType){t.next=5;break}a={id:e.seviseForm.id,ip_segment_id:e.ipSegmentId,status:1,vlanid:e.seviseForm.vlanid,ip:e.seviseForm.ip,mac:e.seviseForm.mac,lock:e.seviseForm.lock,remark:e.seviseForm.remark},e.$api.ipRevise(a).then((function(t){e.ipTableSevise=!1,e.$message.success(e.$t("common.updateSuccess")),e.getData()})).catch((function(t){e.$message.error(t.data.error)})),t.next=13;break;case 5:return""!==e.seviseForm.vlanid&&void 0!==e.seviseForm.vlanid||(e.seviseForm.vlanid=0),o={id:e.deleteArrId,lock:e.seviseForm.lock,mac:e.seviseForm.mac,vlanid:e.seviseForm.vlanid,remark:e.seviseForm.remark},e.seviseForm.senior||(delete o.mac,delete o.vlanid),t.next=10,c["a"].updateAllIpReq(o);case 10:e.ipTableSevise=!1,e.$message.success(e.$t("common.updateSuccess")),e.getData();case 13:case"end":return t.stop()}}),t)})))()},selectionChange:function(e){var t=[];e.forEach((function(e){t.push(e.id)})),this.arrInfo=e,this.deleteArrId=t},rowSelectable:function(e,t){},massOperation:function(e){if(0===this.deleteArrId.length)return this.$message.warning(this.$t("common.pleaseSelect")),!1;this[e]()},deleteCheck:function(){var e=this.arrInfo.findIndex((function(e){return e.hostid>0}));-1===e?this.isShowDelDialog=!0:this.$message.error(this.$t("common.msg61"))},updateCheck:function(){this.ipTableSevise=!0,this.dialogType="multiple"}},created:function(){var e=this.$searchAlive.urlGetData();e.search&&(this.searchType=e.searchType,this.search=e.search,this.lock=e.lock),this.ipSegmentId=this.$route.query.id,this.ipName=this.$route.query.ip_name,this.$store.state.ipAddDialog&&(this.ipTableAdd=!0,this.$store.commit({type:"setIpAddDialog",ipAddDialog:!1})),this.getData()}},p=u,f=(a("75f8"),a("2877")),h=Object(f["a"])(p,o,s,!1,null,"a2ebb9f0",null);t["default"]=h.exports},9333:function(e,t,a){"use strict";var o=a("2c6a"),s=a.n(o);s.a},a553:function(e,t,a){},a63d:function(e,t,a){},b649:function(e,t,a){},b685:function(e,t,a){e.exports=a.p+"img/cpu-line.e52baf02.svg"},b7cb:function(e,t,a){"use strict";var o=a("cbb4"),s=a.n(o);s.a},bb2f:function(e,t,a){var o=a("d039");e.exports=!o((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c210:function(e,t,a){e.exports=a.p+"img/wait.aeedf2cc.svg"},cbb4:function(e,t,a){},d297:function(e,t,a){},dca8:function(e,t,a){var o=a("23e7"),s=a("bb2f"),n=a("d039"),r=a("861d"),i=a("f183").onFreeze,l=Object.freeze,c=n((function(){l(1)}));o({target:"Object",stat:!0,forced:c,sham:!s},{freeze:function(e){return l&&r(e)?l(i(e)):e}})},dcc9:function(e,t,a){"use strict";var o=a("a63d"),s=a.n(o);s.a},f183:function(e,t,a){var o=a("d012"),s=a("861d"),n=a("5135"),r=a("9bf2").f,i=a("90e3"),l=a("bb2f"),c=i("meta"),d=0,m=Object.isExtensible||function(){return!0},u=function(e){r(e,c,{value:{objectID:"O"+ ++d,weakData:{}}})},p=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,c)){if(!m(e))return"F";if(!t)return"E";u(e)}return e[c].objectID},f=function(e,t){if(!n(e,c)){if(!m(e))return!0;if(!t)return!1;u(e)}return e[c].weakData},h=function(e){return l&&g.REQUIRED&&m(e)&&!n(e,c)&&u(e),e},g=e.exports={REQUIRED:!1,fastKey:p,getWeakData:f,onFreeze:h};o[c]=!0},f5a1:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ip"},[a("el-card",{staticClass:"box-card"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticClass:"ipList",attrs:{label:e.$t("common.ipSegmentList"),name:"ipList"}},[a("crumbs"),a("div",{staticClass:"node-management-row"},[e.isAgent?e._e():a("div",{staticClass:"management-left"},[a("div",{staticClass:"search-input fboxRow"},[a("el-select",{staticStyle:{width:"135px"},attrs:{size:"small",placeholder:e.$t("common.select")},on:{change:e.changeVal},model:{value:e.options.value,callback:function(t){e.$set(e.options,"value",t)},expression:"options.value"}},e._l(e.options.tips,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1),0===e.options.value?a("searchInput",{staticClass:"ml-10",attrs:{placeholder:e.$t("common.pleaseFindIp")},on:{callback:e.searchCallback},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e(),1===e.options.value?a("el-select",{staticClass:"ml-10",attrs:{filterable:"",size:"small",placeholder:e.$t("common.select")},on:{change:e.searchCallback},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},e._l(e.options.node,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.name,value:e.id}})})),1):e._e(),2===e.options.value?a("el-select",{staticClass:"ml-10",attrs:{filterable:"",size:"small",placeholder:e.$t("common.select")},on:{change:e.searchCallback},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},e._l(e.options.node,(function(e,t){return a("el-option",{key:t,attrs:{label:""+e.node_name,value:e.node_id}})})),1):e._e()],1)]),e.isAgent?e._e():a("div",{staticClass:"button-wrapper",on:{click:e.addAdmin}},[a("addButton"),a("insideButton",{attrs:{name:"IpGroup"}},[e._v(e._s(e.$t("cloud.ipGroup")))])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ipTable",staticStyle:{width:"100%"},attrs:{"element-loading-text":e.$t("common.loading"),data:e.ipData},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30",align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("sortOrder",{attrs:{label:t.column.label,property:t.column.property},on:{callbackChangeOrder:e.handleCallbackChangeOrder}})]}}])}),a("el-table-column",{attrs:{prop:"",label:e.$t("common.name"),"min-width":"250","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[a("sortOrder",{attrs:{label:t.column.label,property:t.column.property},on:{callbackChangeOrder:e.handleCallbackChangeOrder}})]}},{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"IpDetail",query:{id:t.row.id,ip_name:t.row.ip_name}}}},[a("el-link",{attrs:{type:"primary"}},[e._v(e._s(t.row.ip_name))])],1)]}}])}),a("el-table-column",{attrs:{prop:"total",label:e.$t("common.gross"),width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[a("sortOrder",{attrs:{label:t.column.label,property:t.column.property},on:{callbackChangeOrder:e.handleCallbackChangeOrder}})]}},{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.count.total))])]}}])}),a("el-table-column",{attrs:{prop:"used",label:e.$t("common.used"),width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[a("sortOrder",{attrs:{label:t.column.label,property:t.column.property},on:{callbackChangeOrder:e.handleCallbackChangeOrder}})]}},{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.count.used))])]}}])}),a("el-table-column",{attrs:{prop:"lock",label:e.$t("common.locking"),width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[a("sortOrder",{attrs:{label:t.column.label,property:t.column.property},on:{callbackChangeOrder:e.handleCallbackChangeOrder}})]}},{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.count.lock))])]}}])}),a("el-table-column",{attrs:{prop:"free",label:e.$t("common.idle"),width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[a("sortOrder",{attrs:{label:t.column.label,property:t.column.property},on:{callbackChangeOrder:e.handleCallbackChangeOrder}})]}},{key:"default",fn:function(t){var o=t.row;return[a("span",[e._v(e._s(o.count.free))])]}}])}),e.isAgent?e._e():a("el-table-column",{attrs:{prop:"group_name",label:e.$t("admin.groupName"),"show-overflow-tooltip":"",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("sortOrder",{attrs:{label:t.column.label,property:t.column.property},on:{callbackChangeOrder:e.handleCallbackChangeOrder}})]}}],null,!1,501797150)}),e.isAgent?e._e():a("el-table-column",{attrs:{label:e.$t("common.useNode"),"show-overflow-tooltip":"","min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.node,(function(t,o){return a("span",{key:o},[o<16?a("el-tag",{staticClass:"mr-10",attrs:{size:"mini",type:"success"}},[a("div",[e._v(" "+e._s(t.name)+" ")])]):e._e()],1)})),a("br")]}}],null,!1,298315019)}),e._v("` "),e.isAgent?e._e():a("el-table-column",{attrs:{label:e.$t("common.manage"),width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("div",{staticClass:"icon-wrapper"},[a("cl-button",{attrs:{type:"update"},on:{click:function(t){return e.handleModify(o)}}}),a("cl-button",{attrs:{type:"delete"},on:{click:function(t){return e.deleteRow(o)}}})],1)]}}],null,!1,710033073)})],1),a("div",{staticClass:"pagination"},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[e.isAgent?a("div"):a("div",{attrs:{size:"small"}},[a("el-dropdown",{attrs:{szie:"small"}},[a("span",{staticClass:"el-dropdown-link delete-btn",staticStyle:{outline:"none",display:"inline-block"}},[e._v(" "+e._s(e.$t("image.batch"))),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{staticClass:"delete-btn",on:{click:function(t){e.massOperation("edit",e.$t("migration.edit"))}}},[e._v(" "+e._s(e.$t("migration.edit"))+" ")])]),a("el-dropdown-item",[a("div",{staticClass:"delete-btn",on:{click:function(t){e.massOperation("delete",e.$t("common.delete"))}}},[e._v(" "+e._s(e.$t("common.delete"))+" ")])])],1)],1)],1),a("el-pagination",{attrs:{"current-page":e.pageInfo.page,"page-sizes":[10,20,50,100],"page-size":e.pageInfo.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.currentChange,"current-change":e.currentChange,"update:currentPage":function(t){return e.$set(e.pageInfo,"page",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"page",t)},"update:pageSize":function(t){return e.$set(e.pageInfo,"per_page",t)},"update:page-size":function(t){return e.$set(e.pageInfo,"per_page",t)}}}),a("div")],1)],1)],1)],1),a("el-dialog",{attrs:{title:e.dialogTableContent.title,visible:e.dialogTableRevise,width:"500px"},on:{"update:visible":function(t){e.dialogTableRevise=t},close:e.resetForm,open:e.openReset}},[a("el-row",{attrs:{gutter:15}},[a("el-form",{ref:"reviseForm",attrs:{model:e.reviseForm,size:"medium","label-position":e.$globalConfig.labelPosition,rules:e.rules,"label-width":"140px"}},[a("el-row",{staticClass:"mr-10",attrs:{type:"flex",justify:"end"}},[a("el-checkbox",{model:{value:e.senior,callback:function(t){e.senior=t},expression:"senior"}}),a("span",{staticClass:"ml-5"},[e._v(" "+e._s(e.$t("common.advance")))])],1),a("br"),"batchUpdate"!==e.dialogTableContent.type?[a("el-form-item",{attrs:{label:e.$t("common.ipSegmentName"),prop:"ip_name","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",autocomplete:"off"},model:{value:e.reviseForm.ip_name,callback:function(t){e.$set(e.reviseForm,"ip_name",t)},expression:"reviseForm.ip_name"}})],1),a("el-form-item",{attrs:{label:e.$t("common.gateway"),prop:"gateway","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",autocomplete:"off"},model:{value:e.reviseForm.gateway,callback:function(t){e.$set(e.reviseForm,"gateway",t)},expression:"reviseForm.gateway"}})],1),a("el-form-item",{attrs:{label:e.$t("common.subnetMask"),prop:"subnet_mask","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:e.$t("common.selectASubnetMask"),filterable:""},model:{value:e.reviseForm.subnet_mask,callback:function(t){e.$set(e.reviseForm,"subnet_mask",t)},expression:"reviseForm.subnet_mask"}},e._l(e.subnetMask,(function(e){return a("el-option",{key:e.id,attrs:{label:e.address+"(/"+e.id+")",value:e.address}})})),1)],1),a("el-form-item",{attrs:{label:"DNS1",prop:"dns1","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",autocomplete:"off"},model:{value:e.reviseForm.dns1,callback:function(t){e.$set(e.reviseForm,"dns1",t)},expression:"reviseForm.dns1"}})],1),a("el-form-item",{attrs:{label:"DNS2",prop:"dns2","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",autocomplete:"off"},model:{value:e.reviseForm.dns2,callback:function(t){e.$set(e.reviseForm,"dns2",t)},expression:"reviseForm.dns2"}})],1)]:e._e(),a("el-form-item",{attrs:{label:e.$t("image.group"),prop:"group_id","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:e.$t("common.selectAGroup"),clearable:"",filterable:""},model:{value:e.reviseForm.group_id,callback:function(t){e.$set(e.reviseForm,"group_id",t)},expression:"reviseForm.group_id"}},e._l(e.ipGroup,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:e.$t("common.availableNode"),"label-width":e.formLabelWidth}},[[a("el-cascader",{ref:"cascader",staticStyle:{width:"85%"},attrs:{options:e.allnodeList,props:{children:"node",label:"name",value:"id",multiple:!0,emitPath:!1}},model:{value:e.reviseForm.node_ids,callback:function(t){e.$set(e.reviseForm,"node_ids",t)},expression:"reviseForm.node_ids"}})]],2),e.senior?a("el-form-item",{attrs:{label:"Onlink IP",prop:"onlink","label-width":e.formLabelWidth}},[a("template",{slot:"label"},[a("div",[a("span",[e._v("Onlink IP")]),a("el-popover",{attrs:{placement:"top-start",width:"180",trigger:"hover",content:e.$t("common.msg222")}},[a("i",{staticClass:"el-icon-question ml-10",staticStyle:{color:"#cccccc",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"})])],1)]),a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.reviseForm.onlink,callback:function(t){e.$set(e.reviseForm,"onlink",t)},expression:"reviseForm.onlink"}})],2):e._e()],2)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableRevise=!1}}},[e._v(e._s(e.$t("common.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:e.subminForm}},[e._v(e._s(e.$t("common.sure")))])],1)],1)],1),a("deleteDialog",{staticClass:"deleteDialog",attrs:{keyword:"ip_name",isShowDelDialog:e.isShowDelDialog,dataType:e.$t("common.ipSegment"),rowInfo:e.rowInfo},on:{submitDeleteRow:e.submitDeleteRow,"update:isShowDelDialog":function(t){e.isShowDelDialog=t},"update:is-show-del-dialog":function(t){e.isShowDelDialog=t}}}),a("el-dialog",{attrs:{title:e.$t("common.useNode"),visible:e.isNodeDialogShow,width:"30%"},on:{"update:visible":function(t){e.isNodeDialogShow=t}}},[a("el-row",[a("el-col",{staticClass:"show-node",attrs:{offset:1}},e._l(e.showNodeList,(function(t){return a("span",{key:t.id},[a("el-tag",{staticClass:"mr-10 mt-10",attrs:{size:"mini",type:"success"}},[e._v(" "+e._s(t.name)+" ")])],1)})),0)],1)],1)],1)},s=[],n=(a("4de4"),a("4160"),a("c975"),a("dca8"),a("d3b7"),a("ac1f"),a("841c"),a("159b"),a("96cf"),a("1da1")),r=a("ac0d"),i=a("fdad"),l=a("830e"),c=a("6773"),d=a("3995"),m={metaInfo:function(){return{title:this.$t("layout.ipManagement")}},mixins:[r["a"]],components:{crumbs:l["default"],addButton:c["default"],deleteDialog:i["default"]},data:function(){return{loading:!1,isAgent:JSON.parse(localStorage.getItem("isAgent")),rowInfo:{},isShowDelDialog:!1,currentTitle:"",ipData:[],isNodeDialogShow:!1,showNodeList:[],activeName:"ipList",pageInfo:{page:1,per_page:50,total:0,total_page:1,orderby:"id",sort:"desc"},search:null,deleteArrId:[],dialogTableRevise:!1,formLabelWidth:"30%",subnetMask:Object.freeze([{id:8,address:"255.0.0.0"},{id:9,address:"255.128.0.0"},{id:10,address:"255.192.0.0"},{id:11,address:"255.224.0.0"},{id:12,address:"255.240.0.0"},{id:13,address:"255.248.0.0"},{id:14,address:"255.252.0.0"},{id:15,address:"255.254.0.0"},{id:16,address:"255.255.0.0"},{id:17,address:"255.255.128.0"},{id:18,address:"255.255.192.0"},{id:19,address:"255.255.224.0"},{id:20,address:"255.255.240.0"},{id:21,address:"255.255.248.0"},{id:22,address:"255.255.252.0"},{id:23,address:"255.255.254.0"},{id:24,address:"255.255.255.0"},{id:25,address:"255.255.255.128"},{id:26,address:"255.255.255.192"},{id:27,address:"255.255.255.224"},{id:28,address:"255.255.255.240"},{id:29,address:"255.255.255.248"},{id:30,address:"255.255.255.252"},{id:31,address:"255.255.255.254"},{id:32,address:"255.255.255.255"}]),senior:!1,reviseForm:{id:"",ip_name:"",gateway:"",subnet_mask:"255.255.255.0",dns1:"",dns2:"",status:1,group_id:null,node_ids:[],onlink:0},rules:{ip_name:{required:!0,message:this.$t("common.enterIpSegmentName"),trigger:"blur"},gateway:[{required:!0,message:this.$t("common.enterTheGateway"),trigger:"blur"},{validator:this.$validate.validateIp,trigger:"blur"}],subnet_mask:[{required:!0,message:this.$t("common.pleaseEnterTheSubnetMask"),trigger:"blur"},{validator:this.$validate.validateMask,trigger:"blur"}],dns1:[{required:!0,message:this.$t("common.pleaseEnterDns1"),trigger:"blur"},{validator:this.$validate.validateIp,trigger:"blur"}],dns2:[{required:!0,message:this.$t("common.pleaseEnterDns2"),trigger:"blur"},{validator:this.$validate.validateIp,trigger:"blur"}]},allnodeList:[],ipGroup:[],dialogTableContent:{type:"add",title:this.$t("common.addIpSegment")},options:{value:0,tips:[{id:0,name:this.$t("common.name")},{id:1,name:this.$t("common.group")},{id:2,name:this.$t("common.node")}],node:[]},batchEdit:!1}},watch:{dialogTableRevise:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e||0!==t.ipGroup.length){a.next=5;break}return a.next=3,d["a"].getIpGroupsReq({list_type:"all"});case 3:o=a.sent,t.ipGroup=o.data;case 5:case"end":return a.stop()}}),a)})))()}},methods:{massOperation:function(e,t){var a=this;if(0===this.deleteArrId.length)return this.$message.warning(this.$t("databaseBackup.chooseFirst")),!1;"delete"===e&&(t=this.$t("common.ip_delete_tip"),this.$swal.fire({title:t,icon:"warning",showCancelButton:!0,confirmButtonText:this.$t("common.sure"),cancelButtonText:this.$t("common.cancel")}).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o.isConfirmed&&"delete"===e&&a.deleteCheck();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),"edit"===e&&(this.dialogTableContent={type:"batchUpdate",title:this.$t("common.batchEditIpSegment")},this.reviseForm={id:this.deleteArrId,group_id:null,node_ids:[],onlink:0},this.dialogTableRevise=!0)},batchReviseForm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.dialogTableRevise=!1,t.next=4,e.$api.batchIpReviseSegment(e.reviseForm);case 4:e.$message({message:e.$t("common.updateSuccess"),type:"success"}),e.getData(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message.error(t.t0.data.error);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},changeVal:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=!(e.length>0&&void 0!==e[0])||e[0],o&&(t.search=""),t.search="",t.getData(),2===t.options.value&&t.$api.clouds({searchtype:t.options.value}).then((function(e){t.options.node=e})),1!==t.options.value){a.next=10;break}return a.next=8,d["a"].getIpGroupsReq({list_type:"all"});case 8:s=a.sent,t.options.node=s.data;case 10:case"end":return a.stop()}}),a)})))()},deleteRow:function(e){this.isShowDelDialog=!this.isShowDelDialog,this.rowInfo=e},navList:function(){var e=[this.navPath[this.secondNavIndex]];return e},getData:function(){var e=this;this.$searchAlive.urlUpdate({search:this.search,value:this.options.value},location.href,this.$route.query),this.loading=!0;var t={page:this.pageInfo.page,per_page:this.pageInfo.per_page,orderby:this.pageInfo.orderby,sort:this.pageInfo.sort};0===this.options.value?t.ip_name=this.search:1===this.options.value?t.ip_group=this.search:2===this.options.value&&(t.node=this.search),this.$api.ipSegment(t).then((function(t){e.ipData=t.data,e.pageInfo.total_page=t.meta.total_page,e.pageInfo.total=t.meta.total})).finally((function(){e.loading=!1}))},handleCallbackChangeOrder:function(e){this.pageInfo.orderby=e.orderby,this.pageInfo.sort=!0===e.sort?"asc":"desc",this.getData()},currentChange:function(e){this.getData()},searchCallback:function(){this.pageInfo.page=1,this.getData()},ipDetail:function(e){this.$api.ip({ip_segment_id:e}).then((function(e){}))},openNodeDialog:function(e){this.isNodeDialogShow=!0,this.showNodeList=e},openReset:function(){var e=[];this.allnodeList.forEach((function(t){t.node.forEach((function(t){e.push(t.id)}))})),this.reviseForm.node_ids.sort((function(t,a){return e.indexOf(t)-e.indexOf(a)}))},resetForm:function(){this.senior=!1,this.reviseForm={id:"",ip_name:"",gateway:"",subnet_mask:"255.255.255.0",dns1:"",dns2:"",status:1,group_id:null,node_ids:[],onlink:0},this.$refs.reviseForm.clearValidate()},selectionChange:function(e){var t=[];e.forEach((function(e){t.push(e.id)})),this.deleteArrId=t},submitDeleteRow:function(){var e=this,t=this.rowInfo;this.$api.deleteSegment({id:[t.id]}).then((function(t){e.$message({message:t.msg,type:"success"}),e.getData()}),(function(t){e.$message.error(t.data.error)})).catch((function(t){e.$message.error(t.data.error)}))},deleteCheck:function(){var e=this;if(0===this.deleteArrId.length)return this.$message.warning(this.$t("databaseBackup.chooseFirst")),!1;this.$api.deleteSegment({id:this.deleteArrId}).then((function(t){e.$message.success(t.msg),e.getData()})).catch((function(t){e.$message.error(t.msg)}))},addAdmin:function(){this.dialogTableContent={type:"add",title:this.$t("common.addIpSegment")},this.dialogTableRevise=!0,this.batchEdit=!1},handleModify:function(e){var t=this;this.dialogTableContent={type:"update",title:this.$t("common.editIpSegment")},this.batchEdit=!1,this.reviseForm={id:e.id,ip_name:e.ip_name,gateway:e.gateway,subnet_mask:e.subnet_mask,dns1:e.dns1,dns2:e.dns2,status:1,group_id:0===e.group_id?null:e.group_id,node_ids:[],onlink:e.onlink},e.node.forEach((function(e){t.reviseForm.node_ids.push(e.id)})),this.dialogTableRevise=!0},subminForm:function(){var e=this;this.$refs.reviseForm.validate((function(t){t&&("add"===e.dialogTableContent.type?e.submitAddForm():"update"===e.dialogTableContent.type?e.subminReviseForm():e.batchReviseForm())}))},submitAddForm:function(){var e=this;this.$api.ipAddSegment(this.reviseForm).then((function(t){e.dialogTableRevise=!1,e.$message.success(e.$t("common.addSuccess")),e.$store.commit({type:"setIpAddDialog",ipAddDialog:!0}),e.$router.push({name:"IpDetail",query:{id:t.id,ip_name:t.ip_name}})})).catch((function(t){e.$message.error(t.data.error)}))},subminReviseForm:function(){var e=this;this.$api.ipReviseSegment(this.reviseForm).then((function(t){e.dialogTableRevise=!1,e.$message({message:e.$t("common.updateSuccess"),type:"success"}),e.getData()})).catch((function(t){e.$message.error(t.data.error)}))},deleteIpSegment:function(e){var t=this;this.$api.deleteSegment({id:[e.id]}).then((function(e){t.$message.success(e.msg),t.getData()})).catch((function(e){t.$message.error(e.msg)}))}},created:function(){var e=this,t=this.$searchAlive.urlGetData();t.search&&(this.search=t.search,this.options.value=t.value,this.changeVal(!1)),this.getData(),this.$api.areas({list_type:"all",include_node:1}).then((function(t){e.allnodeList=t.data,e.allnodeList=e.allnodeList.filter((function(e){return e.node.length}))}))}},u=m,p=(a("b7cb"),a("22b8"),a("2877")),f=Object(p["a"])(u,o,s,!1,null,"bdd703a0",null);t["default"]=f.exports},f764:function(e,t,a){"use strict";var o=a("a553"),s=a.n(o);s.a}}]);